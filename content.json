{"meta":{"title":"luchen","subtitle":null,"description":"æ‰€æœ‰çš„å¤§äººéƒ½æ›¾æ˜¯å°å­©å­.","author":"luchen","url":"http://yoursite.com"},"pages":[{"title":"categories","date":"2017-02-02T14:06:46.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"Tagcloud","date":"2017-02-02T13:42:01.000Z","updated":"2017-02-28T05:01:34.000Z","comments":false,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"review","slug":"review-1","date":"2017-05-12T08:28:21.000Z","updated":"2017-05-12T08:28:21.000Z","comments":true,"path":"2017/05/12/review-1/","link":"","permalink":"http://yoursite.com/2017/05/12/review-1/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"review","slug":"review","date":"2017-05-12T08:28:11.000Z","updated":"2017-05-12T09:07:44.000Z","comments":true,"path":"2017/05/12/review/","link":"","permalink":"http://yoursite.com/2017/05/12/review/","excerpt":"","text":"æ¶ˆå¤±äº†å¥½ä¹…â€¦è‡ªä»ä¸Šæ¬¡å®ä¹ é¢è¯•å¼€å§‹é™†é™†ç»­ç»­çš„è¡¥äº†å¾ˆå¤šçŸ¥è¯†ï¼Œä½†æ˜¯å› ä¸ºæ˜¯é›¶é›¶ç¢ç¢çš„çŸ¥è¯†ï¼Œä¸èƒ½è‡ªæˆä½“ç³»çš„å†™ä¸€ç¯‡..å°±å…ˆä¸å†™å•¦ï¼Œå°±å¤§æ¦‚è¯´ä¸‹æ¥¼ä¸»æœ€è¿‘å¹²äº†äº›å•¥å§~ æŒ‰ç…§æ ‡å‡†å†™äº†ä¸€éPromise åœ¨å†™çš„è¿‡ç¨‹ä¸­ï¼Œé™¤äº†ä¸ç”¨å¤šè¯´çš„ç†è§£äº†promiseçš„å†…åœ¨ï¼Œè¿˜æœ‰å¾ˆå¤šè™½ç„¶å¾ˆå°ï¼Œä½†æ˜¯å¾ˆç²¾å¦™çš„ç»†èŠ‚çŸ¥è¯†ï¼Œæ¯”å¦‚ event-loop æ ‡å‡†åº“é…å¥—çš„testcaseä»£ç  ç‰¹åˆ«æ˜¯æœ‰äº›caseï¼Œæ¥¼ä¸»å¤§æ¦‚æƒ³éƒ½æƒ³ä¸åˆ°ï¼Œæ¯”å¦‚thençš„get proxyå» fit æ ‡å‡†ä¸­é˜²æ­¢thenè¢«å¤šæ¬¡å¼•ç”¨çš„æƒ…å†µã€‚è²Œä¼¼æ˜¯note3.5é‡Œé¢æåˆ°çš„ï¼‰ bluebirdé‡Œé¢å¯¹promisifyçš„å®ç°æ€è·¯ï¼Œç”¨mockçš„ä¸€ä¸ªcallbackå»è¡¥è¶³åŸæœ‰çš„callbackçš„ä½ç½®ï¼Œå»å†³è®®å½“å‰promiseçš„çŠ¶æ€ â€¦è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ä»£ç æ¶æ„ä¸Šï¼Œæ€ä¹ˆä¸å†—ä½™ç­‰ç­‰ï¼Œæ€»ä¹‹å†™äº†å¾ˆæœ‰æ”¶è· çœ‹äº†ä¸€éæœ´çµå¤§å¤§çš„æ·±å…¥æµ…å‡ºNodeï¼Œ è™½ç„¶æœ‰äº›ç« èŠ‚æ„Ÿè§‰ä¸å¤Ÿæ·±å…¥ï¼Œæ¯”å¦‚æ¨¡å—è·Ÿç½‘ç»œç¼–ç¨‹é‚£éƒ¨åˆ†ï¼Œæ¥¼ä¸»ä¹‹å‰æƒ³debug httpæ¨¡å—å»ç†è§£é‡Œé¢çš„æ¯”å¦‚socketéƒ¨åˆ†ç­‰ç­‰ï¼Œä½†æ˜¯çœŸçš„æ„Ÿè§‰httpæ¨¡å—è·Ÿå…¶ä»–æ¨¡å—åƒä¸ä¸‡ç¼•çš„å…³ç³»â€¦åŒ…æ‹¬netçš„connection,dnsçš„lookupï¼Œoutmessageè¿™äº›æ¶‰åŠåˆ°çš„streamï¼Œbufferç­‰ç­‰ï¼Œè°ƒäº†å¾ˆä¹…æ„Ÿè§‰è¿˜æ˜¯å†°å±±ä¸€è§’â€¦ç„¶åæƒ³ç¿»ä¸€ä¸‹æ·±å…¥æµ…å‡º,ä½†æ˜¯æ¯”è¾ƒå¯æƒœçš„æ˜¯å¥½åƒè®²çš„ä¸æ˜¯ç‰¹åˆ«æ·±å…¥..è¿™éƒ¨åˆ†è¿˜æ˜¯å¾—æ…¢æ…¢å†çœ‹ã€‚ ä¸è¿‡æœ‰äº›ç« èŠ‚çœ‹çš„å°±å¾ˆè¿‡ç˜¾äº†ï¼Œæ¯”å¦‚æ„å»ºwebåº”ç”¨é‡Œé¢çš„è·¯ç”±è§£æè·Ÿä¸­é—´ä»¶éƒ¨åˆ†ã€‚ å—¯ï¼Œå…¶å®æ„Ÿè§‰å¾ˆå¤šçŸ¥è¯†å†™ç€å†™ç€å°±èƒ½ç†è§£äº†ï¼Œæ¥¼ä¸»ä¹‹å‰å†™åç«¯çš„æ—¶å€™å½»åº•ç†è§£äº†ä¸‹sessionï¼Œhttpsè¿™äº›ï¼Œç„¶åå†™promiseçš„æ—¶å€™ï¼Œå¯¹äºäº‹ä»¶é˜Ÿåˆ—ï¼Œå›è°ƒè¿™äº›ä¹Ÿæœ‰äº†è·Ÿä»¥å‰ä¸ä¸€æ ·çš„è®¤è¯†ã€‚ç°åœ¨å†å›å¤´çœ‹æ·±å…¥æµ…å‡ºé‡Œé¢çš„è¿™äº›ç« èŠ‚ï¼Œå°±æ°´åˆ°æ¸ æˆçš„æ„Ÿè§‰ï¼šï¼‰ tcpç›¸å…³çš„ä¹¦ï¼Œæ²¡æ€ä¹ˆçœ‹å®Œï¼ŒåŒ…æ‹¬tcp/ipå·ä¸€çš„ä¸€äº›ç« èŠ‚ï¼Œè°¢å¸Œä»çš„è®¡ç®—æœºç½‘ç»œç­‰ç­‰ æƒ³ä»¿å†™ç®€èŠæ¥ç€ï¼Œä¹‹å‰å†™äº†accountéƒ¨åˆ†ï¼ŒåŸºæœ¬æ˜¯å‰ç«¯react+react-reduxï¼Œåç«¯express+mongooseã€‚ç°åœ¨åœ¨è®¾è®¡æ•°æ®åº“é˜¶æ®µ..æ„Ÿè§‰æ€ä¹ˆè®¾è®¡éƒ½æœ‰ç‚¹é—®é¢˜çš„æ ·çº¸..=ã€‚= ä¸‡å¹´ä¸å®šæœŸåˆ·çš„LeetCodeï¼Œå®‰åˆ©ä¸‹æ¥¼ä¸»çš„repoï¼Œç°åœ¨å¤§æ¦‚åˆ·äº†175+é“å§ã€‚ ä¹‹å‰é¡¹ç›®é‡Œé¢è¿˜åŠ äº†å‰‘æŒ‡offeré‡Œé¢çš„ä¸€äº›é¢˜ï¼Œç„¶åæœ€è¿‘æƒ³æŠŠä¹‹å‰è½ä¸‹çš„codewarsç»™æ¡èµ·æ¥ï¼Œåˆ·ä¸€åˆ·design patternçš„çŸ¥è¯†ã€‚ åšå¼ˆè®º(game theory)â€¦è¿™æ˜¯æ¥¼ä¸»æœ€è¿‘å‘ç°çš„è€¶é²çš„ä¸€ä¸ªå…¬å¼€è¯¾ï¼Œæ‰çœ‹äº†æ²¡å¤šå°‘ï¼Œæ„Ÿè§‰æ€ç»´æ‰“å¼€äº†æ–°ä¸–ç•Œå“ˆå“ˆå“ˆï¼Œç­‰è¿½å®Œå†çœ‹çœ‹è¦ä¸è¦å†™ä¸ªç¬”è®°å•¥çš„ å…¶ä»–å•¦ï¼Œå°±æ˜¯è·‘æ­¥,çœ‹ç”µå½±ï¼Œè·Ÿé—ºèœœå‡ºå»æµªå•¦ğŸ˜Œ","categories":[],"tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/tags/éšç¬”/"}]},{"title":"express+mongodbå¼€å‘æ€»ç»“ä¹‹cryptoä¸sessionç¯‡","slug":"express-mongodbå¼€å‘æ€»ç»“ä¹‹cryptoä¸sessionç¯‡","date":"2017-02-28T05:16:33.000Z","updated":"2017-02-28T06:10:58.000Z","comments":true,"path":"2017/02/28/express-mongodbå¼€å‘æ€»ç»“ä¹‹cryptoä¸sessionç¯‡/","link":"","permalink":"http://yoursite.com/2017/02/28/express-mongodbå¼€å‘æ€»ç»“ä¹‹cryptoä¸sessionç¯‡/","excerpt":"","text":"hash.update()æ–¹æ³•å°±æ˜¯å°†å­—ç¬¦ä¸²ç›¸åŠ ï¼Œç„¶ååœ¨hash.digest()å°†å­—ç¬¦ä¸²åŠ å¯†è¿”å› clientå…ˆç”¨certificateï¼ˆå¾—åˆ°serverå…¬é’¥ï¼‰éªŒè¯serverèº«ä»½ï¼Œç„¶åç”¨è¿™ä¸ªå…¬é’¥è§£å¯†serverå‘æ¥çš„helloä¿¡æ¯ï¼ŒssléªŒè¯èº«ä»½å®Œä»¥å clientéšæœºç”Ÿæˆä¸€ä¸ªå¤§æ•°ï¼Œç”¨serverçš„å…¬é’¥åŠ å¯†ï¼Œä¼ è¿‡å»ï¼Œserveræ¥è§£å¯†å¾—åˆ°ï¼Œä»¥åå°±ç”¨è¿™ä¸ªéšæœºæ•°ä½œä¸ºmaster secret,ç„¶ååŒæ–¹ç”¨master secretç”Ÿæˆæœ€åçš„sessionkeyï¼Œä½œä¸ºå¯¹ç§°åŠ å¯†çš„key cryptoï¼š ä¸å¯é€†ï¼Œhashé‡Œé¢çš„hashæ¨¡å—ï¼Œhmacæ¨¡å—ï¼ˆæ”¾ç½®å½©è™¹è¡¨æ”»å‡»ï¼Œåœ¨hashçš„åŸºç¡€ä¸ŠåŠ äº†ä¸€ä¸ªkeyï¼‰ hashä¸­ï¼Œå¸¸ç”¨çš„ç”¨sha1å°±å¯ä»¥ï¼Œæ—¶é—´é•¿åº¦éƒ½è¿˜å¯ä»¥ï¼Œmd5ï¼ˆ32ä½ï¼‰ 1234567//å¯¹äºç™»å½•å¯†ç ï¼Œå¯ä»¥å­˜key+å¯†æ–‡ï¼Œå½©è™¹è¡¨ä¹Ÿæ¨ä¸å‡ºæ¥//å¯¹äºç™»é™†å¯†ç æ¥è¯´ï¼Œæ˜¯ä¸éœ€è¦è€ƒè™‘è§£å¯†çš„ï¼Œé€šå¸¸éƒ½ä¼šç”¨ä¸å¯é€†çš„ç®—æ³•ï¼Œåƒmd5,sha-1ç­‰&#123;username: &apos;xxxx&apos;password: &apos;aead69a72da77d0615a854dda1086d885807574a&apos;,passkey:&apos;abc&apos;&#125; å¯é€†ç®—æ³•ï¼Œcryptoé‡Œé¢ä¹Ÿæœ‰æ”¯æŒâ€”â€”cipher,decipher rc4å’Œaes-256-cbcæ˜¯è¡¨ç°ä¸é”™çš„ç®—æ³•ï¼ŒåŠ å¯†å’Œè§£å¯†æ—¶é—´éƒ½æ¯”è¾ƒçŸ­ï¼ŒåŠ å¯†æ—¶é—´:è§£å¯†æ—¶é—´=1:3ï¼›å¯¹äºæœåŠ¡ç«¯åŠ å¯†ï¼Œå®¢æˆ·ç«¯è§£å¯†çš„ï¼Œaes-256-cbcç®—æ³•çš„è®¡ç®—æ—¶é—´æ¯”ä¾‹å°±å¯ä»¥ã€‚ ç­¾åå’Œè®¤è¯ è¿˜éœ€è¦åˆ¤æ–­æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦çœŸå®é™…å’Œå®Œæ•´ï¼Œæ˜¯å¦è¢«ç¯¡æ”¹äº†ã€‚é‚£ä¹ˆå°±éœ€è¦ç”¨åˆ°ç­¾åå’ŒéªŒè¯çš„ç®—æ³•ï¼Œåˆ©ç”¨ä¸å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œé€šè¿‡ç§é’¥è¿›è¡Œæ•°å­—ç­¾åï¼Œå…¬é’¥éªŒè¯æ•°æ®çš„çœŸå®æ€§ã€‚ ç­¾åï¼š data -&gt; hashedData -&gt; ç§é’¥åŠ å¯† + è¯ä¹¦ -&gt; ç­¾ååçš„ã€‚ è§£å¯†ï¼š æ›´å¤æ‚ä¸€ç‚¹çš„æ˜¯ï¼Œç”¨è®¤è¯æœºæ„çš„å…¬é’¥å»è§£å¯†è¯ä¹¦ï¼Œå¾—åˆ°å…¬é’¥ï¼Œç”¨è¿™ä¸ªå…¬é’¥ï¼ˆä¸ç­¾åè€…ç»™çš„å…¬é’¥æ¯”å¯¹ï¼Œçœ‹æ˜¯å¦æ˜¯æ­£ç¡®çš„å…¬é’¥ï¼Œç­¾åè€…å¯¹ä¸å¯¹ï¼‰ï¼ˆè¿™è¾¹éªŒè¯äº†é€šä¿¡åŒæ–¹ï¼‰ã€‚ ç”¨è¿™ä¸ªå…¬é’¥å» è§£å¯† åŠ å¯†çš„æ•°æ®ï¼Œå¾—åˆ°hashedData. === hashï¼ˆdataï¼‰.ï¼ˆè¿™è¾¹éªŒè¯æ•°æ®æ˜¯å¦å®Œæ•´ï¼‰éƒ½æ­£ç¡®çš„è¯å°±æ˜¯èº«ä»½è®¤è¯ç»“æŸã€‚ ç”¨åº“çš„è¯ï¼Œæµç¨‹ä¸Šå°±æ˜¯ï¼š opensslå‘½ä»¤ç”Ÿæˆå…¬ç§é’¥ï¼Œç”¨ç§é’¥ä¸æ•°æ®å¾—åˆ°æ•°å­—ç­¾åï¼ˆsignï¼‰ï¼Œç”¨å…¬é’¥ï¼Œæ•°æ®ï¼Œæ•°å­—ç­¾åå»verifyverify(algorithm,pubkey,sig,data) saltï¼š hash(text+salt) crypto.pbkdf2()å‡½æ•°ï¼Œé»˜è®¤ä¼šè°ƒç”¨hmacç®—æ³•ï¼Œç”¨sha1çš„æ•£åˆ—å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®è¿­ä»£æ¬¡æ•°å’Œå¯†æ–‡é•¿åº¦saltä¹Ÿå¯ä»¥éšæœº bcryptä¸native cryptoåº“é‡Œé¢çš„æ–¹æ³•çš„åŒºåˆ«ï¼šbcryptå› ä¸ºé‡‡ç”¨äº†Blowfish ç®—æ³•ï¼Œ which has a computationally expensive key setup phaseã€‚å¸¸ç”¨äºslow åŠ è§£å¯†ï¼Œæ¯”å¦‚é‚£äº›ä¸æƒ³è®©attackerè·å–çš„æ•°æ®ï¼Œæ¯”å¦‚ password,è€Œcryptoå¯ä»¥ç”¨äºä»»ä½•regularçš„æƒ…å†µï¼Œæ¯”å¦‚hmacä¹Ÿè¡Œã€‚ mongoå‘½ä»¤1db.users.update(&#123;username:&apos;some&apos;&#125;,&#123;$set:&#123;&quot;pass&quot;:&quot;barrymore&quot;&#125;&#125;) ç”¨æˆ·æ³¨å†Œæµç¨‹ é€»è¾‘ä¸Šï¼Œæ³¨å†Œå®Œæˆåï¼ˆå‡è®¾è¦é‚®ç®±éªŒè¯ï¼‰ï¼Œåˆ™hash(name,pass,secret),ç”Ÿæˆä¸€ä¸ªtokenç»™é‚®ä»¶çš„é“¾æ¥ 12 '&lt;a href = \"' + SITE_ROOT_URL + '/active_account?key=' + token + '&amp;name=' + name + '\"&gt;æ¿€æ´»é“¾æ¥&lt;/a&gt;' ç„¶åç”¨æˆ·è¯·æ±‚æ¿€æ´»è´¦æˆ·è¿™ä¸ªactionï¼Œåç«¯ç”¨aæ ‡ç­¾ä¸­çš„tokenä¸è‡ªå·±å­˜çš„tokenè¿›è¡Œæ¯”å¯¹ï¼Œçœ‹æ˜¯å¦æ˜¯ç”¨æˆ·å‘é€çš„è¯·æ±‚ï¼ˆcsrfæ”»å‡»çš„é˜²èŒƒï¼‰ å¦‚æœä¸éœ€è¦é‚®ç®±éªŒè¯ï¼Œåˆ™ç›´æ¥åç«¯è°ƒç”¨login çš„actionï¼ˆæŠŠåˆšåˆšå¾—åˆ°çš„passï¼Œä¸å­˜è¿›æ•°æ®åº“çš„hashçš„passä¼ ç»™verifyçš„å‡½æ•°ï¼‰ï¼ŒéªŒè¯æˆåŠŸã€‚ ç„¶åå†generateSessionID,(æ¯æ¬¡ç™»å½•è¿‡åéƒ½è¦é‡æ–°ç”Ÿæˆ)ï¼Œé‚£ä¹ˆä»ç™»å½•åˆ°ä¸‹ä¸€æ¬¡ç™»é™†ä¹‹å‰çš„è¯·æ±‚ï¼Œéƒ½ç”¨è¿™ä¸ªsessionIdæ¥éªŒè¯ res.cookieä¸­çš„{signed:true}åˆ°åº•åšäº†ä»€ä¹ˆæ“ä½œå› ä¸ºsignedæœ¬è´¨æ˜¯ç”¨hmacå¯¹data(plain cookie)åšäº†å¤„ç†ï¼Œä¹‹å‰æˆ‘ä»¬è®²ç­¾åçš„æ—¶å€™å°±æåˆ°è¿‡ï¼Œå¯¹dataå»hashä¸€éï¼Œè¿™ä¸ªhashå°±é‡‡ç”¨çš„hmacï¼Œå› æ­¤è¦ç”¨åˆ°é¢å¤–çš„key(secret)ï¼Œå°±æ˜¯ä¼ ç»™cookieParser(key)çš„å€¼ï¼Œï¼ˆæœ¬è´¨åšåŠ ç›é˜²å½©è™¹è¡¨ï¼‰ï¼Œç„¶åç”¨åº•å±‚çš„ç§é’¥å»åšäº†åŠ å¯†å¤„ç†ï¼Œæœ€ç»ˆè®¾ç½®åˆ°cookieé‡Œé¢ã€‚ æ¥¼ä¸»çœ‹äº†ä¸‹è¿™éƒ¨åˆ†çš„ä»£ç ï¼Œå…¶å®å¹¶æ²¡æœ‰åšæƒ³è±¡ä¸­çš„signedï¼Œï¼ˆè·Ÿä¸Šé¢çš„opensslé‡Œé¢çš„æ•°å­—ç­¾åè¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼‰ã€‚cookie-parseè°ƒç”¨äº†node-cookie-signatureä¸­çš„signå’Œunsignå‡½æ•° 12345678910exports.sign = function(val, secret)&#123; if ('string' != typeof val) throw new TypeError('cookie required'); if ('string' != typeof secret) throw new TypeError('secret required'); return val + '.' + crypto .createHmac('sha256', secret) .update(val) .digest('base64') .replace(/\\=+$/, ''); &#125;;//hmac(data,secret) =&gt; 'data.signedData' å®é™…ä¸Šåªåšäº†ä¸€æ¬¡hmacçš„åŠ å¯†ã€‚å½“æœåŠ¡ç«¯æ”¶åˆ°reqæ—¶ï¼Œå¯ä»¥ç”¨req.signedCookiesæ¥è®¿é—®è§£æåçš„cookie,æœ¬è´¨æ˜¯ç”¨cookie-parseræ¥è§£æä¼ è¿‡æ¥çš„signedcookie éœ€è¦æ³¨æ„çš„æ˜¯ç”¨cookie-parserä¸­é—´ä»¶çš„æ—¶å€™è¦ä¼ å…¥secret,å¦åˆ™ä¸ä¼šå¯ç”¨signedCookie 1234567891011121314151617181920212223242526function signedCookie (str, secret) &#123; //...çœç•¥éƒ¨åˆ†ä»£ç ï¼Œå…·ä½“è§é“¾æ¥ for (var i = 0; i &lt; secrets.length; i++) &#123; var val = signature.unsign(str.slice(2), secrets[i]) if (val !== false) &#123; return val &#125; &#125; return false &#125;//node-cookie-signature åŒ…exports.unsign = function(val, secret)&#123;//val: ç­¾åäº†çš„cookie(åœ¨expressè¿™è¾¹è¿”å›çš„å®é™…ä¸Šæ˜¯åˆ‘å¦‚ï¼š`$&#123;plainCookie&#125;.$&#123;sign(plainCookie,secret&#125;`çš„å€¼)ï¼‰ if ('string' != typeof val) throw new TypeError('cookie required'); if ('string' != typeof secret) throw new TypeError('secret required'); var str = val.slice(0, val.lastIndexOf('.')) , mac = exports.sign(str, secret); //ç”¨plainCookieï¼Œä¸secretå»å†æ¬¡hmacå¾—åˆ°çš„å€¼ï¼Œä¸æ”¶åˆ°çš„signedå»æ¯”å¯¹ï¼Œå› ä¸ºhmacä¸å¯é€†..æ‰€ä»¥éœ€è¦çŸ¥é“åŸå§‹çš„plainDataå»é‡å¤æ“ä½œéªŒè¯ // å› ä¸ºæ”¶åˆ°çš„æ˜¯plain.signed è¿™ä¸ªæ•´ä½“ã€‚ï¼ˆå› ä¸ºsecretæ˜¯serverç§æœ‰çš„ï¼ˆé‡ç‚¹ï¼ï¼Œattackeræ— æ³•çŸ¥æ™“ï¼‰ï¼‰ï¼Œæ‰€ä»¥å¦‚æœæ›´æ”¹äº†è¿™ä¸ª,å°±ä¼šå¯¼è‡´éªŒè¯å¤±è´¥ã€‚ // åŸå§‹ï¼š var a = hmac('123','secret') =&gt; '123.a'ï¼Œ å¦‚æœattackeræ›´æ”¹ä¸º'123.b' hmac(123,secret)ï¼== '123.b'ï¼ŒéªŒè¯å¤±è´¥ //ç–‘é—®å°±æ˜¯ï¼Œé‚£è¿™ä¸ªéƒ½ä»°ä»—secretçš„è¯ï¼Œä¸æ˜¯å¯ä»¥ç©·ä¸¾secretä¹ˆ...å› ä¸ºexpressè¿™è¾¹æ˜¾ç¤ºçš„æŠŠplainç»™å†™å‡ºæ¥äº†ï¼Œåº”è¯¥å¾ˆå®¹æ˜“ç©·ä¸¾å•Š. //æ™®é€šçš„hmacæ˜¯ä¸å¥½ç ´è§£çš„ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“å®ƒæœ¬èº«å°±æ˜¯é˜²èŒƒå½©è™¹è¡¨æ”»å‡»çš„ï¼Œä½†æ˜¯åœ¨expressè¿™è¾¹ï¼Œæ„Ÿè§‰æœ‰ç‚¹ä¸å®‰å…¨... return sha1(mac) == sha1(val) ? str : false; //å¦‚æœéªŒè¯æˆåŠŸçš„è¯è¿”å›str,å°±æ˜¯req.signedCookie&#125;; å°ç»“ï¼š ä¸ºä»€ä¹ˆè¦sessionï¼Œä¸ç”¨cookieï¼Ÿ ç­”ï¼š sessionå­˜æ”¾åœ¨æœåŠ¡ç«¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸ä¼šè¢«çªƒå–ã€‚ ä¸ºä»€ä¹ˆè¦session éšæœº &amp; æ¯æ¬¡ç™»é™†åéƒ½é‡æ–°ç”Ÿæˆ ç­”ï¼š éšæœºï¼Œä¸å®¹æ˜“è¢«çˆ†ç ´ï¼Œæ¯æ¬¡é‡æ–°ç”Ÿæˆæ˜¯é˜²æ­¢ä¸€æ¬¡çªƒå–åæ¯æ¬¡éƒ½å¯ä»¥ç”¨å®ƒç™»é™†ã€‚ sessionè·ŸsignedCookieæœ‰ä»€ä¹ˆå…³ç³» ç­”ï¼š æ²¡æœ‰= =ï¼Œä¸¤è€…ä¸å†²çªï¼ŒsignedCookieåªæ˜¯ç”¨æ¥é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹çš„ï¼Œsessionæ˜¯ç”¨æ¥éªŒè¯èº«ä»½çš„ï¼Œæœ‰å¯èƒ½èº«ä»½éªŒè¯æ­£ç¡®ä½†æ˜¯æ•°æ®è¢«ç¯¡æ”¹ï¼Œå› æ­¤cnodeä¸­åŒæ—¶è®¾ç½®äº†è¿™ä¸ªï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®httpOnlyç¼“è§£XSSæ”»å‡»ï¼ˆjsä¸èƒ½è®¿é—®å¸¦æœ‰è¯¥å±æ€§çš„cookieï¼‰ã€‚ï¼ˆå› ä¸ºcookieå…¶å®è¿˜æ˜¯ä¼šè¢«çªƒå–çš„ã€‚ï¼‰ signedCookieå…³é”®åœ¨äº é»˜è®¤ secretæ˜¯privateçš„ è¡¥å……ï¼š httpOnlyæ˜¯ä½¿å¾—jsä¸èƒ½è®¿é—®å¸¦æœ‰è¯¥å±æ€§çš„cookieï¼ŒåŒæºç­–ç•¥æ˜¯ä½¿å¾—ä¸èƒ½è·¨åŸŸè®¿é—® #####ã€ç¢ç¢å¿µã€‘ æ¥¼ä¸»è£…äº†editThisCookieçš„æ’ä»¶ï¼Œé‡Œé¢æœ‰è¿™ä¹ˆå‡ ä¸ªé€‰é¡¹ åˆ†åˆ«æ˜¯ï¼Œsecure:æ˜¯å¦å¯ç”¨https, session:æ˜¯å¦æ˜¯session-cookie(ä¸æœ‰expirationçš„å›ºå®šcookieç›¸å¯¹ï¼Œæ¯æ¬¡å…³é—­æµè§ˆå™¨åå°±ä¼šeraseæ‰ï¼Œè€Œpersistent cookieåˆ™æ˜¯é™¤éexpireæˆ–è€…æ‰‹åŠ¨eraseï¼Œå¦åˆ™ä¸ä¼šæ¸…é™¤ï¼Œä»–ä»¬éƒ½å¯ä»¥remember your action) There are two different types of cookies: Session cookies - these are temporary and are erased when you close your browser at the end of your surfing session. The next time you visit that particular site it will not recognise you and will treat you as a completely new visitor as there is nothing in your browser to let the site know that you have visited before (more on session cookies). Persistent cookies - these remain on your hard drive until you erase them or they expire. How long a cookie remains on your browser depends on how long the visited website has programmed the cookie to last (more on persistent cookies). å‰ç«¯æ‰€çŸ¥é“çš„â€ä¸€æ¬¡ç™»å½•åï¼ŒmaxAgeæ—¶é—´å†…å°±ä¸éœ€è¦éªŒè¯â€ï¼Œåˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ å®é™…ä¸Šæ˜¯ï¼Œç™»å½•åï¼Œserverç”Ÿæˆéšæœºçš„sessionIDä¿¡æ¯æ”¾åˆ°cookie/signedCookieé‡Œé¢ï¼Œï¼ˆå¹¶ï¼‰ç„¶åä¸‹æ¬¡reqçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æºå¸¦cookieä¿¡æ¯ï¼Œ é‚£ä¹ˆserverå¯¹cookieé‡Œé¢çš„sessionIDè¯»å–ï¼Œå¹¶æ ¹æ®è¿™ä¸ªsessionIDï¼Œå»æŸ¥ä¸userçš„æ˜ å°„å…³ç³»ï¼ˆå°±æ˜¯å­˜æ”¾sessionçš„åœ°æ–¹ï¼Œæ¯”å¦‚æ•°æ®åº“ï¼‰ï¼Œå¦‚æœæŸ¥æ‰¾æˆåŠŸï¼Œåˆ™è¯´æ˜å½“å‰ç”¨æˆ·éªŒè¯æˆåŠŸï¼Œ ç„¶ååœ¨maxAgeæ—¶é—´å†…éƒ½è¿›è¡Œè¿™ä¸ªæ“ä½œã€‚ æ‰€ä»¥è¯´ï¼Œä¸éœ€è¦éªŒè¯åªæ˜¯å¯¹å‰å°ä¸å¯è§ï¼Œå®é™…ä¸Šè¿˜æ˜¯è¦åšçš„ã€‚ ï¼ˆcnodeçš„åå°éƒ¨åˆ†ï¼Œå°±æ˜¯æŠŠæ¯ä¸€ä¸ªè¯·æ±‚çš„è¿™ä¸€éªŒè¯éƒ¨åˆ†æŠ½å–æˆäº†authUserçš„ä¸­é—´ä»¶ï¼Œå…ˆè¿›è¡Œè¿™ä¸€æ­¥æ“ä½œï¼Œå¹¶æŒ‚åœ¨äº†req.sessionä¸Šï¼Œç›®çš„æœ‰äºŒï¼š ä¸€æ˜¯ä¸è¦æ¯æ¬¡æ·±å±‚æ¬¡æŸ¥æ‰¾æ•°æ®ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¿«æ·æ–¹å¼ å¦ä¸€æ–¹é¢å…¶å®æ˜¯ç”¨äº†ç±»ä¼¼äºconnect-mongoçš„storeä¸­é—´ä»¶ï¼Œç”¨äºsessionIDä¸req.sessionçš„æ˜ å°„å…³ç³»çš„å­˜å–ï¼Œå†…éƒ¨å¯ä»¥è§¦å‘sessionå­˜åˆ°storeé‡Œé¢ï¼Œç›‘å¬maxAgeç­‰ç­‰ï¼Œç›¸å½“äºç”¨å¦å¤–ä¸€å¼ è¡¨æ¥å­˜å–æ˜ å°„å…³ç³»ï¼Œè€Œä¸æ˜¯ç›´æ¥æ”¾åœ¨userè¡¨é‡Œé¢ï¼‰ æ¥¼ä¸»åæ¥åˆçœ‹äº†ä¸‹sessionåº“ï¼Œå¤§è‡´åšäº†è¿™ä¹ˆäº›æ“ä½œï¼Œåˆšå¼€å§‹è¯·æ±‚çš„æ—¶å€™ï¼Œæ£€æŸ¥cookieä¿¡æ¯ï¼Œå»è®¾ç½®req.sessionID,å¦‚æœå‘ç°æ²¡æœ‰ï¼Œåˆ™generateä¸€ä¸ªsessionID,req.sessionå¯¹è±¡ï¼ˆSessionç±»å¯¹è±¡ï¼‰ï¼Œè¿›å…¥next()ï¼Œå³åç»­ çš„å…¶ä»–è·¯ç”±ã€ä¸­é—´ä»¶ç­‰ï¼Œæœ‰sessionçš„è¯returnã€‚ä½†æ˜¯åœ¨sessionå‡½æ•°é‡Œé¢å…¶å®è¿˜åšäº†ä¸¤ä»¶äº‹ä»¶ï¼š ä¸€ä¸ªæ˜¯onHeaderå‡½æ•°ï¼Œå³ï¼Œåœ¨è¦å‘æµè§ˆå™¨å‘é€æ•°æ®åŒ…çš„æ—¶å€™ï¼Œå»setCookie. 12//ç”¨ä¸Šé¢æåˆ°çš„node-cookie-signatureå»ç­¾åï¼Œï¼ˆhmac(sessionID,secret)ï¼‰ -&gt; setCookie(name,signedCookie) setcookie(res, name, req.sessionID, secrets[0], req.session.cookie.data); å¦ä¸€ä»¶æ˜¯åŒ…æŠ„res.endå‡½æ•°ï¼Œåœ¨é‡Œé¢å¤šåŠ äº†ä¸€ä¸ªsaveåˆ°storeçš„è¿‡ç¨‹ï¼Œå³ä»¥sessionIDä¸ºkeyï¼ŒæŠŠreq.sessionå¯¹è±¡å†™å…¥æ•°æ®åº“ä¸­ã€‚ ======æ›´æ–°=================== æ›´ç¡®åˆ‡çš„è¯´æ˜¯ï¼Œæ£€æµ‹shouldSave(req),ç„¶åå†çœ‹æ˜¯å¦è¦saveåˆ°storeä¸­ï¼Œshouldsaveä¸­åˆ¤æ–­äº†sessionIDä»¥åŠsessionå‰åçš„hashå€¼ï¼Œæœ‰å˜åŠ¨åˆ™save 1234// check if session has been modifiedfunction isModified(sess) &#123; return originalId !== sess.id || originalHash !== hash(sess);&#125; è€Œè¦åšåˆ°sessionä¸userçš„å…³è”ï¼Œæ˜¯è¦æ‰‹åŠ¨è§¦å‘çš„ï¼Œï¼ˆæ˜¯ä¸ä¼šå»ä¸»åŠ¨ç›‘å¬çš„â€¦ï¼‰å³å½“åˆ›å»ºä¸€ä¸ªreportæ—¶ï¼Œè¦è®¾ç½®user.reportCount++ï¼ˆsaveåˆ°æ•°æ®åº“ï¼‰æ—¶ï¼Œå¸Œæœ›req.session.useré‡Œé¢ä¹Ÿç›¸åº”çš„æ›´æ–°çš„è¯ï¼Œå°±è¦æ‰‹åŠ¨å»æ”¹å˜ã€‚ åœ¨ä¸Šé¢çš„shouldsaveé‡Œé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥ç›´æ¥æ“ä½œreq.session.user.replyCountï¼Œä¹Ÿå¯ä»¥å°†åˆšåˆšæ”¹å˜çš„userå¯¹è±¡é‡æ–°ä»˜ç»™req.sessionï¼Œå¼•ç”¨åŠæ•°æ®å˜åŒ–ï¼Œhashå‡ºæ¥çš„è‡ªç„¶ä¸ä¸€æ ·ã€‚å°±ä¼šåœ¨res.endä¸­å»æ›´æ–°sessionäº†ã€‚ ======æ›´æ–°=================== ä»¥åæ¯æ¬¡è¯·æ±‚éƒ½ç›´æ¥è¯»å–req.sessionå³å¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç®€åŒ–äº†æ¯æ¬¡ä»req.cookieé‡Œé¢è§£æsessionID,ç„¶åæŸ¥æ‰¾ä¹‹å‰å»ºç«‹çš„sessionid-&gt;userçš„æ˜ å°„è¡¨ï¼Œä»¥åŠåç»­çš„è¶…æ—¶è‡ªåŠ¨æ¸…é™¤æ•°æ®è¡¨ç­‰ç­‰å…¶ä»–æ”¶å°¾å·¥ä½œã€‚ç»´æŒä¸€ä¸ªâ€å…¨å±€â€å¯¹è±¡ï¼ˆreq.sessionï¼‰åœ¨ä¸€ä¸ªç™»å½•æœ‰æ•ˆæœŸï¼ˆå¤šreqï¼‰å†…æŒä¹…å­˜åœ¨çš„ç›®çš„ã€‚ è€Œç”¨äº†sessionçš„ä¸­é—´ä»¶ï¼Œä½ æ‰€éœ€è¦åšçš„å°±æ˜¯å‘Šè¯‰å®ƒnameï¼Œsecret(ç”¨äºç­¾å,required)ï¼Œå³å¯ï¼ˆä¸å‘Šè¯‰genidçš„å‡½æ•°éƒ½å¯ä»¥ï¼Œå†…éƒ¨å®ƒç”¨uidå»åˆ›å»ºçš„ï¼‰ï¼Œç„¶åæŠŠè¦æ”¾åˆ°cookieé‡Œé¢çš„ä¸œè¥¿æŒ‚åœ¨req.sessionå¯¹è±¡ä¸Šâ€¦å¥æ˜¯è¿™ä¹ˆç®€å•â€¦ è¡¥å……çŸ¥è¯† session.saveçš„optionsè¯´æ˜ sessionresave : æ˜¯æŒ‡æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°è®¾ç½®session cookieï¼Œå‡è®¾ä½ çš„cookieæ˜¯10åˆ†é’Ÿè¿‡æœŸï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå†è®¾ç½®10åˆ†é’Ÿ Uninitialized: æ˜¯æŒ‡æ— è®ºæœ‰æ²¡æœ‰session cookieï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è‡ªåŠ¨è®¾ç½®ä¸ªsession cookie ï¼Œé»˜è®¤ç»™ä¸ªæ ‡ç¤ºä¸º connect.sidã€‚ä¸€èˆ¬å»ºè®®ç”¨falseï¼Œä½¿å¾—æœ‰æƒé™æ‰å¯ä»¥setcookieï¼ŒåŒæ—¶ä¹Ÿå‡è½»serverçš„å‹åŠ›ã€‚ secure: åº”ç”¨åœ¨https reference Node.jsåŠ å¯†ç®—æ³•åº“Crypto NodeJS: bcrypt vs native crypto What are â€œsignedâ€ cookies in connect/expressjs? all about cookie","categories":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"http://yoursite.com/categories/å¼€å‘/"}],"tags":[{"name":"express crypto session","slug":"express-crypto-session","permalink":"http://yoursite.com/tags/express-crypto-session/"}]},{"title":"æ—©è¯»è¯¾","slug":"æ—©è¯»è¯¾","date":"2017-02-28T05:12:14.000Z","updated":"2017-02-28T08:11:42.000Z","comments":true,"path":"2017/02/28/æ—©è¯»è¯¾/","link":"","permalink":"http://yoursite.com/2017/02/28/æ—©è¯»è¯¾/","excerpt":"","text":"event-loopjavascriptï¼š åŒæ­¥ä»»åŠ¡ï¼ˆä¸»çº¿ç¨‹ï¼‰ï¼šå­˜æ”¾äºæ‰§è¡Œæ ˆ å¼‚æ­¥ä»»åŠ¡ï¼šä»»åŠ¡é˜Ÿåˆ—ä¸­(æ›´ç¡®åˆ‡çš„è¯´æ˜¯å›è°ƒé˜Ÿåˆ—ï¼Œqueue,å…ˆè¿›å…ˆå‡ºï¼Œä½†æ˜¯æœ‰settimeoutçš„ç‰¹ä¾‹) ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œä¼šäº§ç”Ÿå †ã€æ ˆï¼Œä¹ŸåŒæ—¶ä¼šè°ƒç”¨å¤–éƒ¨çš„apiï¼Œä¼šä¸æ–­å¾€ä»»åŠ¡é˜Ÿåˆ—ä¸­åŠ å…¥äº‹ä»¶ï¼ˆclick,mouseoverâ€¦ï¼‰ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸­ä»»åŠ¡ç»“æŸï¼Œå°±è¯»å–ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœå‘ç°ä»»åŠ¡é˜Ÿåˆ—ä¸­æŸä¸ªå¼‚æ­¥äº‹ä»¶æœ‰ç»“æœäº†ï¼ˆè¿›å…¥å›è°ƒäº†ï¼‰ï¼Œå°±æ‹–åˆ°ä¸»çº¿ç¨‹çš„æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚ event-loopæ˜¯æŒ‡ï¼šç¨‹åºä»ä¸»çº¿ç¨‹æ‰§è¡Œ-&gt;è°ƒç”¨å¤–éƒ¨apiï¼Œåœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­æ”¾ç½®äº‹ä»¶-&gt;ç»§ç»­æ‰§è¡Œä¸»çº¿ç¨‹-&gt;ä¸»çº¿ç¨‹æ¸…ç©º/å¼‚æ­¥ä»»åŠ¡è¿›å…¥å›è°ƒï¼Œæ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ï¼ˆæ›´æ–°ï¼Œæ›´ç¡®åˆ‡çš„è¯´æ˜¯ï¼Œå°†task queueé‡Œé¢çš„å‡½æ•°æå‡åˆ°stackä¸­å»æ‰§è¡Œçš„è¿™ä¸ªäº‹ä»¶ä¸€ä¸ªä¸€ä¸ªå¾ªç¯çš„æ­¥éª¤ï¼‰ ======æ›´æ–°ä¹‹å‰çœ‹é˜®å¤§å¤§çš„åšå®¢ï¼Œåæ¥è¢«æ¨èçœ‹jsConfä¸Šçš„ä¸ªè§†é¢‘è®²è§£çš„å¾ˆæ¸…æ¥šï¼Œè¿™è¾¹æ€»ç»“æ¥è¯´æ˜¯ï¼šsetTimeout(fn,delay): webapiså°†äº‹ä»¶éš”delayæ—¶é—´åæ’å…¥task queueï¼Œå³ä½¿å°†delayè®¾ä¸º0ï¼Œä¹Ÿåªæ˜¯è¡¨ç¤ºç«‹åˆ»å°†fnæ’å…¥task queueï¼ˆå°¾éƒ¨ï¼‰ï¼Œä½†æ˜¯ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œæ—¶é—´ä¸å®šï¼Œè¦ç­‰å½“å‰ä»£ç æ‰§è¡Œå®Œï¼ˆæ‰§è¡Œæ ˆæ¸…ç©ºï¼‰ä»¥åï¼Œå³eventloopéœ€è¦ç­‰åˆ°stackæ¸…ç©ºä»¥åå†push task(callback)queueä¸­çš„fnåˆ°stackä¸­å»æ‰§è¡Œ å¯¹äºajaxè¿™äº›ï¼Œæ˜¯ç­‰æ•°æ®è¿”å›åï¼Œå†æŠŠå›è°ƒæ”¾å…¥queueä¸­ã€‚ render queueè·Ÿcallback queueä¸€æ ·ï¼Œåªä¸è¿‡æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œå½“stackæ¸…ç©ºå®Œä»¥åï¼Œä¼šé¦–å…ˆæ‰§è¡Œå®ƒï¼Œå› æ­¤å¦‚æœæ˜¯åŒæ­¥æ“ä½œçš„è¯ï¼Œä¼šä¸€ç›´é˜»å¡ï¼Œè®©stackä¸€ç›´æ‰§è¡Œï¼Œrender queueæ— æ³•è¢«callåˆ°ï¼Œå› æ­¤æ¨èå¼‚æ­¥ï¼Œå¯ä»¥åœ¨æ‰§è¡Œé—´éš™ï¼Œæ¯éš”16msï¼ˆå°±ä¼šå»è®¿é—®ä¸‹render queueï¼ŒæŠŠå®ƒæä¸Šæ¥ï¼ˆå‰ææ˜¯stackæ¸…ç©ºï¼‰ï¼‰ã€‚ =======æ›´æ–° end Nodejsä¸­çš„event-loopæ·»åŠ äº†ä¸¤ä¸ªå‡½æ•°process.nextTickå’ŒsetImmediate process.nextTick: å§‹ç»ˆåœ¨å½“å‰æ‰§è¡Œæ ˆçš„å°¾éƒ¨æ·»åŠ ï¼ˆå¦‚æœæœ‰å¤šä¸ªprocess.nextTickè¯­å¥ï¼Œä¸ç®¡å®ƒä»¬æ˜¯å¦åµŒå¥—ï¼Œå°†å…¨éƒ¨åœ¨å½“å‰â€æ‰§è¡Œæ ˆâ€æ‰§è¡Œã€‚ï¼‰ setImmediateï¼šå§‹ç»ˆåœ¨å½“å‰â€ä»»åŠ¡é˜Ÿåˆ—â€çš„å°¾éƒ¨æ·»åŠ äº‹ä»¶ï¼Œå¦‚æœåµŒå¥—ï¼Œåˆ™ä¸‹ä¸€è½®ï¼Œå†ä¸‹ä¸€è½®.. setTimeout: æŒ‡å®šæ—¶é—´çš„è¯ï¼Œæ˜¯ä»å½“å‰æ‰§è¡Œå¼€å§‹è®¡æ—¶ï¼Œåˆ°æ—¶é—´å°±æ’å…¥åˆ°task queueä¸­ï¼Œåœ¨ä»»åŠ¡é˜Ÿåˆ—çš„å°¾éƒ¨æ·»åŠ ã€‚ å…³äºsetTimeoutä¸setImmediateçš„æ‰§è¡Œé¡ºåºä¸å®šï¼šï¼ˆå®˜æ–¹æ–‡æ¡£ä¸­è¯´æ˜¯åœ¨éI/O contextä¸‹ï¼Œä¸¤è€…æ‰§è¡Œé¡ºåºä¸å®šï¼Œç”±è¿›ç¨‹çš„æ€§èƒ½å†³å®šï¼Œä½†æ˜¯åœ¨I/oç¯å¢ƒä¸­ï¼Œæ¯”å¦‚fsçš„å›è°ƒä¸­ï¼ŒsetImmediteå§‹ç»ˆåœ¨setTimeoutä¹‹å‰å†³å®šï¼‰ä½†æ˜¯ï¼š Node.jsæ–‡æ¡£ä¸­ç§°ï¼ŒsetImmediateæŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œæ€»æ˜¯æ’åœ¨setTimeoutå‰é¢ã€‚å®é™…ä¸Šï¼Œè¿™ç§æƒ…å†µåªå‘ç”Ÿåœ¨é€’å½’è°ƒç”¨çš„æ—¶å€™ã€‚ 12345678910111213141516//åœ¨Immediateä¸­æœ‰ä¸¤ä¸ªå‡½æ•°Imå’ŒsetTimeout, imçš„å›è°ƒAå§‹ç»ˆåœ¨timeoutä¹‹å‰ï¼Œ//åœ¨å½“å‰æ‰§è¡Œé˜Ÿåˆ—çš„æœ€åï¼Œè€ŒBåˆ™æ˜¯åœ¨ä¸‹ä¸€è½®event-loopï¼Œæ‰§è¡Œé˜Ÿåˆ—å°¾éƒ¨setImmediate(function ()&#123; setImmediate(function A() &#123; console.log(1); setImmediate(function B()&#123;console.log(2);&#125;); &#125;); setTimeout(function timeout() &#123; console.log(&apos;TIMEOUT FIRED&apos;); &#125;, 0);&#125;);// 1// TIMEOUT FIRED// 2 ç»“è®ºï¼š &gt;æˆ‘ä»¬ç”±æ­¤å¾—åˆ°äº†process.nextTickå’ŒsetImmediateçš„ä¸€ä¸ªé‡è¦åŒºåˆ«ï¼š å¤šä¸ªprocess.nextTickè¯­å¥æ€»æ˜¯åœ¨å½“å‰&quot;æ‰§è¡Œæ ˆ&quot;ä¸€æ¬¡æ‰§è¡Œå®Œï¼Œ å¤šä¸ªsetImmediateå¯èƒ½åˆ™éœ€è¦å¤šæ¬¡loopæ‰èƒ½æ‰§è¡Œå®Œã€‚ å› æ­¤ï¼Œå½“é€’å½’è°ƒç”¨process.nextTickçš„è¯ï¼Œä¼šè¢«âš ï¸è¦æ±‚ç”¨immediateæ›¿ä»£ï¼Œå› ä¸ºè¿™æ ·ä¼šä¸€ç›´åœ¨æ‰§è¡Œæ ˆä¸­ï¼Œä¸ä¼šå»æ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—ã€‚ è¡¥å……çŸ¥è¯†æ¥¼ä¸»çœ‹äº†ä¸‹nodeé‡Œé¢ä»‹ç»ï¼Œå…³äºprocess.nextTickï¼Œå› ä¸ºä¸Šé¢è¯´å®ƒæœ‰ä¸€å †é—®é¢˜ï¼ˆä»€ä¹ˆé€’å½’è°ƒç”¨ä¼šå¯¼è‡´çº¿ç¨‹é˜»å¡å•Šblahblahï¼Œé‚£å¹²å˜›è¿˜è¦æœ‰è¿™ä¸ªapiï¼‰ã€‚ä¸»è¦çš„åŸå› æ˜¯ï¼Œæ¯”å¦‚åœ¨è¿›å…¥event-loopä¹‹å‰å»åšä¸€äº›å…¶ä»–æ“ä½œï¼ˆæœ‰ç‚¹ç‚¹åƒfinallyï¼‰ï¼Œæ¯”å¦‚throw errorä»¥åï¼Œ 12345function apiCall (arg, callback) &#123; if (typeof arg !== &apos;string&apos;) return process.nextTick(callback, new TypeError(&apos;argument should be string&apos;));&#125; è¦æ‰§è¡Œerrorå›è°ƒä¹‹å‰ï¼ˆevent-loopï¼‰æƒ³æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œæ¯”å¦‚ä¸€äº›unneededèµ„æºçš„å›æ”¶ï¼Œæˆ–è€…è¯·æ±‚é‡ä¼ ç­‰ç­‰ã€‚è¿˜æœ‰çš„æƒ…å†µæ˜¯è¯¸å¦‚ä¿è¯å˜é‡/å‡½æ•°å®šä¹‰ã€æ‰§è¡Œçš„å…ˆåé¡ºåºï¼Œçœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­: 1234567891011121314151617const EventEmitter = require(&apos;events&apos;);const util = require(&apos;util&apos;);function MyEmitter() &#123; EventEmitter.call(this); this.emit(&apos;event&apos;); //1 //2 //process.nextTick(function () &#123; // this.emit(&apos;event&apos;); //&#125;.bind(this));&#125;util.inherits(MyEmitter, EventEmitter);const myEmitter = new MyEmitter();myEmitter.on(&apos;event&apos;, function() &#123; console.log(&apos;an event occurred!&apos;);//3&#125;); ç”¨newæ‰§è¡Œå®ŒMyEmitteræ„é€ å‡½æ•°åï¼ŒæŒ‰ç†è¯´è¦emit,ä½†æ˜¯è¿™ä¸ªæ—¶å€™å…¶å®å¹¶æ²¡æœ‰æ‰§è¡Œåˆ°ä¸‹é¢ï¼ˆä¸‹é¢çš„onäº‹ä»¶çš„æ³¨å†Œä¹Ÿåœ¨æ‰§è¡Œæ ˆä¸­ï¼Œä¸è¿‡è¿˜æ²¡è°ƒç”¨åˆ°ï¼‰ï¼Œå› æ­¤emitè¦è§¦å‘æ—¶è¿˜æœªå®šä¹‰ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåº”è¯¥å°†1å¤„æ›´æ”¹ä¸º2ï¼Œé‚£ä¹ˆï¼Œemitçš„è§¦å‘ä¼šå…ˆæš‚ç¼“ï¼Œä¸‹é¢ç»§ç»­æ‰§è¡Œï¼Œeventè¢«æ³¨å†Œï¼Œ3å¤„çš„å›è°ƒè¢«æ”¾å…¥callback queueï¼Œç„¶åè¿™ä¸€æ­¥æ‰§è¡Œå®Œåï¼ˆä¹Ÿå°±æ˜¯å½“å‰æ ˆä¸­çš„æ‰€æœ‰éƒ½å·²ç»æ‰§è¡Œå®Œï¼Œåªå‰©ä¸‹åˆšåˆšnextTickä¸­çš„emitï¼‰,æ­¤æ—¶ï¼Œäº‹ä»¶å·²æ³¨å†Œï¼Œå› æ­¤è§¦å‘ï¼Œæ ˆæ¸…ç©ºï¼Œevent-loopå¼€å§‹ï¼Œå›è°ƒè¢«æŒªå…¥stackä¸­æ‰§è¡Œã€‚ è¯¾åå°æµ‹è¯•123456789101112131415161718(function () &#123; console.log(&apos;this is the start&apos;); setTimeout(function cb() &#123; console.log(&apos;this is a msg from call back&apos;); &#125;); console.log(&apos;this is just a message&apos;); setTimeout(function cb1() &#123; console.log(&apos;this is a msg from call back1&apos;); &#125;, 0); console.log(&apos;this is the end&apos;);&#125;)();// ç­”æ¡ˆï¼š","categories":[{"name":"æ—¥å¸¸é˜…è¯»ç¬”è®°","slug":"æ—¥å¸¸é˜…è¯»ç¬”è®°","permalink":"http://yoursite.com/categories/æ—¥å¸¸é˜…è¯»ç¬”è®°/"}],"tags":[{"name":"event-loop setTimeout","slug":"event-loop-setTimeout","permalink":"http://yoursite.com/tags/event-loop-setTimeout/"}]},{"title":"ä¹±ç‚¹æŠ€èƒ½æ ‘ç³»åˆ—","slug":"ä¹±ç‚¹æŠ€èƒ½æ ‘ç³»åˆ—","date":"2017-02-01T05:47:51.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2017/02/01/ä¹±ç‚¹æŠ€èƒ½æ ‘ç³»åˆ—/","link":"","permalink":"http://yoursite.com/2017/02/01/ä¹±ç‚¹æŠ€èƒ½æ ‘ç³»åˆ—/","excerpt":"","text":"1. å“åº”å¼å›¾ç‰‡ htmlä¸­é€‰æ‹©ï¼š srcset+ dpr 1234&lt;img srcset=&quot; examples/images/image-384.jpg 1x, examples/images/image-768.jpg 2x&quot; alt=&quot;â€¦&quot;&gt; css media query+ dpr 12345678910.img &#123; background-image: url(examples/images/image-384.jpg); &#125;@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) &#123; .img &#123; background-image: url(examples/images/image-768.jpg); &#125;&#125; è¿™ç§æ–¹æ³•è¿˜å¯ä»¥è¿™ä¹ˆå†™ã€‚ 12345 &lt;picture&gt; &lt;source srcset=&quot;extralarge.jpg&quot; media=&quot;(min-width: 1000px)&quot;&gt; &lt;source srcset=&quot;large.jpg&quot; media=&quot;(min-width: 800px)&quot;&gt; &lt;img srcset=&quot;medium.jpg&quot; alt=&quot;â€¦&quot;&gt;&lt;/picture&gt; sizes in css + srcset 12345&lt;imgsizes=&quot;(min-width: 400px) 80vw, 100vw&quot;srcset=&quot;examples/images/small.jpg 375w, examples/images/big.jpg 1500w&quot;alt=&quot;â€¦&quot;&gt; æµè§ˆå™¨é€šè¿‡è®¡ç®—ä¸åŒå¤§å°çš„å›¾ç‰‡çš„ size/(è§†å›¾å°ºå¯¸dpr) ï¼Œé€‰æ‹©æœ€æ¥è¿‘1çš„ã€‚æ¯”å¦‚ä¸Šé¢å°±æ˜¯ 375/(3202ï¼‰ 1500/(320*2)ã€‚å‡è®¾åƒç´ æ¯”ä¸º2. 2. CSSå˜é‡å’Œé¢„å¤„ç†å˜é‡æœ‰ä»€ä¹ˆä¸åŒcsså˜é‡å¯ä»¥è·Ÿé¢„å¤„ç†å˜é‡è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚åŒæ—¶åœ¨jsä¸­è¿˜å¯ä»¥è®¿é—®åˆ°è¿™äº›å˜é‡ï¼ˆå±æ€§ï¼‰ã€‚é‚£ä¹ˆå°±å¯ä»¥è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼š é€šè¿‡jsæ”¹å˜è¿™äº›å˜é‡æ¥ç»Ÿä¸€å˜æ›´æ ·å¼ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥å®ç°å“åº”å¼æ …æ ¼è¿™ç§ï¼Œå—¯ï¼Œæ¥¼ä¸»è¿˜æƒ³åˆ°äº†ä¸€é”®æ¢è‚¤=ã€‚=ã€‚ 3. underscoreå­¦ä¹ curryåŒ–å°†å¾ˆå¤šå‚æ•°è½¬ä¸ºè¿é”çš„å‡½æ•°è°ƒç”¨ 12345var property = function(key) &#123; return function(obj) &#123; return obj == null ? void 0 : obj[key]; &#125;; &#125;; void 0ä»£æ›¿undefinedåŸå›  undefinedåœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸­å¯ä»¥è¢«é‡å†™ï¼Œåœ¨å±€éƒ¨ä½œç”¨åŸŸå†…ä¹Ÿå¯ä»¥è¢«é‡å†™ï¼ˆåŒ…æ‹¬chromeï¼‰ã€‚ é‚£ä¹ˆè¯¥ç”¨ä»€ä¹ˆæ¥ä»£æ›¿undefinedï¼š void+è¡¨è¾¾å¼ 1void (3+4) //undefined é™¤æ­¤ä¹‹å¤–ï¼Œvoid 0è¦æ¯”undefinedç©ºé—´å°ï¼Œçœä¸‹ä¸å°‘å­—èŠ‚ã€‚","categories":[{"name":"æ‚","slug":"æ‚","permalink":"http://yoursite.com/categories/æ‚/"}],"tags":[{"name":"ä¹±ç‚¹æŠ€èƒ½æ ‘","slug":"ä¹±ç‚¹æŠ€èƒ½æ ‘","permalink":"http://yoursite.com/tags/ä¹±ç‚¹æŠ€èƒ½æ ‘/"},{"name":"CSS","slug":"CSS","permalink":"http://yoursite.com/tags/CSS/"},{"name":"æ¯æ—¥é˜…è¯»æ¸…å•","slug":"æ¯æ—¥é˜…è¯»æ¸…å•","permalink":"http://yoursite.com/tags/æ¯æ—¥é˜…è¯»æ¸…å•/"}]},{"title":"utilç¬”è®°","slug":"utilç¬”è®°","date":"2017-02-01T05:42:47.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2017/02/01/utilç¬”è®°/","link":"","permalink":"http://yoursite.com/2017/02/01/utilç¬”è®°/","excerpt":"","text":"1. arr swap123456Array.prototype.swap = function(lIndex,rIndex)&#123; var temp = this[rIndex]; this[rIndex] = this[lIndex]; this[lIndex] = temp; return this;&#125; æˆ–è€…ç”¨call 12345678swap.call(nums,baseIndex,targetIndex);function swap(i,j)&#123; var temp; temp = this[j]; this[j] = this[i]; this[i] = temp; return this;&#125; 2. bubbleSort12345678910111213141516function bubbleSort()&#123; var swap = false; var arr = this.queue, lastIndexOfNotSortedArr = arr.length-1; do&#123; swap = false; for(var i=1;i&lt;=lastIndexOfNotSortedArr;i++)&#123; if(arr[i-1]&gt;arr[i]) &#123; arr.swap(i-1,i); swap = true; &#125; &#125; lastIndexOfNotSortedArr -=1; &#125;while(swap) &#125; 3. removeDuplicateç”¨hash 1234567function removeDuplicate()&#123; var hashDict = &#123;&#125;; this.queue.forEach(function(data)&#123; hashDict[data] = true; &#125;); return Object.keys(hashDict); &#125;, 4. æ—¥æœŸæ ¼å¼åŒ–1234567891011121314function format(time,fmt)&#123; let dateObj = new Date(parseInt(time)); var o = &#123; &quot;M+&quot;: dateObj.getMonth() + 1, //æœˆä»½ &quot;d+&quot;: dateObj.getDate(), //æ—¥ &quot;h+&quot;: dateObj.getHours(), //å°æ—¶ &quot;m+&quot;: dateObj.getMinutes(), //åˆ† &quot;s+&quot;: dateObj.getSeconds(), //ç§’ &#125;; if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (dateObj.getFullYear() + &quot;&quot;).substr(4 - RegExp.$1.length)); for (let k in o) if (new RegExp(&quot;(&quot; + k + &quot;)&quot;).test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((&quot;00&quot; + o[k]).substr((&quot;&quot; + o[k]).length))); return fmt;&#125; 5. push dynamic arr to arræ¥¼ä¸»æœ€è¿‘åœ¨åˆ·leetcodeï¼Œé€’å½’ä¸­ä¼šæœ‰ä¸æ–­pushæ•°ç»„åˆ°resultæ•°ç»„ä¸­çš„é—®é¢˜ã€‚ä½†æ˜¯ç¢äºjsçš„å¼•ç”¨ä¼ å€¼â€¦ç»“æœç»å¸¸å°±æ˜¯ä¸€æºœçš„åŒæ ·çš„æ•°ç»„ã€‚å¾®ç¬‘è„¸.jpgéœ€è¦å¤åˆ¶ã€‚ã€‚ 123var a = [].concat(arr);es6å°±ç›´æ¥è¿™æ ·å¥½äº†ï¼šb = [...arr]; 6. find target in a sorted arrayå¦‚æœæœ‰åˆ™è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›çš„æ˜¯å®ƒå¦‚æœè¦æ’å…¥çš„è¯åº”è¯¥åœ¨çš„ä½ç½®ã€‚leetcode äºŒåˆ†æŸ¥æ‰¾ç›¸å…³é¢˜ç›®åº”ç”¨ã€‚123456789101112function searchIndex(target1)&#123; var i = 0, j = nums.length; //attentionï¼ while (i &lt; j) &#123; var mid = Math.floor((i + j) / 2); if (nums[mid] &lt; target1) i = mid + 1; //iæ˜¯æœ€å·¦è¾¹çš„===targetçš„å…ƒç´  else j = mid; &#125; return i;&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼š jçš„åˆå§‹å€¼åº”è¯¥æ˜¯nums.lengthè€Œä¸æ˜¯nums.length-1 å…¶æ¬¡ã€‚å¾ªç¯ç»ˆæ­¢æ¡ä»¶ä¸èƒ½æ˜¯ while(i&lt;=j) å› ä¸ºç»ˆæ­¢æ¡ä»¶ä¸­i = midã€‚è€Œå¾ªç¯ä¸­æœ‰j = midã€‚å¦‚æœwhile(i&lt;=j)çš„è¯ï¼Œå°±ä¼šå¯¼è‡´æ­»å¾ªç¯ã€‚ 7. æ•°ç»„åº”ç”¨12345678910111213141516171819function newObj()&#123; var Constructor = [].shift.call(arguments); var that = Object.create(Constructor.prototype); Constructor.apply(that,arguments); return that;&#125;var People = function(name,age)&#123; this.name = name; this.age = age;&#125;People.prototype = &#123; getName: function()&#123; return this.name &#125;, getAge: function()&#123; return this.age; &#125;&#125;var luchen = newObj(People,&quot;luchen&quot;,&quot;23&quot;); åˆ’é‡ç‚¹ï¼šå…¶å®è·Ÿæˆ‘ä»¬å¹³æ—¶ç”¨æ„é€ å‡½æ•°å·®ä¸å¤šã€‚è§‰å¾—æ¯”è¾ƒå¥½çš„æ˜¯newObjé‡Œé¢çš„å®ç°ã€‚-è¡¥å……ä¸‹ï¼š 123456// ç±»ä¼¼äºarraylikeObj.slice()var arr = Array.prototype.slice.call(arraylikeObj); //arguments.shift()ç¬¬ä¸€ä¸ªå‡ºé˜Ÿåˆ—var argument1 = [].shift.call(arguments)var leftArguments = arguments 8. é—­åŒ…å®ç°å•ä¾‹åˆ©ç”¨çš„å°±æ˜¯é—­åŒ…å¯ä»¥ä¸€ç›´è®¿é—®å¤–éƒ¨å˜é‡ï¼Œè€Œå¤–éƒ¨å˜é‡ä¹Ÿå› ä¸ºé—­åŒ…çš„å¼•ç”¨æŒä¹…çš„å­˜åœ¨äºå†…å­˜ä¸­ã€‚ 1234567const singleton = (function()&#123; let param; return function(initialValue)&#123; return param || (param = initialValue); &#125;;&#125;)();singleton(&#123;someKey:value&#125;) === singleton(&#123;someKey:value&#125;) è¿˜æœ‰ä¸€ç§æ›´å½»åº•çš„é«˜é˜¶å‡½æ•°çš„æ–¹å¼ï¼š é«˜é˜¶å‡½æ•°æ˜¯è‡³å°‘æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„å‡½æ•°ï¼šå‚æ•°ä¸ºå‡½æ•°è¿”å›å€¼ä¸ºå‡½æ•° 12345678910var getSingle = function(fn)&#123; var ret; return function()&#123; return ret || ret = fn.apply.call(arguments); &#125;&#125;var getScript = getSingle(function()&#123; return document.createElement(&apos;script&apos;);&#125;)getScript() === getScript()","categories":[{"name":"util","slug":"util","permalink":"http://yoursite.com/categories/util/"}],"tags":[{"name":"util","slug":"util","permalink":"http://yoursite.com/tags/util/"},{"name":"å•ä¾‹","slug":"å•ä¾‹","permalink":"http://yoursite.com/tags/å•ä¾‹/"},{"name":"é—­åŒ…","slug":"é—­åŒ…","permalink":"http://yoursite.com/tags/é—­åŒ…/"}]},{"title":"Vueå®è·µâ€”â€”Vuex","slug":"Vueå®è·µâ€”â€”Vuex","date":"2017-02-01T05:34:10.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2017/02/01/Vueå®è·µâ€”â€”Vuex/","link":"","permalink":"http://yoursite.com/2017/02/01/Vueå®è·µâ€”â€”Vuex/","excerpt":"","text":"åŸºæœ¬çŸ¥è¯†stateVuexæä¾›äº†æœºåˆ¶ï¼Œä½¿å¾—è®¾ç½® storeé€‰é¡¹ï¼ˆå¯ç”¨Vue.use(Vuex)ï¼‰ä¼šå°† store ä»æ ¹ç»„ä»¶ã€æ³¨å…¥ã€åˆ°æ¯ä¸€ä¸ªå­ç»„ä»¶ä¸­ã€‚ 1234567891011const app = new Vue(&#123; el: &apos;#app&apos;, // ä½¿ç”¨ &quot;store&quot; é€‰é¡¹åï¼Œå¯ä»¥æ³¨å†Œ store å¯¹è±¡ã€‚å°†ä¼šæŠŠ store å®ä¾‹æ³¨å…¥åˆ°æ‰€æœ‰å­ç»„ä»¶ã€‚ store, components: &#123; Counter &#125;, template: ` &lt;div class=&quot;app&quot;&gt; &lt;counter&gt;&lt;/counter&gt; &lt;/div&gt; `&#125;) å­ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡this.$store.state.somepropè®¿é—®mapState: 12345678910111213computed: mapState(&#123; count: state =&gt; state.count, countAlias: &apos;count&apos;, &apos;count&apos;, countPlusLocalState (state) &#123; return state.count + this.localCount &#125; &#125;) æˆ–è€…ç”¨å¯¹è±¡æ‰©å±•æ–¹æ³•å°†mapStateä½œä¸ºcomputedçš„éƒ¨åˆ† computed:&#123; test1()&#123;..&#125;, ...mapState(&#123;&#125;) &#125; gettersç±»ä¼¼äºstoreçš„è®¡ç®—å±æ€§å‡½æ•°,æ¥å—stateä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•° 1234567const store = new Vuex.Store(&#123; state: &#123; &#125;, getters: &#123; doneTodos: state =&gt; ... &#125;&#125;) ç»„ä»¶ä¸­ç”¨this.$store.getters.blahè®¿é—® Mutations éµå¾ªå“åº”å¼è§„åˆ™ï¼Œå³é¢„å…ˆåˆå§‹åŒ–ï¼Œéœ€è¦å¢åŠ å±æ€§æ—¶ï¼Œç”¨setæˆ–è€…æ–°å¯¹è±¡æ¥æ›¿æ¢æ—§å¯¹è±¡ã€‚ å¸¸é‡å‘½åMutationï¼Œç»Ÿä¸€ç®¡ç† åŒæ­¥å‡½æ•° æ¯ä¸ªmutationéƒ½æœ‰ä¸€ä¸ªtypeå’Œä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°çš„å‚æ•°ä¸ºstateï¼Œä¹Ÿæ¥å—payload actions ä¸æ”¹å˜state,åªcommitï¼Œç±»ä¼¼äºemitä¸€ä¸ªäº‹ä»¶ã€‚ å¯ä»¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œå¼¥è¡¥mutationåªèƒ½æ˜¯åŒæ­¥å‡½æ•°çš„é—®é¢˜ã€‚ å¤„ç†å‚æ•°æ¥å—contextä¸ºå‚æ•°ã€‚contextåŒ…æ‹¬ä¸storeå®ä¾‹ç›¸åŒçš„æ–¹æ³•å’Œå±æ€§ã€‚å¯ä»¥ç”¨es6å‚æ•°è§£æ„æ¥è·å¾—é‡Œé¢çš„commitç­‰ æ›´æ–°1,vuexé‡æ„äº†todo,è§github æ›´æ–°2 éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•´ä¸ªæ“ä½œä¸­åªé€šè¿‡åœ¨storeé‡Œé¢æäº¤mutationsæ¥å®ç°æ•°æ®çš„æ›´æ”¹ï¼Œï¼ˆä¾¿äºç”¨dev-ç»Ÿä¸€toolå»ç»Ÿä¸€è·Ÿè¸ªï¼‰ã€‚ æ€»çš„æ¥è¯´ï¼Œvuexè§£å†³çš„æ˜¯ç”¨çº¯æ•°æ®äº¤äº’çš„æ–¹å¼æ¥å¤„ç†åŸæœ¬å±äºç»„ä»¶é—´ï¼ˆsiblingç»„ä»¶ï¼‰çš„é€šä¿¡ï¼Œæœ‰äººä¼šè¯´é‚£æˆ‘ç”¨eventä¹Ÿå¯ä»¥åšåˆ°é€šä¿¡å•Šï¼Œä½†æ˜¯å½“ç»„ä»¶åˆ›å»ºã€é”€æ¯æ—¶ï¼Œè¿™äº›çŠ¶æ€ä¹Ÿéšä¹‹å˜åŠ¨ï¼Œå› æ­¤éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹äºç»„ä»¶çš„çŠ¶æ€æ ‘æ¥è¿›è¡Œç»´æŠ¤ã€‚åœ¨çŸ¥ä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªå›ç­”ï¼ŒæŒºå¥½çš„ï¼š Vuexçš„ä¸»è¦ä½œç”¨æ˜¯å„ç»„ä»¶é—´çš„çŠ¶æ€åŒæ­¥ï¼ˆä»¥åŠåŒä¸€ç»„ä»¶å†æ¬¡æ˜¾ç¤ºæ—¶çš„çŠ¶æ€ä¿æŒï¼‰ã€‚ç‰¹åˆ«æ˜¯éæ•°æ®åº“å†…å®¹ã€‚æ¯”å¦‚ç½‘é¡µå³ä¸Šè§’çš„æœç´¢æ¡†ï¼Œå¹¶ä¸åƒæ—¥å¿—åˆ—è¡¨é‚£æ ·å¯¹åº”æ•°æ®åº“å†…å®¹ã€‚å¦‚æœä¸å¸Œæœ›æ¯æ¬¡è¿›å…¥æœ‰æœç´¢æ¡†çš„æ¨¡æ¿é¡µé¢ï¼Œæœç´¢æ¡†å†…å®¹éƒ½è¢«é‡ç½®ï¼Œé‚£ä¹ˆå°±éœ€è¦é«˜äºç»„ä»¶çš„æ¶æ„ é¢˜å¤–è¯ï¼š ä»¥å¾€çš„æ“ä½œæ˜¯: parentA childB childCå­ç»„ä»¶ï¼ˆB,Cï¼‰è¦è°ƒç”¨Açš„å›è°ƒï¼Œé‚£ä¹ˆé€šè¿‡propsä¼ é€’åˆ°B,Cå³å¯ã€‚Aä¸­è¦è°ƒç”¨B.Cçš„æ–¹æ³•/å±æ€§ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥é€šè¿‡propså›è°ƒï¼Œç„¶åæŠŠB,Cçš„å±æ€§/æ–¹æ³•ä½œä¸ºå‚æ•° this.props.Afn(bVal,cVal,bFn,cFn)è¿™æ ·ã€‚ï¼ˆå½“ç„¶è¿™æ˜¯åœ¨B,Cå†…éƒ¨æ“ä½œï¼‰ã€‚å¦‚æœä¸€å®šè¦åœ¨Aä¸­æ‰§è¡Œï¼Œå¯ä»¥this.ref.B.blah(ä»¥reactä¸ºä¾‹)åœ¨vueä¸­ï¼Œé€šä¿¡ä¸­propsçš„éƒ¨åˆ†è·Ÿreactä¸€æ ·ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡(ç‰¹åˆ«æ˜¯å­™å­™ç»„ä»¶è¿™ç§å±‚çº§ç‰¹åˆ«å¤šçš„)äº‹ä»¶ï¼ŒB,Cä¸­emit,Aä¸­onè€Œäº‹ä»¶ä¹Ÿé€‚ç”¨äºsiblingä¹‹é—´çš„é€šä¿¡ï¼Œå¦‚B,Cã€‚æ —å­å¯ä»¥çœ‹react ä»¥shopping-cartä¸ºä¾‹æ¥åˆ†ævuexçš„goodså­ç»„ä»¶ä¸ºcartå’Œproductsã€‚è´­ç‰©è½¦å’Œå•†å“åˆ—è¡¨ã€‚ event-busåŠŸèƒ½ï¼šå½“å•†å“éœ€è¦åŠ å…¥è´­ç‰©è½¦çš„æ—¶å€™ï¼Œéœ€è¦åœ¨å•†å“åˆ—è¡¨ä¸­-1,è´­ç‰©è½¦ä¸­æ·»åŠ ã€‚é‚£ä¹ˆå°±åº”è¯¥dispatchä¸€ä¸ªadd_to_cart actionåˆ°æ ¹storeã€‚ç„¶åæ ¹storecommitä¸€ä¸ªmutationï¼Œè€Œè¿™ä¸ªæ—¶å€™ï¼Œè´­ç‰©è½¦å’Œå•†å“åˆ—è¡¨ä¸­éƒ½æœ‰åŒåADD_TO_CART mutationï¼Œå°±ä¼šåŒæ—¶æ‰§è¡Œã€‚å˜ç›¸çš„å®ç°event-busçš„åŠŸèƒ½ã€‚ é¿å…æ•°æ®å†—ä½™ï¼šé™¤æ­¤ä¹‹å¤–ï¼Œcartä¸­åªå­˜å˜åŠ¨çš„added productsçš„id,quantityæ•°é‡ï¼Œè™½ç„¶cartç»„ä»¶ä¸­æœ‰added productçš„ä¿¡æ¯ï¼Œä½†æ˜¯è¿™äº›ä¸å­˜åœ¨cart storeä¸­ï¼Œè€Œæ˜¯å­˜æ”¾åœ¨æ ¹store,æ ¹æ®addedæ•°ç»„ä¸­çš„idå»æŸ¥è¯¢productsï¼Œç„¶åå¾—åˆ°products gettersä¾›cartç»„ä»¶ä½¿ç”¨ã€‚ä½¿å¾—æ•°æ®å†—ä½™å‡å°‘äº†å¾ˆå¤šï¼Œç»„ä»¶ä¸å­˜å‚¨æ— å…³state. å…¨å±€æå‡ã€‚è™½ç„¶æœ‰moduleï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯æ³¨å†Œåœ¨å…¨å±€ä¸Šçš„ï¼Œä¹Ÿå°±æ˜¯ä¼šè¢«æå‡ï¼Œä¿è¯äº†åŒä¸€ä¸ªactionæœ‰å¯èƒ½è°ƒç”¨å¤šä¸ªåŒåmutationï¼ˆæ˜¯é€šè¿‡ç»´æŠ¤æ•°ç»„æ¥å®ç°çš„ï¼‰mutationsä¸­å…¶å®æ˜¯åŒ…æ‹¬äº†ä¸¤ä¸ªmodule+æ ¹çš„mutationï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ°è¿™è¾¹éƒ½è¢«åˆå¹¶äº†ï¼Œç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—æ¥è¿›è¡Œåˆ†å‘ã€‚(ä¸€ä¸ªdispatchä¹Ÿå¯èƒ½ä¼šè§¦å‘å¤šä¸ªæ¨¡å—çš„åŒåactionï¼Œå¦‚æœactionä¸­è¿”å›çš„æ˜¯promise,é‚£ä¹ˆç­‰æ‰€æœ‰çš„actionéƒ½ç»“æŸå®Œæ‰ä¼šæ‰§è¡Œthen) éœ€è¦ç”¨vuex/Immutableçš„åŸå›  vueè¸©ä¸‹çš„å‘ï¼š propsä¼ é€’å¼•ç”¨å¯¹è±¡ï¼ˆæµ…å¤åˆ¶ï¼‰æ¯”å¦‚è¿™è¾¹çš„wigetListå°±æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œæ˜¯ä½œä¸ºeditModalè¿™ä¸ªå­ç»„ä»¶çš„propsè¿›è¡Œä¼ é€’çš„ï¼Œè€Œå­ç»„ä»¶çš„ä¸€ä¸ªdata:listä»¥wigetListä¸ºåˆå§‹å€¼ï¼Œå½“ç‚¹å‡»multiSelectï¼ˆå³ä¼ è¿›æ¥çš„æ˜¯protocol:[]æ•°ç»„ï¼Œå˜åŠ¨è¿™ä¸ªæ•°ç»„æ—¶ï¼‰ç­‰å˜åŠ¨listçš„æ—¶å€™ï¼Œç”±äºä¼ é€’å¼•ç”¨ï¼Œä¼šå¯¼è‡´å¤–å±‚çš„wigetListå˜åŠ¨ï¼Œé€ æˆæ–°ä¸€è½®çš„propsæ›´æ–°ï¼Œæ‰€æœ‰listä¸­éå¼•ç”¨çš„å¯¹è±¡éƒ½ä¼šè¢«é‡æ–°åˆå§‹åŒ–æ‰ï¼Œï¼ˆæ³¨æ„æ˜¯éå¼•ç”¨å¯¹è±¡ï¼Œåƒinputå€¼ä¼ è¿›æ¥ï¼Œå†…éƒ¨å˜åŠ¨æ˜¯ä¸ä¼šå½±å“å¤–éƒ¨çš„ï¼‰åº”è¯¥æ˜¯ä¼ ç±»ä¼¼äºè¿™ç§ï¼š 1234[&#123; input: &apos;tet&apos;, //ä¸ä¼šæ”¹å˜å¤–éƒ¨ select: [&apos;test1&apos;,&apos;test2&apos;]//ä¼šä½œç”¨äºå¤–éƒ¨&#125;] è¿™æ ·å°±è¿èƒŒäº†æ•°æ®å•å‘ä¼ é€’çš„ç›®çš„ï¼Œé‚£ä¹ˆæ‰€æœ‰å¼•ç”¨è¿™ä¸ªwigetListçš„å€¼éƒ½ä¼šç›¸åº”çš„è¢«å˜åŒ–ã€‚åº”è¯¥æ˜¯propsä¼ é€’è¿›æ¥çš„æ—¶å€™ç”¨çš„æµ…å¤åˆ¶ï¼Œç±»ä¼¼äºObject.assign.å¯¹æ¯ä¸ªkeyéå†èµ‹å€¼ï¼Œç„¶ååŸºæœ¬ç±»å‹éƒ½èµ‹å€¼ï¼Œä½†æ˜¯å¼•ç”¨èµ‹çš„è¿˜æ˜¯å¯¹è±¡ã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ä¼ é€’immutableæ•°æ®ï¼ˆè ¢è ¢çš„æ–¹æ³•æ˜¯JSONåºåˆ—åŒ–æ‰ç„¶åä¼ è¿›æ¥â€¦ï¼‰ã€‚è¿˜æœ‰ä¸€ç§æ˜¯è™½ç„¶ä¼ å¼•ç”¨ï¼Œä½†æ˜¯èµ‹å€¼ï¼ˆdataç”¨propsåˆå§‹åŒ–çš„æ—¶å€™ï¼‰ç”¨æ·±æ‹·è´(è¿™è¾¹ç”¨çš„lodashçš„æ·±æ‹·è´)ã€‚ 123456789101112131415import cloneDeep from &apos;lodash/cloneDeep&apos;data() &#123;return &#123; showModal: this.show, wigets: cloneDeep(this.wigetList), //here form: &#123;...wigetTest&#125;&#125;;&#125;,watch:&#123;show(val)&#123; this.showModal = val;&#125;,wigetList(val)&#123; this.wigets = cloneDeep(val); //here ~&#125; case å…¨å±€ç»´æŠ¤tab. å½“click tabæ—¶ï¼Œdispatchä¸€ä¸ªâ€œchangeTabâ€çš„action,æ ¹storeå“åº”ï¼Œæ ¹commitä¸€ä¸ªCHANGE_TABçš„mutationï¼ˆtab = newTabï¼‰ï¼Œç„¶ååŒåçš„moduleé‡Œé¢çš„mutationæ‰§è¡Œï¼ˆæ¯”å¦‚resetç­‰ç­‰ï¼‰ã€‚ ä¹‹å‰çš„æ–¹æ³•æ˜¯è¿™æ ·å¤„ç†çš„ï¼šåœ¨page1ä¸­ç›‘å¬tabå˜åŠ¨ï¼Œç­‰æ ¹çš„tab stateå˜åŠ¨å®Œåreset. 123456789101112131415161718192021//page1: watch: &#123; &apos;$route&apos;(to,from) &#123; //ç›‘å¬tabå¯¼è‡´çš„è·¯ç”±å˜åŠ¨ if(to.query &amp;&amp; to.query.tab)&#123; this.$store.dispatch(&apos;changeTab&apos;,to.query.tab).then(()=&gt;&#123; this.reset(); &#125;) &#125; &#125; &#125;,//æ ¹storeconst actions = &#123; changeTab(&#123;commit&#125;,tab)&#123; //è¿”å›ä¸€ä¸ªpromise return new Promise((resolve,reject)=&gt;&#123; commit(types.CHANGE_TAB,tab); resolve(); &#125;) &#125;&#125;","categories":[{"name":"æ—¥å¸¸å¼€å‘","slug":"æ—¥å¸¸å¼€å‘","permalink":"http://yoursite.com/categories/æ—¥å¸¸å¼€å‘/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://yoursite.com/tags/Vue/"},{"name":"Vuex","slug":"Vuex","permalink":"http://yoursite.com/tags/Vuex/"},{"name":"å‘","slug":"å‘","permalink":"http://yoursite.com/tags/å‘/"}]},{"title":"FEç©è€ä¸“æ ï¼ˆäºŒï¼‰ä¹‹ç¼©å°ç‰ˆ","slug":"FEç©è€ä¸“æ ï¼ˆäºŒï¼‰ä¹‹ç¼©å°ç‰ˆ","date":"2017-02-01T05:09:53.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2017/02/01/FEç©è€ä¸“æ ï¼ˆäºŒï¼‰ä¹‹ç¼©å°ç‰ˆ/","link":"","permalink":"http://yoursite.com/2017/02/01/FEç©è€ä¸“æ ï¼ˆäºŒï¼‰ä¹‹ç¼©å°ç‰ˆ/","excerpt":"","text":"æœ«å°¾æ˜¾ç¤ºçœç•¥å·ï¼ˆellipsisï¼‰åˆ†ä¸¤ç§ï¼Œå•è¡Œè·Ÿå¤šè¡Œã€‚ ä»¥å•è¡Œä¸ºä¾‹ã€‚éœ€è¦è®¾ç½®ä¸€ä¸ªå®½åº¦ï¼Œè¿™æ ·æ‰æœ‰overflowçš„æƒ…å†µã€‚åŒæ—¶è®¾ç½®è¶…å‡ºåæ˜¾ç¤ºçœç•¥å·ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå› ä¸ºè®¾äº†å®½åº¦ï¼Œä¼šé»˜è®¤æ¢è¡Œï¼Œé‚£ä¹ˆå°±è¾¾ä¸åˆ°overflowçš„æƒ…å†µï¼Œæ‰€ä»¥è¦é˜»æ­¢æ¢è¡Œï¼Œç”¨nowrapä½¿å¾—ä¸€è¡Œæ˜¾ç¤ºã€‚ 123456.ellipsis-single&#123; width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; &#125; å¤šè¡Œçš„è¯ï¼Œè®¾ç½®æœ€å¤šè¡Œæ•°(-webkit-line-clamp) 123-webkit-line-clamp,display: -webkit-box-webkit-box-orient å…·ä½“çš„demoè§[codepen]å“ˆ See the Pen ellipsis test with single line and multiple lines by lu (@luchen) on CodePen. tagged inputSee the Pen tagged input via vue by lu (@luchen) on CodePen. è¿™ä¸ªdemoç›®çš„æ˜¯ï¼š è½®å­ï¼Œäº¤äº’å‹å¥½ï¼Œå› ä¸ºå¸¸ç”¨pocketè·Ÿevernoteï¼Œå°±æœ‰æ‰“tagçš„åœºæ™¯ï¼Œä½†æ˜¯elementæ²¡æœ‰ç›¸åº”çš„ç»„ä»¶ã€‚ å®è·µäº†ä¸€ä¸‹vueæ‰€è¯´çš„v-modelçš„è¯­æ³•ç³–ã€‚æ€»ç»“æ¥è¯´å°±æ˜¯ 1v-model = value+ $emit(&apos;input&apos;) å­ç»„ä»¶æ–°å»ºä¸€ä¸ªdata,ç»´æŒä»çˆ¶ç±»ä¼ æ¥çš„props(value)ä½œä¸ºåˆå§‹å€¼ï¼Œæ¯æ¬¡å­ç»„ä»¶data(æˆ–è€…æ›´ç²¾ç¡®ç‚¹è¯´æ˜¯ï¼šè¦ä¼ å‡ºå»çš„æ•°å€¼)å˜åŠ¨æ—¶$emitï¼Œé€šçŸ¥çˆ¶ç»„ä»¶å˜åŠ¨ã€‚æ˜¯ç”±å†…å¾€å¤–çš„æ•°æ®ä¼ è¾“ã€‚ svg åˆ¶ä½œè¿›åº¦ç¯part1ï¼šåŸºç¡€çŸ¥è¯†ï¼š é€šç”¨æŒ‡ä»¤ï¼šstroke stroke-width stroke-color stroke-linecap stroke-dashedarray fill å¸¸ç”¨æŒ‡ä»¤ï¼š circle &lt;circle cx cy r&gt;&lt;/circle&gt; path: d>```1- polygonï¼š```&lt;polygon points&gt;&lt;/polygon&gt; æ‰€æœ‰çš„å¤§å†™è¡¨ç¤ºç»å¯¹è·¯å¾„ï¼Œå°å†™ä¸ºç›¸å¯¹åç§» 123456789101112131415161718192021222324pathç›¸å…³æŒ‡ä»¤ï¼šM = moveto æ ‡å¿—èµ·ç‚¹ç»ˆç‚¹ç­‰ eg M 100 100//group2L = lineto H = horizontal lineto V = vertical lineto //ç›´çº¿ç»ˆç‚¹eg L 100 200//group3C =curveto S = smooth curveto Q = quadratic BÃ©zier curve T = smooth C ä¸ºä¸¤ä¸ªæ§åˆ¶ç‚¹+ç»ˆç‚¹ï¼Œå¦‚ä¸‰æ¬¡è´å¡å°”æ›²çº¿ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªæ§åˆ¶ç‚¹ã€‚eg.&lt;path d=&quot;M70 60 C 70 80, 110 80, 110 60&quot; stroke=&quot;black&quot; fill=&quot;transparent&quot;/&gt;S:è¡¨ç¤ºç®€å†™æ§åˆ¶ç‚¹ï¼Œè¡¨ç¤ºå®ƒçš„ç¬¬ä¸€ä¸ªæ§åˆ¶ç‚¹ä¸å‰é¢çš„S/Cçš„æ§åˆ¶ç‚¹çš„å¯¹ç§°ç‚¹:S C2 endP Q ä¸ºäºŒæ¬¡è´å¡å°”æ›²çº¿çš„ä¸€ä¸ªæ§åˆ¶ç‚¹,ç±»ä¼¼äºCTå‰é¢éœ€è¦æœ‰Qæˆ–è€…TA = elliptical Arc A x-radius y-radius x-rotation large-arc-flagï¼ˆè§’åº¦å¤§å°ï¼‰sweep-flagZ = closepath part2ï¼š åˆ’é‡ç‚¹ åœ†ç¯ï¼š ç”¨circle+fill:none+strokeç»˜åˆ¶è€Œæˆ sliderï¼šç”¨path+arcæŒ‡ä»¤+fill:noneå»ç»˜åˆ¶å¼§ æ³¨æ„ç‚¹ï¼š viewboxä¸svgä¹‹é—´çš„scaleå’Œåæ ‡æ˜ å°„é—®é¢˜ã€‚æ•´ä¸ªçš„ç»˜åˆ¶æ˜¯ä»¥viewboxä¸ºåŸºå‡†çš„ï¼Œè€Œäº¤äº’æ“ä½œçš„åæ ‡æ˜¯éœ€è¦å…ˆè½¬ä¸ºç›¸å¯¹äºsvg,ç„¶åå†scaleåˆ°viewBoxçš„ã€‚å…³äºviewboxï¼Œviewportç­‰çš„é—®é¢˜ï¼Œæˆ³å¼ é‘«æ—­å¤§ç¥çš„æ–‡ç« ç§‘æ™®ä¸‹ç†è§£SVGçš„viewport,viewBox,preserveAspectRatioã€‚viewboxçš„ä¸€ä¸ªå¥½å¤„ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å¯ä»¥è‡ªé€‚åº”containerçš„åŒæ—¶å¼€å‘äººå‘˜å¯ä»¥åªé’ˆå¯¹viewboxçš„åæ ‡ç³»ç»Ÿè¿›è¡Œå¼€å‘ã€‚æœ‰ç‚¹ç±»ä¼¼äºç§»åŠ¨ç«¯è®¾ç½®rem,å¼€å‘äººå‘˜åªè¦å¯¹750pxçš„å»è¿›è¡Œç¼–å†™å„ç§px,æœ€ç»ˆéƒ½ä¼šæ ¹æ®ç¯å¢ƒå»ç›¸åº”çš„æ˜ å°„åˆ°æ­£ç¡®çš„å®½é«˜å¤§å°ã€‚ ç²¾åº¦ç¼ºå¤±é—®é¢˜ï¼š å½“percentä¸º100ä¼ è¿‡å»å¾—åˆ°å¼§åº¦åˆ¶çš„è§’åº¦æ—¶ï¼Œå› ä¸ºMath.PIæœ¬èº«æ— é™å¾ªç¯ä¸‹å»ï¼Œæœ‰ç²¾åº¦æŸå¤±ã€‚æˆ‘ä»¬çœ‹åˆ°è€Œæ­£å¸¸ç†è§£ä¸­ï¼Œsin(360Â°)åº”è¯¥ä¸º0ã€‚å°±å¯¼è‡´æœ€ç»ˆç”»æ»¡æ ¼çš„æ—¶å€™ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µã€‚æ‰€ä»¥æ¥¼ä¸»æš—æ“æ“çš„æ£€æµ‹100%æ—¶æ‰‹åŠ¨å˜æˆäº†99.9%ã€‚æ‚è„¸â€¦ Math.sinç­‰å‡½æ•°æ¥å—çš„æ˜¯å¼§åº¦åˆ¶éè§’åº¦åˆ¶ï¼Œéœ€è¦é¢„å…ˆè¿›è¡Œå¤„ç† äº¤äº’æ–¹é¢ï¼šè®¾ç½®äº†ç‚¹å‡»ä»¥åŠmousemoveçš„éƒ¨åˆ†ã€‚å¯¹äºåæ ‡çš„æ£€æµ‹ï¼Œæ£€æµ‹clientX,å¹¶æ˜ å°„åˆ°viewboxå†…ã€‚ç„¶åæ ¹æ®ï¼ˆx-c1ï¼‰^2 +(y-c2)^2 = r^2ã€‚å»è®¡ç®—yï¼Œè€Œè¿™ä¸ªæ—¶å€™å¾—åˆ°çš„ä¼šæœ‰ä¸¤ä¸ªyï¼Œå¯¹ç§°äºç›´å¾„ã€‚é‚£ä¹ˆå°±éœ€è¦æ ¹æ®clientYå»è¿›è¡Œç­›é€‰åŒ¹é…ï¼Œä»è€Œå¾—åˆ°æ­£ç¡®çš„åœ†ä¸Šåæ ‡ã€‚ï¼Œå»ç»˜åˆ¶arc pathã€‚ç„¶åæ ¹æ®åæ ‡å»è®¡ç®—å¤¹è§’ï¼Œå¾—åˆ°percentã€‚æœ€ç»ˆæ›´æ–°dataã€‚ æœ€ç»ˆçš„demoæˆ³è¿™ä¸ªé“¾æ¥ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ”¾åˆ°codepené‡Œé¢ï¼Œç¬¬ä¸‰å¹…å›¾çš„æ•°æ®æ²¡æœ‰æ›´æ–°ï¼ˆfunc propsæ²¡æœ‰ä¼ ä¸‹å»ï¼‰ã€‚å®æµ‹æ˜¯å¯ä»¥çš„ã€‚ See the Pen sliding circle via svg by lu (@luchen) on CodePen. è¡¥å……ï¼š å› ä¸ºåŒæ—¶æœ‰clickè·Ÿmousedown,mousemove,mouseupã€‚ä¸ºäº†é¿å…å†²çªï¼Œæ¥¼ä¸»æŠŠmouseéƒ¨åˆ†æ”¾åœ¨äº†pathä¸Šï¼Œclickæ”¾åœ¨äº†circleä¸Šã€‚å…·ä½“åœºæ™¯å¯ä»¥çœ‹å¯ä»¥çœ‹åˆ°å½“åœ¨åªæ³¨å†Œäº†mousedown,upçš„pathä¸Šè¿›è¡Œclickï¼Œä¼šä¾æ¬¡æ‰§è¡Œdown,upã€‚å¦‚æœç»‘åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šï¼Œå°±æœ‰å†²çªï¼Œä¼šæ‰§è¡Œä¸‰æ¡ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨æ—¶é—´è¿›è¡Œä¸‹é¢çš„åŒºåˆ†æ“ä½œï¼š åœ¨mousedownçš„æ—¶å€™,è®°å½•å½“å‰çš„æ—¶é—´,ç„¶ååœ¨mouseupçš„æ—¶å€™,å†å–å½“å‰æ—¶é—´,ç„¶ååˆ¤æ–­è¿™ä¸¤ä¸ªæ—¶é—´å·®,å½“å®ƒå¤§äºæŸä¸ªæ•°å€¼çš„æ—¶å€™(å› ä¸ºå¦‚æœæ˜¯click,é‚£ä¹ˆä¼šåœ¨å¾ˆçŸ­æ—¶é—´å†…äº§ç”Ÿmouseup),å°±ä¸è®¤ä¸ºå®ƒæ˜¯clickã€‚æ›´ç²¾ç¡®çš„è¿˜å¯ä»¥åŠ ä¸Šmousedownå’Œmouseupçš„åæ ‡ï¼Œä¸åŒåˆ™éclickã€‚ ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªsetTimeoutçš„è§£å†³æ–¹æ¡ˆ,å°äº200msçš„å°±æ‰§è¡Œclickæ“ä½œï¼š 12345678910111213141516$(element).click(function()&#123; // click code in here &#125;);$(element).MouseDown(function()&#123; onMouseDownFlag = false; mouseDownAndUpTimer = setTimeout(function()&#123; // OnMouseDown Code in here onMouseDownFlag = true; &#125;,200);&#125;).MouseUp(function()&#123; if(onMouseDownFlag)&#123; // OnMouseUp Code in here &#125;else&#123; clearTimeout(mouseDownAndUpTimer); // æ¸…é™¤å»¶è¿Ÿæ—¶é—´ &#125;&#125;); PS:æ¥¼ä¸»ä¹‹å‰çœ‹åˆ°circleè¿˜æœ‰ä¸€ç§å¾ˆå·§å¦™çš„æ–¹æ³•ã€‚ç®€è¦æ¥è¯´æ˜¯ç”¨path(arc)+stroke-dasharrayå»å¤„ç†ã€‚ä¸€ä¸ªç¯å°±æ˜¯ä¸€ä¸ªstoke-dasharray [first second]ã€‚firstçš„é•¿åº¦å³ä¸ºå½“å‰percentçš„äº®è‰²éƒ¨åˆ†ã€‚secondå³ä¸ºç°è‰²çš„éƒ¨åˆ†ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•ä¸æ˜¯å¾ˆå¥½åšmousemoveã€‚æ‰€ä»¥æ¥¼ä¸»å°±ä½œç½¢å˜ å¯¹æ¯”ä¸€ä¸‹tagged inputå’Œcircle,è¿™ä¸¤ä¸ªéƒ½æ˜¯vueç»„ä»¶çš„ç¼–å†™ï¼Œéƒ½æ¶‰åŠçˆ¶å­ç»„ä»¶çš„é€šä¿¡ï¼ŒåŒºåˆ«åœ¨äºï¼Œç¬¬ä¸€ç§æ˜¯ å­ç»„ä»¶æ–°å»ºä¸€ä¸ªdata,ç»´æŒä»çˆ¶ç±»ä¼ æ¥çš„propsä½œä¸ºåˆå§‹å€¼ï¼Œæ¯æ¬¡å­ç»„ä»¶å˜åŠ¨æ—¶$emitï¼Œé€šçŸ¥çˆ¶ç»„ä»¶å˜åŠ¨ã€‚æ˜¯ç”±å†…å¾€å¤–çš„æ•°æ®ä¼ è¾“ã€‚ç¬¬äºŒç§çš„version1ç‰ˆæœ¬æ˜¯çˆ¶ç»„ä»¶ä¼ propsè¿›å†…éƒ¨ï¼Œå¤–éƒ¨è¿›è¡Œå˜åŠ¨ï¼Œååº”åˆ°å­ç»„ä»¶ï¼Œç›¸åº”å˜åŒ–ã€‚ï¼ˆæ­¤æ—¶æ²¡æœ‰data.ï¼‰å½“éœ€è¦å¢åŠ éœ€æ±‚ï¼ˆversion2ï¼Œå³éœ€è¦äº¤äº’æ»‘åŠ¨circleï¼‰æ—¶ï¼Œå°±éœ€è¦å¢åŠ ä¸€ä¸ªcurrentValueçš„data,ä»¥props percentåˆå§‹åŒ–ï¼Œä¸€æ–¹é¢éœ€è¦watch percentçš„å˜åŠ¨ï¼ˆå¤–-&gt;å†…ï¼‰,å¦ä¸€æ–¹é¢å½“è‡ªå·±å˜åŒ–æ—¶ï¼Œéœ€è¦å‘ŠçŸ¥å¤–éƒ¨ï¼Œå³è°ƒç”¨onPercentChange(val) çš„propså›è°ƒã€‚ references path in svg donut via d3æ•ˆæœå›¾å¦‚ä¸‹ï¼Œä¸¤åœˆåœ†åˆ†åˆ«ä»£è¡¨å†…å¤–éƒ¨æ•°æ®ï¼Œmouseoveråˆ°å†…ä¾§æ—¶ï¼Œä¼šåœ¨ä¸­å¿ƒæ˜¾ç¤ºç›¸åº”çš„æ•°æ®ï¼Œå¤–ä¾§å‡åˆ†çš„arcï¼Œç”±æŠ˜çº¿å¼•å‡ºå®ƒå…³è”çš„æ•°æ®ã€å›¾æ ‡ç­‰ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹å®ç° é¦–å…ˆç”Ÿæˆä¸€ä¸ªé¥¼å›¾123456const arcs = d3.pie() .startAngle(-90 * Math.PI/180) .endAngle(-90 * Math.PI/180 + 2*Math.PI) .value(d=&gt; d.value) .padAngle(.01) .sortValues((a,b)=&gt;(b-a)(innerData); d3.pie()è¿”å›ä¸€ä¸ªgenerator(å®é™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—dataæ•°ç»„ä½œä¸ºå‚æ•°ï¼‰ï¼Œd3.pie(data)æœ€ç»ˆç”Ÿæˆä¸€ä¸ªç”±data mapå‡ºæ¥çš„æ–°æ•°ç»„ arrï¼Œarrçš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæœ‰ä»¥ä¸‹å±æ€§çš„obj,æ¯ä¸€ä¸ªobjæ ‡å¿—äº†ä¸€ä¸ªarcå¼§ï¼š data - the input datum; the corresponding element in the input data array.value - the numeric value of the arc.index - the zero-based sorted index of the arc.startAngle - the start angle of the arc.endAngle - the end angle of the arc.padAngle - the pad angle of the arc. 123const arc = d3.arc().innerRadius(config.innerRadius) .outerRadius(config.innerRadius+20) .cornerRadius(5); ç”Ÿæˆå„éƒ¨åˆ†arcarcä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯¹ä¸Šé¢ç»˜åˆ¶çš„pieè¿›è¡Œé™å®šï¼ˆå†…å¤–åŠå¾„+paddingï¼‰arc(data2)ç”Ÿæˆ&quot;M0,-100A100,100,0,0,1,100,0L0,0Zè¿™æ ·çš„æ•°æ®ï¼Œä¼ é€’ç»™pathd3.append(&quot;path&quot;).attr(&quot;d&quot;,arc)ï¼Œæœ€ç»ˆå°±å‡ºæ¥ä¸€æ¡å¼§ã€‚ æ³¨ï¼š path.data(innerData).attr(&quot;d&quot;ï¼Œfunc)ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°(è¿™è¾¹å³ä¸ºarcå‡½æ•°)ï¼Œæ¥å—innerDataä¸­çš„æ¯ä¸€ä¸ªobjä¸ºå‚æ•°,è¿™äº›æ•°æ®ä½œä¸ºæ–°çš„ç»˜åˆ¶æ•°æ®è¢«ä¼ é€’ç»™pathï¼Œä»è€Œæœ€ç»ˆå¾—åˆ°é¥¼å›¾ã€‚ è¯¥éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425//firstconst pie = d3.pie() .startAngle(0) .endAngle(2 * Math.PI) //-90 * Math.PI/180 + .value(d =&gt; d.value) .padAngle(.02) .sortValues((a, b) =&gt; (b - a));//secondconst inner = svg.append(\"g\").attr(\"class\", \"inner\") .attr(\"width\", config.width * 0.4) .attr(\"height\", config.height * 0.4) .attr(\"transform\", `translate($&#123;config.width/2&#125;,$&#123;config.height/2&#125;)`); const arc = d3.arc().innerRadius(config.innerRadius) .outerRadius(config.innerRadius + 20) .cornerRadius(5); const arcItem = inner.selectAll(\".donutArc\").data(transformedData) .enter().append(\"g\") .attr(\"class\", \"donutArc\") .append(\"path\") .each(d =&gt; d.outerRadius = outerRadius) .attr(\"d\", arc) .style('fill', (d, i) =&gt; d3.schemeCategory10[i]); æ€»ç»“æ¥è¯´ï¼Œd3.pie()(data) å¾—åˆ°ã€obj1,obj2ã€‘,æ¯ä¸ªobjåˆèµ‹å€¼ç»™arcd3.arc(obj1)ï¼Œå¾—åˆ°pathçš„då±æ€§æ•°æ®ã€‚ æŠ˜çº¿éƒ¨åˆ†è¿™è¾¹ä¸»è¦æ€è·¯æ˜¯å®šä¹‰ä¸€æ¡polylineçš„ä¸‰ä¸ªç‚¹å»ç”Ÿæˆçº¿æ®µï¼Œä¸‰ç‚¹åˆ†åˆ«ä¸ºouterArcçš„ä¸­å¿ƒï¼Œéšè—çš„ä¸€ä¸ªåœ†çš„centroid,ä»¥åŠè‡ªå®šä¹‰çš„ç»ˆç‚¹ã€‚ 1234567outItem.append(\"polyline\").attr(\"class\", \"polyline\") .attr(\"points\", d =&gt; &#123; let point3 = largeOutArc.centroid(d); d.outArcCen = [...point3]; point3[0] = config.width / 2 * 0.7 * (midAngle(d) &gt; Math.PI ? -1 : 1); return [outerArc.centroid(d), largeOutArc.centroid(d), point3] &#125;); å›¾ç‰‡ä¸æ–‡å­—éƒ¨åˆ†è¿™è¾¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæ¥¼ä¸»æœ€å¼€å§‹ä½¿ç”¨äº†es6çš„è¯­æ³•ï¼Œå› æ­¤åœ¨attrçš„å›è°ƒå‡½æ•°ä¸­æ— æ³•d3.select(this)å»å¾—åˆ°å…ƒç´ ï¼Œï¼ˆes6ä¸­ç»‘å®šçš„thisæ˜¯å¤–å±‚å®šä¹‰æ—¶çš„thisï¼‰ï¼Œä¸‹é¢æˆ‘ä»¬ä¼šæåˆ°çš„mouseoveräº‹ä»¶ä¸­ä¹Ÿæ˜¯ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå› ä¸ºimageå…ƒç´ éšç€group è¿›è¡Œäº†transformï¼Œå› æ­¤å®é™…ä¸Šæ˜¯å·¦ä¸Šè§’åœ¨ç°åœ¨çš„åœ†å¿ƒå¤„ï¼Œåº”è¯¥åtransformè‡ªèº«çš„ä¸€éƒ¨åˆ†ï¼Œä½¿ä¹‹å±…ä¸­åå†å»å‘æ•£åˆ°å››å‘¨ã€‚å› æ­¤è¿™è¾¹ç”¨x,yå»é¢„å…ˆå®šä¹‰äº†ä»–ä»¬çš„ä½ç½®ã€‚è€Œæ–‡å­—ï¼Œæ²¡æœ‰å›¾ç‰‡é‚£ä¹ˆéº»çƒ¦ï¼Œå¯ä»¥ç›´æ¥ç”¨text-anchorè¿›è¡Œå¤„ç†ã€‚ 1234567891011121314151617181920212223//å›¾æ ‡ outItem.append(\"image\").attr(\"class\", \"image\") .attr(\"xlink:href\", d =&gt; d.data.href) .attr(\"x\", (d, i, nodes) =&gt; -nodes[i].getBBox().width / 2) .attr(\"y\", (d, i, nodes) =&gt; -nodes[i].getBBox().height / 2) // .attr(\"y\",(()=&gt; -1*this.getBBox().height/2)() .attr(\"transform\", (d, i) =&gt; &#123; let point3 = [...d.outArcCen]; point3[0] = config.width / 2 * 0.85 * (midAngle(d) &gt; Math.PI ? -1 : 1); d.endPoint = point3; return 'translate(' + point3 + ')'; &#125;) // text å…¬å¸æè¿° outItem.append(\"text\").attr(\"dy\", \"-.35em\").attr(\"class\", \"text\") .attr(\"transform\", d =&gt; &#123; const interpolate = d3.interpolate(d.outArcCen, d.endPoint); const newPoint = interpolate(0.2); return 'translate(' + newPoint + ')'; &#125;) .text(d =&gt; d.data.name); ç»‘å®šäº‹ä»¶attr(attrname,value): å¯¹ç›¸åº”çš„å…ƒç´ çš„å±æ€§è¿›è¡Œè®¾ç½®ï¼Œvalueå¯ä»¥ä¸ºå€¼ï¼Œä¹Ÿå¯ä»¥ä¸ºå‡½æ•°ï¼Œå¦‚æœæ˜¯funcçš„è¯ï¼Œä¼šè¢«ç«‹å³è°ƒç”¨ã€‚å› ä¸ºè¿™è¾¹çš„éœ€æ±‚æ˜¯mouseoverä¸Šï¼ˆd3é‡Œé¢æ²¡æœ‰hoverã€mouseenterç­‰å‡½æ•°ï¼‰æ˜¾è‘—æ ‡å‡ºã€‚ï¼ˆæœ€å¼€å§‹æ¥¼ä¸»è®¾ç½®äº†scale,ä½†æ˜¯svgå…ƒç´ ä¸­ä¸æ”¯æŒtransform-originï¼Œå› æ­¤æ²¡æœ‰åŠæ³•è®¾ç½®center,ä½¿å¾—åç¦»ä½ç½®ï¼Œä¸åœè§¦å‘mouseoverï¼‰ã€‚åæ¥å°±ä¿æŒå†…åŠå¾„ä¸å˜â€¦ attrTween(attrname,value): valueä½œä¸ºå‡½æ•°æ—¶ï¼Œåº”è¯¥è¿”å›çš„æ˜¯ä¸€ä¸ªå‚æ•°ä¸ºtimeï¼ˆæ—¶åˆ»ï¼‰çš„æ’å€¼å™¨(å‡½æ•°)ï¼Œæ’å€¼å™¨çš„è¿”å›å€¼ä½œä¸ºvalueè¢«è®¾ç½®æˆæ—¶åˆ»tæ—¶è¯¥å±æ€§çš„å€¼ 1234567891011//å®˜æ–¹api//å†…ç½®æ’å€¼å™¨selection.attrTween(\"fill\", function() &#123; return d3.interpolateRgb(\"red\", \"blue\");&#125;);//è‡ªå®šä¹‰æ’å€¼å™¨selection.attrTween(\"fill\", function() &#123; return function(t) &#123; return \"hsl(\" + t * 360 + \",100%,50%)\"; &#125;;&#125;); 123456789101112131415161718192021222324 arcItem.on(\"mouseover\", handleMouseOver)//es6ç®­å¤´å‡½æ•°ä¼šä¸¢å¤±this,å‡½æ•°å†…éƒ¨æ— æ³•d3.select(this)å¾—åˆ°ç»‘å®šäº‹ä»¶çš„å…ƒç´  .on(\"mouseout\", handleMouseOut)function attrTween(outerRadius, duration) &#123; return function() &#123; d3.select(this).transition() .duration(duration) .attrTween(\"d\", (d) =&gt; &#123;//åœ¨ä¸¤ä¸ªçŠ¶æ€é—´è½¬å˜ï¼ŒåŠ ä¸Štransitionç¼“åŠ¨åŠ¨ç”» const timingFun = d3.interpolate(d.outerRadius, outerRadius); return (t) =&gt; &#123; arc.outerRadius(timingFun(t)); return arc(d);//æœ€ç»ˆçš„è¿”å›å€¼ &#125; &#125;) &#125; &#125; function handleMouseOver(obj, i, nodes) &#123; // debugger context.cur = &#123; catetory: obj.data.name, statistics: obj.data.value &#125;; d3.select(this).transition() .attr(\"d\", attrTween(outerRadius + 20, 500)) &#125; è¡¥å……çŸ¥è¯†svg viewportã€viewboxã€viewPort: è§†çª—ï¼Œsvgå£°æ˜width,heightçš„éƒ¨åˆ† 1&lt;svg width=&quot;800&quot; height=&quot;600&quot; &gt; ä¸€å»ºç«‹viewportï¼Œå°±ä¼šåˆ›å»ºåˆå§‹çš„è§†çª—åæ ‡ç³»å’Œç”¨æˆ·åæ ‡ç³» è§†çª—åæ ‡ç³»æ˜¯å»ºç«‹åœ¨è§†çª—ä¸­çš„ï¼Œ ç”¨æˆ·åæ ‡ç³»æ˜¯å»ºç«‹åœ¨ç”»å¸ƒä¸Šçš„ï¼ˆviewboxé™å®šï¼‰ï¼ŒçœŸå®åæ ‡ç³»ã€‚ åˆå§‹æ—¶ï¼Œä¸¤è€…ç›¸åŒï¼Œä½†å¯ä»¥åç»­è®¾ç½®ä½¿ä¹‹ä¸ä¸€è‡´ 1&lt;svg width=\"800\" height=\"600\" viewbox=\"200 200 400 400\"&gt; viewboxå±æ€§åˆ†åˆ«å¯¹åº”ï¼š leftTopX,leftTopY,width,heightå£°æ˜äº†ä¸€ä¸ªåŒºåŸŸï¼Œåœ¨viewportä¸­è£åˆ‡å‡ºæ¥ï¼Œç„¶åæ‹‰ä¼¸æ¥é€‚åº”viewPortã€‚ å½“viewboxä¸viewPortçš„æ¯”ä¾‹ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨preserveAspectRatio æ¥ä¿æŒé•¿å®½æ¯”ï¼Œåˆæ¶‰åŠåˆ°ä¸¤ä¸ªå‚æ•°â€œalignment meet/sliceâ€meetç”¨äºæŒ‰ç…§viewboxå¤§å°å»æŒ‰æ¯”ä¾‹é€‚åº”viewportï¼ˆè®¾å®½æ¯”a,é«˜æ¯”ä¸ºbï¼ŒæŒ‰ç…§æ¯”ä¾‹å°çš„å»é€‚åº”ï¼‰,å¦‚ä¸Šé¢çš„æ¯”ä¾‹1ï¼š1ï¼Œä¼šé€‚åº”æˆ600 600.è€Œsliceåˆ™ä¼šï¼ˆå°½å¯èƒ½å……æ»¡viewportï¼ŒæŒ‰ç…§å¤§æ¯”ä¾‹å»ï¼‰é€‚åº”åå»è£åˆ‡ã€‚alignmentè¡¨æ˜çš„æ˜¯viewportä¸viewboxçš„æŒ‰ç…§å“ªäº›è½´å¯¹é½ å‚è€ƒæ–‡ç« å¯ä»¥çœ‹ å¼ é‘«æ—­çš„ï¼Œ è¿˜æœ‰è¿™ç¯‡ç†è§£SVGåæ ‡ç³»å’Œå˜æ¢ï¼šè§†çª—,viewBoxå’ŒpreserveAspectRatioï¼Œ æµ‹è¯•ç½‘ç«™ A Look At SVG viewBox and viewport extending the arc æ³¨æ„ç‚¹ï¼š åœ¨svgå…ƒç´ ä¸Šçš„transformæ˜¯ä¸ä¼šç»§æ‰¿ç»™å­å…ƒç´ çš„ï¼Œåªæœ‰ç»‘åœ¨g elementä¸Šæ‰å¯ä»¥ã€‚å¦‚å›¾ï¼š å…·ä½“æˆ³è¿™è¾¹çš„é“¾æ¥Drawback: G Elements Have no X and Y Attributes å¦åˆ™ï¼Œå¾—æ‰‹åŠ¨ä¸€å±‚å±‚çš„æŠŠtransformå¤åˆ¶ç»™å­å…ƒç´ ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹å›¾ä¸­ï¼Œtransformç›´æ¥è®¾ç½®åœ¨svgä¸Šï¼Œinneræ²¡æœ‰åšä»»ä½•å¤„ç†ï¼Œouteréœ€è¦è®¾ç½®ä¸svgåŒæ ·çš„ä½ç§»æ‰å±…ä¸­ã€‚ transform-originä¸å­˜åœ¨äºsvgçš„å±æ€§ä¸­ï¼Œæ˜¯cssçš„å±æ€§ First of all, transform-origin is a pure CSS 3 property, it is not related to SVG 1.1 at all. Despite the fact that transform sounds a lot like transform-origin, they apply to different systems. transform exists in both CSS 3 and SVG 1.1 but have separate implementations. transform-origin only exists in CSS 3 and therefore it is not supposed to influence SVG 1.1. The fact that transform-origin has no influence on SVG in Chrome 48 is expected. äº‹ä»¶ä¸­çš„this","categories":[{"name":"æ—¥å¸¸å¼€å‘","slug":"æ—¥å¸¸å¼€å‘","permalink":"http://yoursite.com/categories/æ—¥å¸¸å¼€å‘/"}],"tags":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"http://yoursite.com/tags/å¼€å‘/"},{"name":"å¥½ç©çš„","slug":"å¥½ç©çš„","permalink":"http://yoursite.com/tags/å¥½ç©çš„/"},{"name":"æ—¥å¸¸ç©è€","slug":"æ—¥å¸¸ç©è€","permalink":"http://yoursite.com/tags/æ—¥å¸¸ç©è€/"},{"name":"js","slug":"js","permalink":"http://yoursite.com/tags/js/"},{"name":"css","slug":"css","permalink":"http://yoursite.com/tags/css/"},{"name":"svg","slug":"svg","permalink":"http://yoursite.com/tags/svg/"}]},{"title":"javascriptè®¾è®¡æ¨¡å¼ï¼ˆä¸‰ï¼‰","slug":"design-principle3","date":"2017-01-31T12:22:58.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2017/01/31/design-principle3/","link":"","permalink":"http://yoursite.com/2017/01/31/design-principle3/","excerpt":"","text":"å‘å¸ƒ-è®¢é˜…æ¨¡å¼å…¶å®è¿™ä¸ªæ¨¡å¼ä½¿ç”¨é¢‘ç‡å¾ˆå¤šï¼Œä¹‹å‰æ¥¼ä¸»å†™reactçš„æ—¶å€™ï¼Œå°±é‡åˆ°è¿‡è¿™ä¹ˆä¸ªåœºæ™¯ï¼Œä¸€ä¸ªé¡µé¢ä¸­æ¶‰åŠçš„ç»„ä»¶æœ‰ï¼š form partï¼ˆä¸€å †ç­›é€‰æ§ä»¶ï¼Œå¦‚ä¸€çº§äºŒçº§selectï¼Œdatepickerï¼Œåœ°ç†ä½ç½®é€‰æ‹©å™¨ç­‰ç­‰ï¼‰ slideråµŒå¥—çš„å¤šä¸ªcardï¼Œcardå†…éƒ¨åˆæœ‰ç»Ÿè®¡æ•°æ®éƒ¨åˆ†å’Œechartså›¾è¡¨éƒ¨åˆ†ï¼Œéšç€formpartçš„å˜åŠ¨è€Œæ›´æ”¹ã€‚ cardä¸­çš„æ•°æ®å˜åŠ¨ä¸å®šï¼Œè€Œä¸”é‡Œé¢æœ‰å¾ˆå¤šå­ç»„ä»¶ï¼Œæœ€å¼€å§‹çš„æ—¶å€™é€šä¿¡æ˜¯ç”¨propsä¸€å±‚å±‚çš„ä¼ é€’ä¸‹å»ï¼Œè¿™æ ·é‡åˆ°ä¸¤ä¸ªé—®é¢˜ï¼š ç»„ä»¶åµŒå¥—è¿‡æ·±æ—¶ï¼Œé€šè¿‡propsä¼ é€’æ—¶ï¼Œä¸­é—´ç»„ä»¶ç”±äºä¸­ä»‹ä½œç”¨éœ€è¦ä¼ é€’å¾ˆå¤šä¸­é—´æ•°æ® ä»grandparentä¼ é€’ä¸‹æ¥ï¼Œä½¿å¾—å¾ˆå¤šå®é™…å¹¶æ²¡æœ‰å˜åŒ–çš„cardä¹Ÿè¿›è¡Œäº†æ¸²æŸ“ã€‚ï¼ˆå—¯ï¼Œå¯ä»¥ç”¨should component updateæ£€æµ‹ï¼Œè¿™æ˜¯åè¯ï¼‰ã€‚ ä¸­é€”è¿›è¡Œäº†ä¸€ä¸ªé‡æ„å°±æ˜¯å¼•å…¥äº†event-bus.æ¯ä¸ªcard æ³¨å†Œç›‘å¬äº‹ä»¶ï¼Œç›‘å¬ajaxçš„successä¸­æ•°æ®çš„è¿”å›ï¼ˆåŒ…æ‹¬åº”è¯¥å˜æ›´çš„card IDï¼‰ï¼Œå¦‚æœæ˜¯è‡ªå·±è¯¥æ›´æ–°ï¼Œé‚£ä¹ˆå°±renderã€‚è€Œé‚£äº›æ— éœ€å˜åŠ¨çš„cardé€‰æ‹©å¿½ç•¥å°±å¥½ã€‚ åæ¥å†™çš„vueé¡¹ç›®ä¸­ï¼Œï¼ˆ1.0ç‰ˆæœ¬çš„æ—¶å€™è¿˜æœ‰$broadcast è·Ÿ$dispatchç­‰ç­‰ï¼‰ï¼Œ2.0ç‰ˆæœ¬ä¸­åªæœ‰$emitï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­æ³¨å†Œç›‘å¬äº‹ä»¶ï¼Œï¼ˆæœ‰ç‚¹ç‚¹åƒåªæœ‰ä¸€å±‚çš„propsä¼ é€’å‡½æ•°ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰watchæ–¹æ³•ï¼Œcomputedè®¡ç®—å±æ€§ç­‰ç­‰ï¼Œéƒ½æ˜¯å‘å¸ƒ-è®¢é˜…æ¨¡å¼çš„ä¸€ä¸ªå®ç°ã€‚ å®ç°1234567891011121314151617181920212223242526272829var event = &#123; observers: [], listen:function(eventName,fn)&#123; if(!this.observers[eventName]) this.observers[eventName] = []; this.observers[eventName].push(fn); &#125;, trigger:function()&#123; var eventName = Array.protptype.shift.call(arguments), fnArr = this.observers[eventName]; if(!fnArr|| fnArr.length===0) return false; for(var i=0;i&lt;fnArr.length;i++) fn.apply(this,arguments); &#125;&#125;var installEvent = function(obj)&#123; for(var i in evnt)&#123; obj[i] = event[i]; &#125;&#125;var salsesOffice = &#123;&#125;;installEvent(salsesOffice);salsesOffice.listen('eventName',function(v)&#123; console.log(\" person1 is listening \",v);&#125;)salsesOffice.trigger('eventName','test'); å–æ¶ˆè®¢é˜…çš„è¯ï¼Œåªéœ€è¦åœ¨fnsArré‡Œé¢spliceå³å¯ã€‚è¿™è¾¹çš„observeræ˜¯functionã€‚å…¶ä»–çš„caseæœ‰å¾ˆå¤šï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»è¯´è¿‡äº†ï¼Œä¹¦ä¸­æåˆ°çš„ä¾‹å­æœ‰ç½‘ç«™ç™»å½• ä¸Šé¢çš„æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œåœ¨observerä»£ç é‡Œï¼Œéœ€è¦çŸ¥æ™“å®ƒç›‘å¬çš„å¯¹è±¡ï¼Œå³loginã€‚é‚£ä¹ˆæœ‰ä¸€ç§æ–¹æ³•æ˜¯å»ºç«‹ä¸€ä¸ªå…¨å±€çš„äº‹ä»¶å¯¹è±¡ï¼Œç±»ä¼¼äºä¸­ä»‹è€…ï¼Œå»è¿›è¡Œäº‹ä»¶çš„ç»Ÿç­¹åˆ†é…ã€‚è®¢é˜…è€…ä¸éœ€è¦äº†è§£æ¶ˆæ¯æ¥è‡ªå“ªä¸ªå‘å¸ƒè€…ï¼Œå‘å¸ƒè€…ä¹Ÿä¸çŸ¥é“æ¶ˆæ¯ä¼šæ¨é€ç»™å“ªäº›è®¢é˜…è€…ï¼ŒEventä½œä¸ºä¸€ä¸ªç±»ä¼¼â€œä¸­ä»‹è€…â€çš„è§’è‰²ï¼ŒæŠŠè®¢é˜…è€…å’Œå‘å¸ƒè€…è”ç³»èµ·æ¥ã€‚ 123456789101112131415//å…¨å±€Eventå¯¹è±¡var Event = (function()&#123; var observers = &#123;&#125;,//&#123;'eventName1':[fn1,fn2],'eventName2':[watcher1,watcher2]&#125; listen,trigger,remove; //ä¸‰ä¸ªå‡½æ•°çš„å®šä¹‰ //... return&#123; listen: listen, trigger: trigger, remove: remove &#125;&#125;)();Event.listen('eventName1',fn1);Event.trigger('eventName1',param1);Event.remove('eventName1',fn1); å…¨å±€eventå¯¹è±¡çš„ä¸€ä¸ªä¸è¶³ä¹‹å¤„æ˜¯ä¼šé€ æˆå‘½åå†²çªï¼Œå› æ­¤å¯ä»¥æ·»åŠ namespaceï¼Œå…·ä½“ä»£ç è§ä¹¦ã€‚ åè¯æ˜¯ï¼Œæ¥¼ä¸»ç”¨eventé‡æ„çš„reactçš„é¡¹ç›®åæ¥åˆæ¢å›å»äº†ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºä¸€æ˜¯æ€§èƒ½é—®é¢˜å¯ä»¥ç”¨shouldcomponentupdateæ¥è§£å†³ï¼Œå¦ä¸€æ–¹é¢ï¼Œå¤§é‡çš„eventä¸å¥½è¿½è¸ªä¸€ä¸ªäº‹ä»¶çš„åŒæ–¹ï¼Œé‚£ä¹ˆæ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„è”ç³»å°±è¢«éšè—åˆ°äº†èƒŒåã€‚æˆ‘ä»¬æœ€ç»ˆä¼šæä¸æ¸…æ¥šæ¶ˆæ¯æ¥è‡ªå“ªä¸ªæ¨¡å—ï¼Œæˆ–è€…æ¶ˆæ¯ä¼šæµå‘å“ªäº›æ¨¡å—ï¼Œæ„Ÿè§‰ä¸€ä¸ªä»£ç é‡Œå……æ–¥ç€è¶Šè¿‡ç»„ä»¶çš„æ”»å‡»æ›²çº¿..=.= ä½œç”¨é—®ï¼š è·ŸåŠ äº†å›è°ƒçš„ä»£ç†æ¨¡å¼æœ‰å•¥åŒºåˆ«ï¼Ÿ å¯ä»¥ä¸å†æ˜¾å¼è°ƒç”¨æŸä¸€ä¸ªå‡½æ•°ï¼Œè¾¾åˆ°æ¾æ•£è€¦åˆï¼Œæ¯”å¦‚è¯´ï¼Œä¹‹å‰åœ¨ç™»å½•æˆåŠŸçš„å›è°ƒé‡Œé¢å¤„ç†headerï¼Œnavçš„ä¿¡æ¯ï¼Œå½“æ¨¡å—å¤šäº†çš„è¯ä¼šè¦ä¸åœä¿®æ”¹loginæˆåŠŸå›è°ƒï¼Œç°åœ¨ä¸éœ€è¦åŠ¨ç™»é™†æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼Œåªè¦å„è‡ªç›‘å¬å°±å¥½ï¼Œå¯ä»¥ä¸æ–­æ·»åŠ observerã€‚ è€Œä¸”ï¼Œå±€éƒ¨è®¢é˜…è€…æ¨¡å¼æ˜¯åœ¨æŸä¸€æ–¹åŠ äº†æ¥å£ï¼Œè€Œä»£ç†æ˜¯åœ¨ä¸¤æ–¹åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªä¸­é—´å¤„ç†æ–¹ï¼šä¸€ç§æ˜¯ä¿æŠ¤ï¼Œå¦ä¸€ç§æ˜¯å¤šåšä¸€äº›æ€§èƒ½çš„é¢å¤–å¤„ç†ï¼Œæ¯”å¦‚åˆå¹¶è¯·æ±‚ï¼Œé¢„åŠ è½½ï¼Œæ‡’åŠ è½½ç­‰ç­‰ã€‚é‚£ä¸­ä»‹è€…æ¨¡å¼å‘¢â€¦ å…¶ä»– ç¬¦åˆâ€œå¥½è±ååŸåˆ™â€ ç¦»çº¿æ¶ˆæ¯çš„å­˜åœ¨å¿…è¦æ€§ï¼š åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¹¶ä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§è®¢é˜…-å‘å¸ƒçš„æ—¶é—´é¡ºåºï¼Œæ¯”å¦‚ajaxå›è°ƒä¸­ä¼štriggerä¸€ä¸ªäº‹ä»¶ï¼Œä½†æ˜¯triggeräº‹ä»¶çš„æ—¶å€™ï¼Œå¯èƒ½æ²¡æœ‰è®¢é˜…è€…ï¼Œæˆ–è€…è®¢é˜…è€…è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ— æ³•æ•è·åˆ°è¿™ä¸ªäº‹ä»¶çš„å‘ç”Ÿï¼Œå°±ä¼šé—æ¼äº‹ä»¶ï¼Œå› æ­¤æœ‰å¿…è¦å°†æš‚æ—¶è¿˜æ²¡æœ‰æ¥å—è€…çš„äº‹ä»¶å­˜å‚¨ä¸‹æ¥ï¼Œå½“å‡ºç°è®¢é˜…è€…æ—¶å‘é€ç»™ä»–ä»¬ï¼Œæ‰§è¡Œä¸€æ¬¡å³å¯ï¼Œé˜…åå³ç„šâ€¦ ä¸­ä»‹è€…æ¨¡å¼å½“å¯¹è±¡å˜å¤šæ—¶ï¼Œä»–ä»¬ä¹‹é—´çš„å…³ç³»é”™ç»¼å¤æ‚ï¼Œä¸­ä»‹è€…æ¨¡å¼å°±æ˜¯ä¸ºäº†è§£é™¤å¯¹è±¡ä¹‹é—´çš„ç´§å¯†è€¦åˆå…³ç³»è€Œå­˜åœ¨çš„ï¼Œåº”ç”¨ä»¥åå¯¹è±¡ä¹‹é—´éƒ½é€šè¿‡ä¸­ä»‹è€…é€šä¿¡ï¼Œäº’ç›¸ä¸é€é•œï¼Œä½¿å¾—å¤šå¯¹å¤šå…³ç³»å˜ä¸ºæ¯”è¾ƒç®€å•çš„ä¸€å¯¹å¤šå…³ç³»ã€‚ å…¶å®ä¹‹å‰åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­æˆ‘ä»¬ä¹Ÿæ¶‰åŠåˆ°äº†ä¸­ä»‹è€…æ¨¡å¼ï¼Œå°±æ˜¯æœ€åçš„å…¨å±€Eventå¯¹è±¡ï¼Œå®ƒå¯¹å¯¹è±¡ä¹‹é—´çš„æ³¨å†Œè§¦å‘è¿›è¡Œäº†ç»Ÿç­¹ã€‚ æ—¢ç„¶æ”¾ä¸€èµ·äº†ï¼Œå°±åšä¸ªåŒºåˆ†å§ï¼š è§‚å¯Ÿè€…æ¨¡å¼æœ€æœ´ç´ çš„æ˜¯Aï¼ŒBä¹‹é—´è¿›è¡Œå¤„ç†ï¼ŒAéœ€è¦çŸ¥é“Bçš„å­˜åœ¨ï¼Œå°±æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚æ”¹è¿›ä¸€ç‚¹çš„æ–¹æ³•æ˜¯ç”¨ä¸­é—´çš„å…¨å±€Eventå¯¹è±¡å»è¿›è¡Œç®¡ç†ã€‚ä»”ç»†æƒ³ä¸€ä¸‹çš„è¯ï¼Œä¸­ä»‹è€…æ¨¡å¼æ˜¯ä¸ºäº†è§‚å¯Ÿè€…æ¨¡å¼åšæœåŠ¡çš„ï¼Œå®ƒåªæ˜¯ç”¨æ¥å¤„ç†åŒæ–¹ä¹‹é—´çš„å…³ç³»ï¼Œè€Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ç”¨æ¥è§£å†³æ¶ˆæ¯é€šçŸ¥é—®é¢˜çš„ï¼Œä¸­ä»‹è€…æ˜¯ä¸ºäº†è§‚å¯Ÿè€…æ¨¡å¼æ›´å¥½çš„è¿›è¡Œè€Œå­˜åœ¨çš„ã€‚ ç›—å›¾ä¸€å¼ â€¦ ä¹¦ä¸­çš„ä¸€ä¸ªä¾‹å­æ˜¯ç©æ¸¸æˆï¼Œè®¾ç”¨æˆ·ä¸ºA,B,Câ€¦æ·»åŠ ä¸€ä¸ªä¸­é—´äººï¼Œæ¯æ¬¡A,Bç­‰æœ‰æ“ä½œæ—¶é€šçŸ¥ä¸­é—´äººã€‚ 12345678910111213/** * ä¸­ä»‹è€…æ¨¡å¼çš„è¯ï¼Œéœ€è¦å„å¯¹è±¡åœ¨æ“ä½œæ—¶é€šçŸ¥ä¸­ä»‹è€… * @return &#123;[type]&#125; [description] */Player.prototype.die = function() &#123; this.state = 'dead'; playerDirector.ReceiveMessage('playerDead', this); // ç»™ä¸­ä»‹è€…å‘é€æ¶ˆæ¯ï¼Œç©å®¶æ­»äº¡ï¼Œthiså‘ŠçŸ¥ä¸­ä»‹è€…å½“å‰å¯¹è±¡&#125;/*******************ç§»é™¤ç©å®¶*****************/Player.prototype.remove = function()&#123; playerDirector.ReceiveMessage( 'removePlayer', this ); // ç»™ä¸­ä»‹è€…å‘é€æ¶ˆæ¯ï¼Œç§»é™¤ä¸€ä¸ªç©å®¶&#125;;&#125; ä¸Šé¢çš„ä»£ç æ˜¯å¯¹è±¡é€šçŸ¥ä¸­ä»‹è€…ï¼Œé‚£ä¸­ä»‹è€…æ”¶åˆ°è¿™äº›æ¶ˆæ¯åè¿›è¡Œå¤„ç†ï¼Œä¼šå°†ä¿¡æ¯å‘é€ç»™å„å¯¹è±¡ï¼Œè¿™è¾¹å¯ä»¥éå†ï¼Œè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ã€‚ 123456 //ä¸­ä»‹è€…é€šçŸ¥å…¶ä»–äººif (all_dead === true) &#123; // å…¨éƒ¨æ­»äº¡ for ( var i = 0, player; player = teamPlayers[ i++]; )&#123; player.lose(); // æœ¬é˜Ÿæ‰€æœ‰ç©å®¶lose &#125; &#125;&#125; è€Œå…³äºè¿™ä¸ªä¸­ä»‹è€…çš„å®ç°ä¸Šï¼Œä¹¦ä¸­æåˆ°äº†ä¸¤ç§æ–¹æ³•ï¼š&gt; åˆ©ç”¨å‘å¸ƒâ€”è®¢é˜…æ¨¡å¼ã€‚å°†playerDirectorå®ç°ä¸ºè®¢é˜…è€…ï¼Œå„playerä½œä¸ºå‘å¸ƒè€…ï¼Œä¸€æ—¦playerçš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œä¾¿æ¨é€æ¶ˆæ¯ç»™playerDirectorï¼ŒplayerDirectorå¤„ç†æ¶ˆæ¯åå°†åé¦ˆå‘é€ç»™å…¶ä»–playerã€‚åœ¨playerDirectorä¸­å¼€æ”¾ä¸€äº›æ¥æ”¶æ¶ˆæ¯çš„æ¥å£ï¼Œå„playerå¯ä»¥ç›´æ¥è°ƒç”¨è¯¥æ¥å£æ¥ç»™playerDirectorå‘é€æ¶ˆæ¯ï¼Œplayeråªéœ€ä¼ é€’ä¸€ä¸ªå‚æ•°ç»™playerDirectorï¼Œè¿™ä¸ªå‚æ•°ï¼ˆä¹¦ä¸­ä¸º this ï¼Œå³å½“å‰å¯¹è±¡ï¼‰çš„ç›®çš„æ˜¯ä½¿playerDirectorå¯ä»¥è¯†åˆ«å‘é€è€…ã€‚åŒæ ·ï¼ŒplayerDirectoræ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åä¼šå°†å¤„ç†ç»“æœåé¦ˆç»™å…¶ä»–playerã€‚ ä¸­ä»‹è€…æ¨¡å¼æ˜¯è¿åˆè¿ªç±³ç‰¹æ³•åˆ™çš„ä¸€ç§å®ç°ã€‚è¿ªç±³ç‰¹æ³•åˆ™ä¹Ÿå«æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼Œæ˜¯æŒ‡ä¸€ä¸ªå¯¹è±¡åº”è¯¥å°½å¯èƒ½å°‘åœ°äº†è§£å¦å¤–çš„å¯¹è±¡ï¼ˆç±»ä¼¼ä¸å’Œé™Œç”Ÿäººè¯´è¯ï¼‰ã€‚ ã€summaryã€‘ä¸­ä»‹è€…æ¨¡å¼æ€»ç»“æ¥è¯´ï¼Œæ˜¯å°†è€¦åˆè½¬å«åˆ°ä¸€ä¸ªä¸­é—´äººå»ç®¡ç†è¿™äº›ï¼Œç±»ä¼¼äºâ€œä¸Šå¸ä¹‹æ‰‹â€ï¼Œè§£å†³çš„æ˜¯å¯¹è±¡ä¹‹é—´çš„å…³ç³»ã€‚ è£…é¥°å™¨æ¨¡å¼åœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œè®¸å¤šæ—¶å€™éƒ½å¹¶ä¸å¸Œæœ›æŸä¸ªç±»å¤©ç”Ÿå°±éå¸¸åºå¤§ï¼Œä¸€æ¬¡æ€§åŒ…å«è®¸å¤šèŒè´£ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è£…é¥°è€…æ¨¡å¼ï¼Œä¸åœçš„åŒ…è£…å¯¹è±¡ï¼Œç”Ÿæˆä¸€ä¸ªåˆä¸€ä¸ªåµŒå¥—çš„å¯¹è±¡ï¼Œæ¯æ¬¡éƒ½å¢åŠ ä¸€ä¸¢ä¸¢åŠŸèƒ½ï¼Œç±»ä¼¼äºä¿„ç½—æ–¯å¥—å¨ƒã€‚ è£…é¥°è€…æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°ç»™æŸä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œè€Œä¸ä¼šå½±å“ä»è¿™ä¸ªç±»ä¸­æ´¾ç”Ÿçš„å…¶ä»–å¯¹è±¡ã€‚ è¿™ç§åŠŸèƒ½é€šå¸¸å¯ä»¥ç”¨ç»§æ‰¿æ¥åšï¼Œä½†æ˜¯å­˜åœ¨ä¸€ç‚¹é—®é¢˜ï¼Œå°±æ˜¯ï¼š ä¼šé€ æˆçˆ¶ç±»å’Œå­ç±»çš„å¼ºè€¦åˆï¼Œçˆ¶ç±»æ”¹å˜æ—¶ï¼Œå­ç±»ä¼šéšä¹‹å˜åŠ¨ å½“åŠŸèƒ½å¢å¤šæ˜¯ï¼Œä¼šå‡ºç°å¤§é‡çš„å­ç±» è€Œè£…é¥°å™¨æ¨¡å¼èƒ½å¤Ÿåœ¨ä¸æ”¹å˜å¯¹è±¡è‡ªèº«çš„åŸºç¡€ä¸Šï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ç»™å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£ã€‚è·Ÿç»§æ‰¿ç›¸æ¯”ï¼Œè£…é¥°è€…æ˜¯ä¸€ç§æ›´è½»ä¾¿çµæ´»çš„åšæ³•ã€‚ JavaScriptå¤©ç„¶å¯ä»¥å¢åŠ å±æ€§/èŒè´£ï¼Œå¦‚ä¸‹ï¼šobj.address = obj.address +&#39;ç¦ç”°åŒº&#39; ç¤ºä¾‹1234567891011//åŸå§‹var plane = &#123; fire: function()&#123; console.log( 'å‘å°„æ™®é€šå­å¼¹' ); &#125; &#125;var _fire = plane.fire;plane.fire = function()&#123; _fire(); someOtherFun();&#125; è¿™ç§æ–¹æ³•æœ€ç®€å•ç²—æš´ï¼Œç›´æ¥æ”¹å†™äº†åŸæœ‰æ–¹æ³•ï¼ˆè¦†ç›–ï¼‰ï¼Œå¢åŠ äº†ä¸­é—´å˜é‡_fireï¼ˆä¸€å®šè¦å¢åŠ â€¦å¦åˆ™å°±æ˜¯é€’å½’è°ƒç”¨äº†=ã€‚=ï¼‰ã€‚è€Œä¸”æœ‰æ—¶å€™ä¼šé‡åˆ°thisè¢«åŠ«æŒçš„é—®é¢˜ï¼Œæ¯”å¦‚document.getElementByIdä¸­çš„this.æ­£ç¡®çš„å†™æ³•å¦‚ä¸‹ 123456789101112131415161718Function.prototype.before = function(beforeFn)&#123; var fn = this; return function () &#123; beforeFn.apply(this,arguments); return fn.apply(this,arguments) &#125;&#125;var test = function(param)&#123; console.log('test',param);&#125;var after = test.before(function(param2)&#123; console.log('before ',param2); &#125;);after('final result'); è¿˜æœ‰ä¸€ä¸ªvalidateçš„éƒ¨åˆ†ï¼Œåœ¨ç­–ç•¥æ¨¡å¼é‚£è¾¹æ·»åŠ äº†éƒ¨åˆ†ä»£ç ï¼Œå¯ä»¥èµ°è¿‡è·¯è¿‡çœ‹ä¸€ä¸‹ï¼šï¼‰ è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼ ä»£ç†æ¨¡å¼é€šå¸¸åªæœ‰ä¸€å±‚ä»£ç†-æœ¬ä½“çš„å¼•ç”¨ï¼Œè€Œè£…é¥°è€…æ¨¡å¼ç»å¸¸ä¼šå½¢æˆä¸€æ¡é•¿é•¿çš„è£…é¥°é“¾ã€‚ è£…é¥°å™¨æ¨¡å¼ä¸ä»£ç†æ¨¡å¼éƒ½æ˜¯ä¸ºæœ¬ä½“æ·»åŠ åŠŸèƒ½ï¼Œä½†æ˜¯å‰è€…æ˜¯çœŸæ­£æ·»åŠ é¢å¤–åŠŸèƒ½ï¼Œè€Œåè€…æ˜¯å°†åŸæœ‰åŠŸèƒ½ä¼˜åŒ–ï¼Œå¦‚æ€§èƒ½ç­‰ é€‚é…å™¨æ¨¡å¼è¿™ç§æ¨¡å¼ç›¸å¯¹ç®€å•ï¼Œä¸»è¦æ˜¯é’ˆå¯¹æ¥å£çš„å…¼å®¹ä¿®è¡¥å·¥ä½œï¼Œä½¿å¾—Aï¼ŒBä¸¤ä¸ªå¯¹å¤–å‘ˆç°çš„æ¥å£ä¸€è‡´ã€‚ 12345678910111213141516var googleMap = &#123; show: function() &#123; console.log('å¼€å§‹æ¸²æŸ“è°·æ­Œåœ°å›¾'); &#125; &#125;;var baiduMap = &#123; display: function() &#123; console.log('å¼€å§‹æ¸²æŸ“ç™¾åº¦åœ°å›¾'); &#125;&#125;;//here display-&gt; showå…¼å®¹var baiduMapAdapter = &#123; show: function()&#123; return baiduMap.display(); &#125; &#125;; ####åŒºåˆ† è£…é¥°å™¨æ¨¡å¼ä¼šå½¢æˆé•¿é•¿çš„åŒ…è£…é“¾ã€ä»£ç†å’Œé€‚é…å™¨åªåŒ…è£…ä¸€æ¬¡ã€‚ä»£ç†æ¨¡å¼æ˜¯ä¸å˜åŠŸèƒ½ï¼Œåªæ˜¯åŠŸèƒ½æ›´åŠ èªæ˜ï¼Œæ€§èƒ½æ›´å¥½ï¼Œè£…é¥°å™¨æ˜¯å¢åŠ åŠŸèƒ½ï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯æ”¹å¤–éƒ¨æ¥å£ï¼Œä¸æ¶‰åŠå†…éƒ¨åŠŸèƒ½ã€‚ äº«å…ƒæ¨¡å¼å¸¸ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œå¦‚æœé¡¹ç›®ä¸­æœ‰å¤§é‡çš„ç›¸ä¼¼å¯¹è±¡ï¼Œå¯ä»¥æŠŠä»–ä»¬çš„çŠ¶æ€æŠ½å–æˆå¯ä»¥å…±ç”¨çš„å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çš„åœºæ™¯çŠ¶æ€ã€‚ å¦‚ä¹¦ä¸­ä»‹ç»åˆ°çš„å†…è¡£å·¥å‚ï¼Œmodelå¯¹è±¡çš„å±æ€§ä¸ºæ€§åˆ«ï¼Œæ•´ä¸ªé¡¹ç›®ä¸­è®¾ç½®ä¸¤ä¸ªå¯¹è±¡ï¼Œç”·å¥³æ¨¡ç‰¹ï¼Œç„¶åè¡£æœè®¾ç½®ä¸ºå¤–éƒ¨çŠ¶æ€ã€‚ 12345678910var Model = function( sex )&#123; this.sex = sex;&#125;;Model.prototype.takePhoto = function()&#123; console.log( 'sex= ' +this.sex +' underwear=' +this.underwear);&#125;;for ( var j = 1; j &lt;= 50; j++)&#123; femaleModel.underwear = 'underwear' +j; //å¤–éƒ¨çŠ¶æ€ femaleModel.takePhoto();&#125;; é€šå¸¸æ¥è¯´ï¼Œå†…éƒ¨çŠ¶æ€æœ‰å¤šå°‘ç§ç»„åˆï¼Œç³»ç»Ÿä¸­å°±æœ‰å¤šå°‘ä¸ªå¯¹è±¡ã€‚ å¦ä¸€ä¸ªcaseå°±æ˜¯æ–‡ä»¶ä¸Šä¼ ï¼ˆæ•²é»‘æ¿ï¼Œä¹‹å‰æ–‡ä»¶ä¸Šä¼ çš„æ—¶å€™æˆ‘ä»¬ç”¨è¿‡è¿­ä»£å™¨æ¨¡å¼ï¼‰å¯ä»¥çœ‹åˆ°ä¹‹å‰æ˜¯æ¯ä¸ªæ–‡ä»¶å¯¹è±¡é‡Œé¢åŒ…æ‹¬äº†è¿™ä¹ˆå¤šå±æ€§é‚£ä¹ˆç”¨äº«å…ƒæ¨¡å¼çš„è¯è¦æŠŠè¿™äº›å±æ€§åˆ†ç±»ï¼ŒæŠ½å–å‡ºâ€œä¸Šä¼ ç±»å‹â€è¿™ä¸ªå†…éƒ¨å±æ€§ï¼Œå…¶ä»–çš„éƒ½å½’ç»“ä¸ºå¤–éƒ¨å±æ€§è¿™è¾¹å€ŸåŠ©é—­åŒ…å®ç°ä¸€ä¸ªå…±äº«çš„å¯¹è±¡ï¼ˆä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„ç²—é™‹å®ç°ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445var Upload = function(uploadType) &#123; this.uploadType = uploadType;&#125;;var UploadFactory = (function() &#123; var createdFlyWeightObjs = &#123;&#125;; return &#123; create: function(uploadType) &#123; if (createdFlyWeightObjs[uploadType]) &#123; return createdFlyWeightObjs[uploadType]; &#125; return createdFlyWeightObjs[uploadType] = new Upload(uploadType); &#125; &#125; &#125;)();var uploadManager = (function() &#123; var uploadDatabase = &#123;&#125;; return &#123; add: function(id, uploadType, fileName, fileSize) &#123; //ç”Ÿæˆå¯¹è±¡ï¼Œ+ å¤–éƒ¨çŠ¶æ€æ”¾åˆ°ä¸€ä¸ªdatabaseé‡Œé¢å»ï¼Œ var flyWeightObj = UploadFactory.create(uploadType); //... uploadDatabase[id] = &#123; fileName: fileName, fileSize: fileSize, dom: dom &#125;; return flyWeightObj; &#125;, setExternalState: function(id, flyWeightObj) &#123; //ç»™å•åˆ©å¯¹è±¡æŒ‚é å¤–éƒ¨å±æ€§ï¼Œå…¶å®æ˜¯æ›¿æ¢å¤–éƒ¨å±æ€§ // internalObj = // &#123; // uploadType: 'html5', //ä¸å˜çš„éƒ¨åˆ† // // filename // filesize // dom //è‹¥å¹²ä¸ªå¯¹è±¡å„è‡ªæœ‰çš„ï¼Œåœ¨å¾ªç¯ä¸­æ˜¯ä¸æ–­æ›¿æ¢çš„ // // &#125; var uploadData = uploadDatabase[id]; for (var i in uploadData) &#123; flyWeightObj[i] = uploadData[i]; &#125; &#125; &#125;&#125;)(); é™¤æ­¤ä¹‹å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œäº«å…ƒçŠ¶æ€å¯ä»¥åªæœ‰å¤–éƒ¨çŠ¶æ€ï¼ˆå†…éƒ¨çŠ¶æ€åªæœ‰ä¸€ä¸ªï¼‰ï¼Œè¿™ä¸ªæ—¶å€™å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ã€‚ å¦ï¼Œè¿˜æœ‰ä¸€ç§ä¸åŒºåˆ†å†…å¤–çŠ¶æ€çš„å¯¹è±¡æ± ï¼Œå¯ä»¥ç”¨äºDOMèŠ‚ç‚¹çš„å›æ”¶å’Œåˆ›å»ºã€‚ çŠ¶æ€æ¨¡å¼ä¹‹å‰æˆ‘ä»¬è¯´è¿‡åˆ©ç”¨é¸­å­ç±»å‹æ¥é¿å…if-elseçš„åå¤codeï¼Œæ˜¯å°†æ¥å£/å‡½æ•°çš„ä¸åŒè½¬å˜ä¸ºå¯¹è±¡çš„å¤šæ€æ€§ï¼Œè¿™è¾¹è¦ä»‹ç»çš„çŠ¶æ€æ¨¡å¼åˆ™æ˜¯æŠŠçŠ¶æ€å°è£…æˆç±»ï¼ŒçŠ¶æ€ä¸­çš„åŒä¸€æ¥å£å‡½æ•°å®šä¹‰äº†çŠ¶æ€çš„åˆ‡æ¢ã€‚ æ¯ç§çŠ¶æ€éƒ½å°è£…æˆå•ç‹¬çš„ç±»ï¼Œè·Ÿæ­¤ç§çŠ¶æ€æœ‰å…³çš„è¡Œä¸ºéƒ½è¢«å°è£…åœ¨è¿™ä¸ªç±»çš„å†…éƒ¨ï¼Œæ¯æ¬¡çŠ¶æ€å˜åŒ–æ—¶æŠŠè¯·æ±‚å§”æ‰˜ç»™å½“å‰çš„çŠ¶æ€å¯¹è±¡å³å¯ï¼Œè¯¥çŠ¶æ€å¯¹è±¡ä¼šè´Ÿè´£æ¸²æŸ“å®ƒè‡ªèº«çš„è¡Œä¸ºã€‚ è°ƒç”¨çš„æ—¶å€™ç›´æ¥æ˜¯ 12this.obj.setState(someState)this.curState.someAction() ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªçŠ¶æ€ç±»éœ€è¦å®ç°åŒæ ·çš„æ¥å£ï¼Œç”±äºè·Ÿæ¨¡æ¿æ–¹å¼ä¸­æˆ‘ä»¬ä»‹ç»è¿‡çš„ä¸€æ ·ï¼ŒJavaScriptç›´åˆ°æ‰§è¡Œæ—¶æ‰ä¼šæŠ¥é”™ï¼Œï¼ˆthrow errorï¼‰ã€‚ å…¶å®æƒ³ä¸€ä¸‹ï¼ŒVueæˆ–è€…reactä¸­å°±æœ‰çŠ¶æ€æ¨¡å¼çš„æ¦‚å¿µï¼Œreactä¸­ç›´æ¥å°±æ˜¯stateå¯¹è±¡ï¼Œæ¯æ¬¡éƒ½å»setstateåˆ‡æ¢çŠ¶æ€ï¼Œå»é‡æ–°æ¸²æŸ“ï¼Œåˆ‡æ¢çŠ¶æ€ååˆä¼šæœ‰æ–°çš„è¡Œä¸ºï¼Œå°±æ˜¯è¿™ä¸ªçŠ¶æ€ä¸‹çš„æ“ä½œã€‚Vueä¸­å¯¹åº”çš„å¤§æ¦‚å°±æ˜¯dataå¯¹è±¡äº†ï¼Œåªä¸è¿‡è¿™ä¸ªçŠ¶æ€æ¨¡å¼æˆ‘ä»¬æ„Ÿå—çš„ä¸å¤ªæ˜æ˜¾ï¼Œåœ°è¡¨ä»¥ä¸Šå¯¹å¼€å‘äººå‘˜é€æ˜çš„æ„Ÿè§‰ã€‚ çŠ¶æ€æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼ ç­–ç•¥æ¨¡å¼ä¸­çš„å„ä¸ªç­–ç•¥ç±»ä¹‹é—´æ˜¯å¹³ç­‰åˆå¹³è¡Œçš„ï¼Œå®ƒä»¬ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ï¼Œä¹‹é—´çš„åˆ‡æ¢æ˜¯ç”±ç”¨æˆ·æ‰‹åŠ¨æ“ä½œçš„ã€‚ çŠ¶æ€æ¨¡å¼ä¸­ï¼ŒçŠ¶æ€å’ŒçŠ¶æ€å¯¹åº”çš„è¡Œä¸ºæ˜¯æ—©å·²è¢«å°è£…å¥½çš„ï¼ŒçŠ¶æ€ä¹‹é—´çš„åˆ‡æ¢ä¹Ÿæ—©è¢«è§„å®šå®Œæˆï¼Œè¢«å°è£…åœ¨äº†çŠ¶æ€ç±»å†…éƒ¨ï¼Œå¯¹å®¢æˆ·æ¥è¯´ï¼Œå¹¶ä¸éœ€è¦äº†è§£è¿™äº›ç»†èŠ‚ã€‚è¿™æ­£æ˜¯çŠ¶æ€æ¨¡å¼çš„ä½œç”¨æ‰€åœ¨ å…¶ä»–è®¾è®¡åŸåˆ™ï¼š å•ä¸€èŒè´£åŸåˆ™ï¼šä»£ç†æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼ï¼ˆå›è°ƒå‡½æ•°ï¼‰ã€å•ä¾‹æ¨¡å¼ï¼ˆé€šç”¨çš„åˆ›å»ºç§»åˆ°å¤–éƒ¨ï¼‰ æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆè¿ªç±³ç‰¹æ³•åˆ™ï¼‰ï¼šåº”å½“å°½é‡å‡å°‘å¯¹è±¡ä¹‹é—´çš„äº¤äº’ã€‚å¸¸è§çš„åšæ³•æ˜¯å¢åŠ ä¸€ä¸ªä¸­é—´äººï¼Œå¦‚ä¸­ä»‹è€…æ¨¡å¼ ï¼Œå»ç®¡ç†ä»–ä»¬ä¹‹é—´çš„å…³ç³»ã€‚ å¤–è§‚æ¨¡å¼ ä¸­ä»‹è€…æ¨¡å¼ ä½œç”¨åŸŸä¹Ÿæ˜¯å¹¿ä¹‰çš„æœ€å°‘çŸ¥è¯†åŸåˆ™çš„ä½“ç°ï¼Œé™å®šåœ¨ä¸€ä¸ªå°åŒºåŸŸå†…known å¼€æ”¾å°é—­åŸåˆ™ï¼š å¯æ‰©å±•ï¼Œä½†ä¸å…è®¸ä¿®æ”¹ å¯¹è±¡çš„å¤šæ€æ€§ä»£æ›¿åˆ†æ”¯ åœ¨å˜åŒ–çš„åœ°æ–¹æ”¾ç½®hookï¼Œå›è°ƒ è®¾è®¡æ¨¡å¼ä¸­çš„å®è·µï¼š å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆå¢åŠ è®¢é˜…è€…ä¸éœ€è¦æ”¹åŠ¨å‘å¸ƒè€…å†…éƒ¨å‡½æ•°ï¼‰ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šï¼ˆå¢åŠ å­ç±»ï¼‰ ç­–ç•¥æ¨¡å¼ ä»£ç†æ¨¡å¼ï¼ˆæœ¬ä½“å®ç°åŸºæœ¬çš„åŠŸèƒ½ä¸åŠ¨å°±å¥½ï¼‰ èŒè´£é“¾æ¨¡å¼ å‰è¾ˆæ€»ç»“çš„è¿™äº›è®¾è®¡åŸåˆ™é€šå¸¸æŒ‡çš„æ˜¯å•ä¸€èŒè´£åŸåˆ™ã€é‡Œæ°æ›¿æ¢åŸåˆ™ã€ä¾èµ–å€’ç½®åŸåˆ™ã€æ¥å£éš”ç¦»åŸåˆ™ã€åˆæˆå¤ç”¨åŸåˆ™å’Œæœ€å°‘çŸ¥è¯†åŸåˆ™ã€‚ ä»£ç ç¼–å†™æ—¶çš„å»ºè®®ï¼š æç‚¼å‡½æ•° åˆå¹¶é‡å¤çš„æ¡ä»¶ç‰‡æ®µ åˆ†æ”¯æ¡ä»¶è¯­å¥æç‚¼æˆå‡½æ•°ä¾¿äºè°ƒè¯• åˆç†ä½¿ç”¨å¾ªç¯ï¼ˆè¿­ä»£å™¨æ¨¡å¼ï¼‰ä»£æ›¿if-else æå‰è®©å‡½æ•°return (å¦‚æœæœ‰å¤šä¸ªif-elseçš„haul) ä½¿ç”¨objectä½œä¸ºå‚æ•°æ¥ä»£æ›¿å¤šä¸ªå‚æ•°ï¼ˆå› ä¸ºä¼šæœ‰é¡ºåºçš„é—®é¢˜ï¼Œå½“ç„¶es6çš„è¯è¿˜å¯ä»¥è§£æ„ï¼‰ å°½é‡å‡å°‘å‚æ•°æ•°é‡ å¤šæ¡ä»¶åµŒå¥—æ—¶å°‘ç”¨ä¸‰ç›®è¿ç®—ç¬¦ åˆ†è§£å¤§å‹ç±» to distinguish [ ] å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ [ ] è£…é¥°å™¨æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ [ ] äº«å…ƒæ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ [ ] æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸è£…é¥°å™¨æ¨¡å¼","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yoursite.com/tags/è®¾è®¡æ¨¡å¼/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/tags/è¯»ä¹¦ç¬”è®°/"}]},{"title":"javascriptè®¾è®¡æ¨¡å¼ï¼ˆäºŒï¼‰","slug":"design-principle2","date":"2017-01-31T01:34:58.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2017/01/31/design-principle2/","link":"","permalink":"http://yoursite.com/2017/01/31/design-principle2/","excerpt":"","text":"ä»£ç†æ¨¡å¼ ç”¨æˆ·ä¸æ–¹ä¾¿ç›´æ¥è®¿é—®ä¸€ä¸ªå¯¹è±¡æˆ–è€…ä¸æ»¡è¶³éœ€è¦çš„æ—¶å€™ï¼Œé€šè¿‡å¦ä¸€ä¸ªå¯¹è±¡Bå»è¿›è¡Œä»£ç†æ§åˆ¶è®¿é—®ã€‚å¯¹ç”¨æˆ·æ¥è¯´ï¼Œèƒ½æ“ä½œçš„å°±æ˜¯Bï¼ŒBå†æ¥è½¬äº¤è¯·æ±‚ç»™targetï¼Œè€Œä¸ç”¨ç”¨æˆ·æ¥ç®¡B-&gt;targetåˆ°åº•åšäº†ä»€ä¹ˆæ“ä½œã€‚ æœ€æœ´ç´ çš„ä»£ç†æ¨¡å¼å°±æ˜¯ä¸‹é¢çš„ä»£ç ï¼Œåªæ˜¯åšä¸€ä¸ªè½¬å‘è¯·æ±‚ 1234567891011121314151617181920ï¼ˆfunction()&#123; var Flower = function()&#123;&#125; var xiaoming = &#123; sendFlower:function(receiver)&#123; var flower = new Flower() receiver.receiveFlower(flower) &#125; &#125;, var proxier = &#123; receiveFlower: function()&#123; //å½“ç„¶è¿™è¾¹åªæ˜¯ä»£ç†æ“ä½œï¼Œå®é™…ä¸Šå¯èƒ½è¿˜ä¼šæœ‰ä¿æŠ¤æ£€æŸ¥ï¼Œæ‹’ç»ï¼Œæ€§èƒ½ä¼˜åŒ–ç­‰æ“ä½œ target.receiveFlower(flower) &#125;; &#125;, var target = &#123; receiveFlower: function()&#123; console.log(\" i receive the flower, thx!\"); &#125;; &#125;&#125;ï¼‰ ä¿æŠ¤ä»£ç†å’Œè™šæ‹Ÿä»£ç†ä»£ç†æ¨¡å¼åˆ†ä¸ºä¸¤ç§ï¼ŒæŒ‰ç…§ä»–ä»¬çš„åŠŸèƒ½æ¥åˆ†ç±»ï¼š ä¸€ç§æ˜¯åšä¿æŠ¤targetçš„ç”¨é€”ï¼Œæ¥å—senderçš„è¯·æ±‚ï¼Œç„¶åè¿›è¡Œä¸€äº›æ ¡éªŒï¼Œå³ä¿æŠ¤ä»£ç†ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä»£ç å°±æ˜¯ä¿æŠ¤ä»£ç†ã€‚ å¦ä¸€ç§æ˜¯æŠŠä¸€äº›å¼€é”€å¤§çš„æ“ä½œå»¶è¿Ÿåˆ°çœŸæ­£éœ€è¦å®ƒåšçš„æ—¶å€™å†å¤„ç†ï¼Œè€Œsenderæœ¬èº«ä¸åŠ¨ï¼Œä¾ç„¶åšæœ€æœ´ç´ çš„æ“ä½œï¼Œä»£ç†å»åšä¼˜åŒ–æªæ–½ï¼Œè¿™ç§æ˜¯è™šæ‹Ÿä»£ç†ã€‚ ä¸¤è€…çš„è°ƒç”¨ä¸å¤ªä¸€æ ·ï¼Œå‰è€…æ˜¯sender.sendTo(proxy),åè€…æ˜¯proxier.call(fn). æ—¥å¸¸æ¥è§¦çš„åŸºæœ¬éƒ½æ˜¯è™šæ‹Ÿä»£ç†ï¼Œï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯å®ƒçš„æœ¬ä½“å’Œä»£ç†è¦å®ç°åŒæ ·çš„æ–¹æ³•ï¼Œå³æ¥å£è¦ä¸€è‡´ï¼Œè¿™æ ·æ‰å¯ä»¥å¯¹ç”¨æˆ·é€æ˜ï¼Œä¹Ÿæ–¹ä¾¿è°ƒç”¨ï¼Œä½†JavaScriptä¸åƒé™æ€ç±»å‹è¯­è¨€ï¼Œä¸ä¼šè¿›è¡Œç¼–è¯‘æ£€æŸ¥ï¼Œå› æ­¤ï¼Œåªèƒ½åœ¨æœ€æœ«ç«¯è¿›è¡Œthrowå¼‚å¸¸æŠ›å‡ºï¼Œä½†è¿™ä¸ªæ—¶å€™å·²ç»æ˜¯æ‰§è¡ŒæœŸäº†ï¼Œæœ‰ä¸€ä¸¢ä¸¢æ™šã€‚ï¼‰ ä»–çš„ç”¨é€”æœ‰æ¯”å¦‚å®ç°å›¾ç‰‡é¢„åŠ è½½ã€åˆå¹¶httpè¯·æ±‚ã€ å›¾ç‰‡é¢„åŠ è½½ [å¤‡æ³¨]ï¼šå›¾ç‰‡é¢„åŠ è½½çš„åŸç†æ˜¯é¢„å…ˆè®¾ç½®ä¸€ä¸ªå ä½å›¾ç‰‡ï¼Œå½“çœŸæ­£çš„å›¾ç‰‡èµ„æºåŠ è½½å®Œåå»è¿›è¡Œæ›¿æ¢æ“ä½œã€‚æœ‰ä¸€ç‚¹ç‚¹åƒajaxè¯·æ±‚è·å–å‰æ”¾ç½®ä¸€ä¸ªloadingå±‚ï¼Œæ•°æ®è¿”å›åhide loadingï¼Œæ˜¾ç¤ºæœ€ç»ˆçš„ç½‘é¡µä¿¡æ¯ã€‚ 12345678910111213141516171819202122var myImage = (function()&#123; var imgNode = document.createElement( 'img' ); document.body.appendChild( imgNode ); return &#123; setSrc: function( src )&#123; imgNode.src = src; &#125; &#125;&#125;)();var proxyImage = (function()&#123; var img = new Image; img.onload = function()&#123; myImage.setSrc( this.src ); &#125; return &#123; setSrc: function( src )&#123; myImage.setSrc( 'file:// /C:/Users/svenzeng/Desktop/loading.gif' ); img.src = src; &#125; &#125; &#125;)();proxyImage.setSrc('realImage.png') è¿™è¾¹ç”¨ä»£ç†çš„ä¸€ä¸ªåŸå› æ˜¯éµå®ˆäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œå› ä¸ºsetSrcå’Œè®¾ç½®é¢„åŠ è½½å›¾ç‰‡æ˜¯ä¸¤ä¸ªèŒè´£ï¼Œé€šè¿‡ä»£ç†ï¼Œè®©myimageåªè¿›è¡Œè®¾ç½®å›¾ç‰‡æºçš„åŠŸèƒ½ã€‚åšäº†ä»»åŠ¡åˆ†ç¦»ã€‚è€Œä¸”ï¼Œåé¢æˆ‘ä»¬ä¼šæåˆ°çš„æ€§èƒ½ä¼˜åŒ–ï¼ˆå¦‚ç¼“å­˜ï¼‰çš„ä»£ç†ï¼Œä¹Ÿæ˜¯è¿™æ ·ï¼Œæºè¯·æ±‚è€…åªåšä»–æœ¬èº«è¦åšçš„éƒ¨åˆ†ï¼Œåç»­çš„ä¼˜åŒ–åŠŸèƒ½è®©ä»£ç†æ¥å®ç°ã€‚ï¼ˆå””ï¼Œä¹Ÿç¬¦åˆå¼€æ”¾-å°é—­èŒè´£â€¦ï¼‰ç¡®åˆ‡çš„è¯´ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè‹¥è¿åå…¶ä»–ä»»ä½•åŸåˆ™ï¼ŒåŒæ—¶å°†è¿åå¼€æ”¾-å°é—­åŸåˆ™ã€‚ åˆå¹¶httpè¯·æ±‚åŸç†æ˜¯è®¾ç½®ä¸€ä¸ªä»£ç†å‡½æ•°ï¼Œï¼ˆåˆ©ç”¨é—­åŒ…æ”¾ç½®ä¸€ä¸ªCache[],å­˜æ”¾ç»™å®šæ—¶é—´æ®µå†…çš„è¯·æ±‚ï¼Œå½“æ—¶é—´åˆ°è¾¾æ—¶ï¼Œä¸€åŒå‘é€ï¼‰ 123456789101112131415161718192021//æœ¬ä½“sendAjax(req);//ä»£ç†var proxyAjax = (function()&#123; var reqQueue = []; return function(req)&#123; reqQueue.push(req); if(timer) return; //1 timer = setTimeout(function()&#123; //æŠŠreqQueueçš„è¯·æ±‚å†…å®¹åˆå¹¶ï¼Œæ¯”å¦‚åŸå§‹reqçš„post bodyæ˜¯[obj1,obj2,obj3].ç°åœ¨è¦é€šè¿‡ä¸€å®šçš„æ–¹å¼å»åˆå¹¶æˆä¸€ä¸ªå¤§çš„bigObj,ç„¶åå‘é€å®ƒã€‚ var assignedObj = transform(reqQueue); sendAjax(assignedObj); reqQueue = []; timer = null;//ä¸‹ä¸€è½®è¿›æ¥çš„å…¥å£æ¡ä»¶,è§1å¤„ &#125;); &#125;&#125;)();for(var i=0;i&lt;reqs.length;i++)&#123; proxyAjax(reqs[i]);//æ¥¼ä¸»ä¹‹å‰æ‹…å¿ƒé—­åŒ…ï¼Œæƒ³äº†ä¸‹ï¼Œä»¥å‰æ˜¯åœ¨è¿™è¾¹è¿›è¡Œç»‘å®šäº‹ä»¶ï¼Œäº‹ä»¶æ‰§è¡Œæ—¶é—´ä¸å®šï¼Œæ‰€ä»¥è¦é—­åŒ…æŠŠiç©¿è¿›å»ï¼Œä½†æ˜¯è¿™è¾¹æ˜¯ç›´æ¥è¿›è¡Œæ“ä½œã€‚æ‰€ä»¥ä¸è¦æ‹…å¿ƒã€‚ã€‚ã€‚ã€‚ï¼šï¼‰&#125; ä¸Šé¢çš„ä»£ç ç‰¹åˆ«æ˜¯proxyçš„å†…éƒ¨ä»£ç è¦ä»”ç»†ä½“ä¼šä¸‹ï¼Œè·Ÿæ¥¼ä¸»ä¹‹å‰å†™èŠ‚æµçš„ä»£ç æ€æƒ³ä¸€è‡´ï¼Œä½†æ˜¯æ¯”è¾ƒå·§å¦™ï¼Œä¸éœ€è¦è¿›è¡Œgapæ—¶é—´çš„è®¡ç®—ã€‚poä¸€ä¸‹èŠ‚æµï¼š è¿˜æœ‰ä¸€ç‚¹æ˜¯ï¼Œè¿™è¾¹çš„åˆå¹¶è¯·æ±‚è·Ÿä¹‹å‰çš„èŠ‚æµæœ‰ç‚¹æ€æƒ³ç›¸ä¼¼ï¼Œåªä¸è¿‡è¿™è¾¹æ˜¯ç‰¹å®šåœºæ™¯çš„ä¼˜åŒ–ï¼ŒèŠ‚æµæ˜¯é€šç”¨çš„å¯¹å‡½æ•°çš„æ“ä½œã€‚åˆå¹¶è¯·æ±‚çš„ä¼˜ç‚¹å¾ˆå¤šï¼Œå¯ä»¥ç¼“è§£æœåŠ¡ç«¯å‹åŠ›ï¼Œè€Œä¸”å½“ç”¨æˆ·å‘é€è¯·æ±‚ååˆå–æ¶ˆæ—¶ï¼Œåˆå¹¶ä»¥åå®é™…ä¸Šæ˜¯ä¸å‘é€è¯·æ±‚çš„ã€‚å½“ç„¶è¿™ä¹Ÿå¯ä»¥åœ¨å‰ç«¯åˆ¤æ–­â€¦ å…¶ä»–ä¼˜åŒ–åœºæ™¯é™¤æ­¤ä¹‹å¤–ï¼Œä»£ç†è¿˜å¯ä»¥è¿›è¡Œå…¶ä»–ç¼“å­˜æ“ä½œï¼Œæ¯”å¦‚ï¼š åŠ¨æ€è§„åˆ’é‡Œé¢çš„ç¼“å­˜æ•°ç»„= = ajaxè¯·æ±‚çš„æ•°æ®è¿™æ ·ä½¿å¾—æœ¬ä½“å‡½æ•°å¯ä»¥åªè¿›è¡Œè‡ªå·±çš„æ“ä½œï¼Œåœ¨ä»£ç†ä¸­åšå®Œä¼˜åŒ–åç›´æ¥sourceFun.apply()å°±å¯ä»¥äº†ã€‚ ã€summaryã€‘ä»£ç†åˆ†ä¿æŠ¤å’Œè™šæ‹Ÿä»£ç†ï¼Œè™šæ‹Ÿä»£ç†çš„ä½¿ç”¨åœºæ™¯æ˜¯ä¸€äº›å¤§å‹å¼€é”€æ“ä½œæˆ–è€…ä¼˜åŒ–æªæ–½ï¼Œcaseæœ‰é¢„åŠ è½½ï¼Œåˆå¹¶è¯·æ±‚ï¼Œajaxæ•°æ®ç¼“å­˜ç­‰ç­‰ã€‚ è¿­ä»£å™¨æ¨¡å¼ åªè¦è¢«è¿­ä»£çš„å¯¹è±¡æœ‰lengthå±æ€§å¹¶ä¸”å¯ä»¥ç”¨ä¸‹æ ‡è®¿é—®ï¼Œå°±å¯ä»¥è¢«è¿­ä»£ã€‚ ä¹¦é‡Œé¢è¯´è¿­ä»£å™¨åˆ†ä¸ºä¸¤ç§ï¼š ä¸€ç§æ˜¯å†…éƒ¨è¿­ä»£å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´å‡½æ•°å†…éƒ¨å®šä¹‰å¥½äº†å¦‚ä½•å»è¿›è¡Œè¿­ä»£ï¼Œå¦‚jsåŸå£°çš„forEach,mapç­‰ç­‰ï¼Œunderscoreé‡Œé¢ä¹Ÿæœ‰å®ç° 12345678var each = function(arr,fn)&#123; for(var i=0;i&lt;arr.length;i++)&#123; fn.call(null,arr[i],i,arr); &#125;&#125;each([1,2,3],function(v,index)&#123; console.log(v)&#125;); å¦ä¸€ç§æ˜¯å¤–éƒ¨è¿­ä»£å™¨ï¼Œå³æŠŠæ‰€æœ‰éå†æ“ä½œç­‰ç­‰éƒ½æ”¾æƒç»™ç¨‹åºå‘˜ï¼Œæ¯”å¦‚éå†è§„åˆ™æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚stepï¼Œä½•æ—¶ç»ˆæ­¢ç­‰ç­‰ï¼Œæœ‰ç‚¹åƒjavaé‡Œé¢çš„iteratorã€‚ä¹‹å‰çœ‹åˆ°es6é‡Œé¢ä¹Ÿæœ‰ç®€æ˜“ç‰ˆæœ¬çš„iteratorï¼Œåªè¦å®ç°éå†å™¨ç”Ÿæˆæ–¹æ³•å°±è¡Œã€‚ 123456789101112131415161718192021const obj = &#123; [Symbol.iterator] : function () &#123; return &#123; next: function () &#123; return &#123; value: 1, done: true &#125;; &#125; &#125;; &#125;&#125;;//[Symbol.iterator]()è¿”å›çš„æ˜¯ä¸€ä¸ªéå†å™¨å¯¹è±¡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å®ç°äº†å®ƒï¼Œå¹¶ä¸”indexæ˜¯æ•°å­—ï¼Œé‚£ä¹ˆå®ƒä¹Ÿå¯ä»¥è¢«ç”¨iteratoréå†ã€‚å¯ä»¥ç”¨for ofæ¥è®¿é—®å€¼ã€‚ var $iterator = ITERABLE[Symbol.iterator]();var $result = $iterator.next();while (!$result.done) &#123; var x = $result.value; // ... $result = $iterator.next();&#125; ä½¿ç”¨åœºæ™¯å¦‚ä»£æ›¿if-elseï¼Œä¸Šä¼ æ–¹å¼çš„éå†ï¼šï¼ˆæµè§ˆå™¨ä¸Šä¼ æ§ä»¶ã€flashä¸Šä¼ ã€åŸç”Ÿè¡¨å•ä¸Šä¼ input fileï¼‰ç¤ºä¾‹ä»£ç ï¼š 12345678910var iteratorUploadObj = function()&#123; for ( var i = 0, fn; fn = arguments[ i++]; )&#123; var uploadObj = fn(); if ( uploadObj !== false )&#123; return uploadObj; &#125; &#125;&#125;;var uploadObj = iteratorUploadObj( getActiveUploadObj, getFlashUploadObj, getFormUpladObj ); ã€summaryã€‘è¿­ä»£å™¨åˆ†ä¸ºå†…éƒ¨ã€å¤–éƒ¨ä¸¤ç§ç±»å‹ã€‚è¿­ä»£å™¨éµå¾ªäº†å•ä¸€èŒè´£æ¨¡å¼ï¼Œå°†éå†dataçš„èŒè´£ä¸å…¶ä»–çš„æ“ä½œåˆ†ç¦»å¼€ï¼ˆç”¨å›è°ƒï¼‰ã€‚ æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼å¹¿ä¹‰çš„æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ä¸»è¦æ˜¯ç”±æŠ½è±¡çˆ¶ç±»å’Œå…·ä½“å®ç°çˆ¶ç±»æ–¹æ³•çš„å­ç±»ç»„æˆï¼Œçˆ¶ç±»ä¸­å®šä¹‰äº†æ–¹æ³•ï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼š æŠ½è±¡æ–¹æ³•ï¼š éœ€è¦å­—ç´¯å®ç°çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬æ¨¡ç‰ˆæ–¹æ³•ï¼šå­ç±»æ–¹æ³•çš„æ‰§è¡Œé¡ºåº å…·ä½“æ–¹æ³•ï¼š ä»å­ç±»ä¸­æŠ½å–çš„å…¬å…±çš„æ–¹æ³•ï¼Œä½œå¤ç”¨ 123456Coffee.prototype.init = function()&#123; this.boilWater(); this.brewCoffeeGriends(); this.pourInCup(); this.addSugarAndMilk();&#125;; è¿™è¾¹çš„initæ–¹æ³•å°±æ˜¯æ¨¡ç‰ˆæ–¹æ³•ï¼Œå› ä¸ºå®ƒè§„å®šäº†å­ç±»éœ€è¦å®ç°çš„æ–¹æ³•åŠæ‰§è¡Œé¡ºåºã€‚å¯¹äºjavscriptæ¥è¯´ï¼Œæ²¡æœ‰æŠ½è±¡ç±»çš„æ¦‚å¿µï¼Œä¸€èˆ¬ç”¨åŸå‹é“¾æ¥æ¨¡æ‹Ÿçˆ¶ç±»å­ç±»ã€‚ 1234567var Rectangle = function (id, x, y, width, height) &#123; Shape.call(this, id, x, y); this.width = width; this.height = height;&#125;;Rectangle.prototype = Object.create(Shape.prototype);//ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•Rectangle.prototype.constructor = Rectangle; æ³¨æ„ç‚¹ ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œç”±äºjavascriptæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ²¡æœ‰ç¼–è¯‘å™¨æ£€æŸ¥å­ç±»æ˜¯å¦å®ç°äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œè§£å†³æ–¹æ¡ˆä¸€ç§æ˜¯åœ¨çˆ¶ç±»é‡Œé¢æŠ›å‡ºå¼‚å¸¸ï¼Œå­ç±»æ²¡æœ‰å®ç°çš„è¯ï¼Œä¼šé¡ºç€åŸå‹é“¾è°ƒç”¨åˆ°çˆ¶ç±»æ–¹æ³•ï¼ŒæŠ›å‡ºå¼‚å¸¸å°±ä¼šå‘ç°ã€‚ é’©å­å‡½æ•°ï¼š æœ‰æ—¶å€™å¹¶ä¸ä¸€å®šæŒ‰ç…§çˆ¶ç±»çš„é¡ºåºæˆ–è€…å®šä¹‰çš„æ¨¡ç‰ˆæ–¹æ³•æ¥æ‰§è¡Œï¼Œéœ€è¦æœ‰æ‰€å˜åŒ–ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦åœ¨çˆ¶ç±»æŒ‚ä¸€äº›é’©å­å‡½æ•°ï¼Œè®©è¿™äº›å­ç±»å†³å®šçš„é’©å­å‡½æ•°æ¥å†³å®šå­ç±»çœŸæ­£çš„å®ç°æµç¨‹ã€‚ 123456789101112131415Beverage.prototype.init = function()&#123; this.boilWater(); this.brew(); this.pourInCup(); if ( this.customerWantsCondiments() )&#123; // å¦‚æœæŒ‚é’©è¿”å›trueï¼Œåˆ™éœ€è¦è°ƒæ–™ this.addCondiments(); &#125;&#125;CoffeeWithHook.prototype.customerWantsCondiments = function()&#123; return window.confirm( 'è¯·é—®éœ€è¦è°ƒæ–™å—ï¼Ÿ' ); &#125;;var coffeeWithHook = new CoffeeWithHook();coffeeWithHook.init(); å®é™…ä¸Šå¯ä»¥ç”¨é«˜é˜¶å‡½æ•°çš„æ–¹æ³•ï¼Œå­ç±»æŠŠè¦è¦†ç›–çš„æ–¹æ³•ä½œä¸ºparamä¼ ç»™çˆ¶ç±»çš„å‡½æ•°ï¼Œç„¶åç±»ä¼¼äºobject.assignå»ç”Ÿæˆä¸€ä¸ªå­ç±»çš„æ–¹æ³•é›†åˆå¯¹è±¡ã€‚ å—¯ï¼Œreactä¸­çš„HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰æœ‰ç‚¹åƒè¿™è¾¹çš„çˆ¶ç±»ï¼Œå¥½å§ï¼Œæœ¬è´¨ä¸Šè·Ÿç»§æ‰¿æ²¡å·®å•¦ã€‚ å¤–è§‚æ¨¡å¼å¤–è§‚æ¨¡å¼å¯¹å®¢æˆ·æä¾›ä¸€ä¸ªç®€å•æ˜“ç”¨çš„é«˜å±‚æ¥å£ï¼Œé«˜å±‚æ¥å£ä¼šæŠŠå®¢æˆ·çš„è¯·æ±‚è½¬å‘ç»™å­ç³»ç»Ÿæ¥å®Œæˆå…·ä½“çš„åŠŸèƒ½å®ç°ã€‚æ¦‚å†µæ¥è¯´å°±æ˜¯ï¼šå®¢æˆ·-&gt;é«˜å±‚æ¥å£-&gt; å­ç³»ç»Ÿ(å†…å¿ƒOSï¼Œæ„Ÿè§‰æœ‰ç‚¹åƒåå‘ä»£ç†â€¦)","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yoursite.com/tags/è®¾è®¡æ¨¡å¼/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"ä»£ç†æ¨¡å¼","slug":"ä»£ç†æ¨¡å¼","permalink":"http://yoursite.com/tags/ä»£ç†æ¨¡å¼/"}]},{"title":"è¯»ä¹¦ç¬”è®°â€”â€”ç™½å¸½å­è®²webå®‰å…¨ï¼ˆä¸€ï¼‰","slug":"web-secure1-md","date":"2017-01-30T06:07:28.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2017/01/30/web-secure1-md/","link":"","permalink":"http://yoursite.com/2017/01/30/web-secure1-md/","excerpt":"","text":"é˜²æ­¢æŒ‚é©¬ å®¢æˆ·ç«¯æ²™ç®±ï¼ˆæµè§ˆå™¨ä¿æŠ¤è‡ªå·±ï¼‰é€šå¸¸ä¼šæœ‰æ¶æ„ä»£ç æ³¨å…¥çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³â€æŒ‚é©¬â€å¯¹æµè§ˆå™¨çš„å½±å“ï¼Œæµè§ˆå™¨æœ‰ä¸¤ç§è§£å†³æ–¹æ³•:sandbox + å¤šè¿›ç¨‹ã€‚ æµè§ˆå™¨å°†ä¸è¢«ä¿¡ä»»çš„ç”¨æˆ·ä»£ç ï¼ˆç”¨sandboxåŒ…è£¹ï¼‰ä¸æµè§ˆå™¨å†…æ ¸è¿›ç¨‹éš”ç»å¼€ï¼Œåªé€šè¿‡IPCé€šé“è®¿é—®ã€‚ æ¯ä¸€ä¸ªtabé¡µéƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå¤šè¿›ç¨‹å¯ä»¥é˜²æ­¢æŸä¸€ä¸ªå´©æºƒï¼Œæ•´ä¸ªæµè§ˆå™¨å°±å´©æºƒçš„é—®é¢˜ï¼Œæå‡äº†ç”¨æˆ·ä½“éªŒã€‚ æ¶æ„ç½‘å€æ‹¦æˆªï¼ˆæµè§ˆå™¨ä¿æŠ¤ç”¨æˆ·ï¼‰ æ¶æ„ç½‘å€åŒ…æ‹¬ï¼š æŒ‚é©¬ç½‘ç«™ é’“é±¼ç½‘ç«™ é€šå¸¸æƒ…å†µä¸‹ï¼ŒæŒ‚é©¬å¯èƒ½æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ç›´æ¥åµŒå…¥ä»£ç ï¼Œä¸€ç§å°±æ˜¯æ¶æ„ç½‘å€é“¾æ¥ï¼ˆé€šè¿‡scriptæŒ‡å‘æ¶æ„ç½‘å€ï¼‰ã€‚å…¶å®åè€…æ˜¯å‰è€…çš„å‰ä¸€æ­¥ã€‚æ‹¦æˆªçš„æ–¹æ³•ä¸»è¦æ˜¯ï¼šæµè§ˆå™¨å®šæ—¶ä»æœåŠ¡è·å–é»‘åå•åŒ¹é…ã€‚ ï¼ˆè€Œä¸æ˜¯æµè§ˆå™¨å»è¿›è¡ŒåŒ¹é…æ“ä½œï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºåŒ¹é…æ“ä½œæ”¾åœ¨æµè§ˆå™¨ï¼Œé‚£ä¹ˆæ”»å‡»è€…æ˜¯å¯ä»¥åˆ†æè§£å†³çš„ï¼Œå¦ä¸€æ–¹é¢ï¼Œæ•°æ®é‡è¿‡å¤§ï¼‰ é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰EVSSLè¯ä¹¦ï¼ˆå…¨çƒè¯ä¹¦é¢å‘æœºæ„ä¸æµè§ˆå™¨å‚å•†çš„å¢å¼ºå‹è¯ä¹¦ï¼‰ï¼Œæ¯”æ™®é€šçš„httpsè¿˜è¦æ˜¾è‘—ã€‚ è·¨ç«™è„šæœ¬æ”»å‡»XSS payload CookieåŠ«æŒ document.cookieè®¿é—®åï¼Œå¯ä»¥ä¼ªé€ å‘åŒ…ï¼Œç„¶åæ¨¡æ‹Ÿç™»å½•ï¼Œç„¶åå°±å¯ä»¥è·å–æ›´å¤šçš„ä¿¡æ¯äº†ã€‚ è§£å†³ï¼šhttpOnlyä¸è®¸é€šè¿‡è„šæœ¬è®¿é—®cookieã€‚å³cookieå¯ä»¥è¢«è‡ªåŠ¨è¢«å‘é€ï¼Œä½†æ˜¯æ— æ³•è·å– 1Set-Cookie: USER=123; expires=Wednesday, 09-Nov-99 23:12:40 GMT; HttpOnly å…¶ä»–è¦æ”»å‡»è€…å¤šåšçš„äº‹æƒ…åŒ…æ‹¬ï¼š å›¾ç‰‡éªŒè¯ç .(é»‘å®¢ï¼šå¯ä»¥æŠŠå›¾ç‰‡urlå‘å¾€è¿œç¨‹æœåŠ¡å™¨å»è§£æ) old passwordï¼šé’“é±¼ æ”¶é›†ä¿¡æ¯ è¯†åˆ«ç”¨æˆ·æµè§ˆå™¨ï¼š navigator.userAgent(ä¸å¤ªå‡†ç¡®ï¼Œå› ä¸ºuserAgentå¯ä»¥ä¼ªé€ ) åˆ†ææµè§ˆå™¨ç‹¬ç‰¹ç‰¹å¾ï¼Œæ¥è¿›è¡ŒåŒ¹é… ã€å­¦è€…Gareth Heyesã€‘ è¯†åˆ«å®‰è£…è½¯ä»¶ã€æ’ä»¶ã€æ‰©å±•ï¼š é€šè¿‡è¯†åˆ«æ˜¯å¦å®‰è£…æŸæ§ä»¶æ¥åˆ¤æ–­ æ˜¯å¦æœ‰æŸè½¯ä»¶çš„classIdæ¥åˆ¤æ–­æ‰«æPluginsåˆ—è¡¨ï¼ŒExtensionï¼ˆæ¯”å¦‚æŸæ‰©å±•å¦‚æœè£…äº†å°±å¯ä»¥æ˜¾ç¤ºæŸä¸ªå›¾æ ‡ï¼Œé‚£ä¹ˆæ”¾ä¸€ä¸ªsrc=å›¾æ ‡çš„urlï¼Œçœ‹æ˜¯å¦æ˜¾ç¤ºï¼‰ XSSæ„é€ æŠ€å·§ ç»•è¿‡é•¿åº¦é™åˆ¶ï¼š æ”¾eventäº‹ä»¶ä¸­ï¼ˆå°‘äº†â€scriptâ€ï¼‰ location.hashä¸­å†™ï¼ˆè€Œä¸æ˜¯inputä¸­ï¼‰ åˆ©ç”¨æ³¨é‡Šç¬¦ï¼ŒæŠŠinputæ³¨é‡Šæ‰ï¼Œåœ¨åé¢æ”¾script 1234567&lt;input id=1 type=&quot;text&quot; value=&quot;&quot; /&gt;xxxxxxxxxxxxx&lt;input id=2 type=&quot;text&quot; value=&quot;&quot; /&gt;åœ¨ç¬¬ä¸€ä¸ªinputæ¡†ä¸­ï¼Œè¾“å…¥ï¼š&quot;&gt;&lt;!--åœ¨ç¬¬äºŒä¸ªinputæ¡†ä¸­ï¼Œè¾“å…¥ï¼š--&gt;&lt;script&gt;alert(/xss/);&lt;/script&gt;æœ€ç»ˆ&lt;input id=1 type=&quot;text&quot; value=&quot;&quot;&gt;&lt;!--&quot; /&gt; xxxxxxxxxxxxxxxxx &lt;input id=2 type=&quot;text&quot; value=&quot;--&gt;&lt;script&gt;alert(/xss/);&lt;/script&gt;&quot; /&gt; 4. ä½¿ç”¨baseï¼šæŠŠæœ¬é¡µé¢çš„æ‰€æœ‰ç›¸å¯¹è·¯å¾„ï¼Œéƒ½é™„ä¸ŠbaseæŒ‡å‘çš„æ¶æ„ç½‘å€ã€‚ç„¶ååœ¨æ¶æ„ç½‘å€çš„æœåŠ¡å™¨ä¸­æ„é€ ç›¸åº”çš„è·¯å¾„ã€‚ 5. window.name å¯ä»¥åœ¨ä¸¤ä¸ªåŸŸä¼ è¾“æ•°æ® - å˜åºŸä¸ºå®ï¼š apache expect (å¯æ³¨å…¥) é˜²èŒƒXSSHttpOnlyæœåŠ¡å™¨å‘é€æŒ‡ç¤ºï¼Œè¦æ±‚set-Cookieä¸­æŸä¸€ä¸ªcookie httpOnlyã€‚é‚£ä¹ˆæµè§ˆå™¨ä¼šè®¾ç½®æ‰€æœ‰çš„cookieã€‚ä½†æ˜¯è®¾ç½®äº†httpOnlyçš„cookieæ˜¯ä¸èƒ½è¢«è®¿é—®çš„ã€‚é€šè¿‡TRACEè¯·æ±‚å¯ä»¥ç»•è¿‡è¿™ä¸ªï¼Œå®ƒçš„responseBodyé‡Œé¢ä¼šè¿”å›cookie. è¾“å…¥æ£€æŸ¥ çœ‹æ˜¯å¦åŒ…æ‹¬æœ‰å®³ç‰¹æ®Šå­—ç¬¦ï¼ŒåŒ¹é…XSSç‰¹å¾ç­‰ XSS-filterï¼ˆä½†æ˜¯æŸäº›è½¬ä¹‰å¯èƒ½ä¼šè¿èƒŒç”¨æˆ·æœ¬æ„ï¼‰ è¾“å‡ºæ£€æŸ¥escapeç¼–ç ï¼Œä½†æ˜¯å…¶å®ä¹Ÿä¸ä¸€å®šèƒ½æ»¡è¶³éœ€æ±‚ã€‚è¦åˆ†åœºæ™¯ã€‚ æ ¹æœ¬è§£å†³æ–¹æ¡ˆï¼šåˆ—å‡ºåœºæ™¯ï¼Œé€ä¸€è§£å†³ï¼š html: htmlEncode scriptä¸­ï¼šä¿è¯æ‰€æœ‰å˜é‡éƒ½åœ¨â€œâ€åŒå¼•å·ä¸­ã€‚ äº‹ä»¶ä¸­ï¼š javascriptEncode ![](http://p1.bpimg.com/567571/1236b29deaada5b0.png) cssä¸­ï¼šå°½å¯èƒ½ç¦æ­¢ç”¨æˆ·è¾“å…¥å˜é‡æ”¾åœ¨styleæ ‡ç­¾ä¸­ï¼Œç”¨encodeForCSS() åœ°å€ï¼ˆurlï¼‰ä¸­:URLEncode å¯Œæ–‡æœ¬ï¼ˆç”¨æˆ·è‡ªå®šä¹‰çš„htmlï¼‰:ç¦æ­¢â€œäº‹ä»¶â€ Dom based XSS é¦–å…ˆï¼Œåœ¨$varè¾“å‡ºåˆ°&lt;script&gt;æ—¶ï¼Œåº”è¯¥æ‰§è¡Œä¸€æ¬¡javascriptEncodeï¼›å…¶æ¬¡ï¼Œåœ¨document.writeè¾“å‡ºåˆ°HTMLé¡µé¢æ—¶,è¦åˆ†å…·ä½“æƒ…å†µçœ‹å¾…ï¼šå¦‚æœæ˜¯è¾“å‡ºåˆ°äº‹ä»¶æˆ–è€…è„šæœ¬ï¼Œåˆ™è¦å†åšä¸€æ¬¡javascriptEncodeï¼›å¦‚æœæ˜¯è¾“å‡ºåˆ°HTMLå†…å®¹æˆ–è€…å±æ€§ï¼Œåˆ™è¦åšä¸€æ¬¡HtmlEncodeã€‚ csrfåœ¨b.comåŸŸåä¸‹ï¼Œæœ‰ä¸€ä¸ªimgï¼Œsrcä¸ºa.comåŸŸåä¸‹çš„æŸä¸ªè¯·æ±‚Aï¼Œé»‘å®¢å…ˆè¯±å¯¼ç”¨æˆ·ç™»å½•a.comã€‚ç”±äºåœ¨åŒä¸€ä¸ªæµè§ˆå™¨ä¸‹åŒä¸€ä¸ªåŸŸåçš„tabé¡µé¢æ˜¯å…±äº«cookieçš„ï¼Œå› æ­¤Aä¸­æ˜¯æºå¸¦äº†cookieçš„ã€‚é‚£ä¹ˆç”¨æˆ·è®¿é—®bé¡µé¢æ—¶ï¼Œé—´æ¥è®¿é—®äº†aï¼Œå°±è¾¾åˆ°äº†è·¨åŸŸæ‰§è¡Œaé¡µé¢è¯·æ±‚çš„ç›®çš„ã€‚ï¼ˆç¬¬ä¸‰æ–¹cookieï¼‰åœ¨æŸäº›æµè§ˆå™¨ä¸‹ï¼Œç¬¬ä¸‰æ–¹cookieæ˜¯è¢«ç¦æ­¢çš„ï¼Œæ¯”å¦‚ie,å¯ä»¥é¿å…csrfã€‚ä½†æ˜¯ç”±äºp3pçš„å‡ºç°ï¼Œä½¿å¾—ç¬¬ä¸‰æ–¹cookieå¯ä»¥è¢«å‘é€ï¼Œcsrfã€‚ P3P Headeræ˜¯W3Cåˆ¶å®šçš„ä¸€é¡¹å…³äºéšç§çš„æ ‡å‡†ï¼Œå…¨ç§°æ˜¯The Platform for Privacy Prefer-encesã€‚å¦‚æœç½‘ç«™è¿”å›ç»™æµè§ˆå™¨çš„HTTPå¤´ä¸­åŒ…å«æœ‰P3På¤´ï¼Œåˆ™åœ¨æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œå°†å…è®¸æµè§ˆå™¨å‘é€ç¬¬ä¸‰æ–¹Cookieã€‚ å®ƒçš„é˜²å¾¡æœ‰ éªŒè¯ç ï¼š å› ä¸ºcsrfå¾€å¾€åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹è¿›è¡Œæ“ä½œï¼Œç”¨éªŒè¯ç å°±æ˜¯è®©ç”¨æˆ·å¯¹è‡ªå·±çš„è¯·æ±‚æ“ä½œçŸ¥æ™“ã€è´Ÿè´£ã€‚ Referer Checkåœ¨äº’è”ç½‘ä¸­æœ€å¸¸è§çš„åº”ç”¨å°±æ˜¯â€œé˜²æ­¢å›¾ç‰‡ç›—é“¾â€ã€‚ç”¨æ¥éªŒè¯å‘é€è¯·æ±‚çš„é¡µé¢æ˜¯å¦æ˜¯åº”æœ‰çš„é¡µé¢ï¼Œæˆ–è€…æ˜¯å¦æ˜¯åœ¨åŒä¸€ä¸ªåŸŸåä¸‹ã€‚æ¯”å¦‚ä¹‹å‰çš„bä¸­iframeä¸­æœ‰açš„è¯·æ±‚ï¼Œå®ƒçš„refererå°±æ˜¯bã€‚ä½†æ˜¯æœåŠ¡ç«¯æœ‰æ—¶å€™æ˜¯ä¸èƒ½è·å–åˆ°refererçš„ã€‚ç”±äºéšç§è®¾ç½®ç­‰ç­‰ã€‚ tokenï¼šä¸€ä¸ªä»…è¢«æµè§ˆå™¨ä¸æœåŠ¡å™¨çŸ¥æ™“çš„éšæœºæ•°ï¼Œæ¯æ¬¡è¯·æ±‚æ—¶éƒ½éœ€è¦æºå¸¦è¿™ä¸ªtokenä¿¡æ¯æ¥éªŒè¯èº«ä»½ã€‚ï¼ˆä½¿å¾—æ”»å‡»è€…æ— æ³•çŸ¥æ™“tokenï¼Œæ— æ³•å‘é€è¯·æ±‚ï¼‰ã€‚ 1http://host/path/delete?username=abc&amp;item=123&amp;token=[random(seed)] å› ä¸ºcsrfè¯·æ±‚çš„å‰ææ˜¯æ”»å‡»è€…è¦çŸ¥é“å®Œæ•´çš„urlï¼Œå¦‚æœç”¨tokençš„è¯ï¼Œå°±éœ€è¦æå‰çŸ¥é“è¿™ä¸ªtokenã€‚è€Œtokençš„è·å–æ˜¯éšç€é¡µé¢ç”Ÿæˆ/æ‰“å¼€æ‰ç”Ÿæˆçš„ã€‚ï¼ˆå¯ä»¥ç†è§£ä¸ºæ‰§è¡Œç”Ÿæˆï¼Œéç¼–è¯‘æ—¶ï¼‰ã€‚æ”»å‡»è€…ç»™å‡ºæ¥çš„åªæ˜¯é“¾æ¥éé¡µé¢ï¼Œå®ƒæ— æ³•çŸ¥é“tokenã€‚æ‰€ä»¥è¯·æ±‚æ— æ³•æ„é€ ã€‚ä½†æ˜¯å¦‚æœåµŒå…¥çš„æ˜¯iframe...= =ã€‚ å…·ä½“æ¥è¯´æ˜¯ï¼Œæ¯æ¬¡æ‰“å¼€æŸä¸ªè¯·æ±‚é¡µé¢ï¼ŒæœåŠ¡å™¨éƒ½ä¼šè¿”å›ä¸€ä¸ªtokenï¼Œï¼ˆå¯ä»¥æ˜¯åç«¯æ¸²æŸ“å‰ç«¯é¡µé¢æ—¶ç›´æ¥åµŒè¿›è¡¨å•ï¼Œå¦‚ä¸‹å›¾ï¼‰ã€‚ ç„¶åè¡¨å•è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯è¯»å–è¿™ä¸ªtokenï¼Œè·Ÿåç«¯sessionä¸­çš„tokenæ¯”å¯¹ï¼ŒéªŒè¯è¡¨å•æ˜¯å¦å¯ä¿¡ã€‚(å®é™…ä¸Šï¼Œæ¯”å¯¹å¯ä»¥æ˜¯å‰ç«¯è·Ÿåç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯å‰ç«¯è·Ÿå‰ç«¯ï¼Œå°±æ˜¯è¡¨å•è·Ÿcookieæ¯”å¯¹ï¼Œå› ä¸ºåç«¯å­˜sessionä¸­çš„è¯æ˜¯éœ€è¦æ¶ˆè€—ä¸€å®šèµ„æºçš„ï¼Œå¦‚æœç›´æ¥æ”¾åœ¨cookieä¸­å¯ä»¥å‡å°‘æ¶ˆè€—ï¼Œåœ¨ä»…ä»…csrfæ”»å‡»ï¼Œä¸æ¶‰åŠå…¶ä»–çš„æƒ…å†µä¸‹ï¼Œcookieæ˜¯ä¸èƒ½è¢«æ›´æ”¹çš„ï¼Œé‚£ä¹ˆéªŒè¯è¡¨å•è·Ÿcookieä¸­token===è¡¨å•ä¸sessionä¸­token)ã€‚ è¿˜æœ‰å‡ ä¸ªæ³¨æ„äº‹é¡¹æ˜¯ï¼š - tokenç”Ÿå‘½å‘¨æœŸï¼Œä¸ºäº†ä½¿ç”¨æ–¹é¢ï¼Œå¯ä»¥åœ¨æŸä¸ªæ—¶é—´æ®µå†…éƒ½ä½¿ç”¨åŒä¸€ä¸ªtokenï¼Œä½†æ˜¯ä¸€æäº¤è¡¨å•å°±åº”åºŸå¼ƒä¸€ä¸ªtokenã€‚ - å¤šä¸ªç›¸åŒé¡µé¢æ‰“å¼€æ—¶ï¼Œå¦‚æœä¸€ä¸ªæ¶ˆè€—å®Œï¼Œå…¶ä»–é¡µé¢è¦ç›¸åº”çš„åŒæ­¥ï¼Œæˆ–è€…è®¾ç½®å‡ ä¸ªåŒæ—¶æœ‰æ•ˆçš„tokenã€‚ - tokenåº”è¯¥é¿å…å­˜åœ¨urlä¸­ï¼Œï¼ˆåº”å°½é‡æ”¾åœ¨è¡¨å•ä¸­ï¼‰ï¼Œå¦åˆ™å¯ä»¥ç”±refererè¢«æ³„éœ²ã€‚ - å°½é‡ç”¨postä»£æ›¿getï¼Œå› ä¸ºgetè¯·æ±‚çš„è¯å‚æ•°ä¼šè¢«æš´éœ²åˆ°urlä¸­ï¼Œå°±å¯èƒ½æš´éœ²è¡¨å•æäº¤ä¸­çš„tokenã€‚ why it works? - éš¾çŒœåˆ° - éš¾è·å–ï¼šæ”»å‡»è€…éœ€è¦é€šè¿‡æŸç§æ‰‹æ®µè·å–ä½ ç«™ç‚¹çš„CSRF tokenï¼Œ ä»–ä»¬åªèƒ½ä½¿ç”¨JavaScriptæ¥åšï¼Œä½†æ˜¯å¦‚æœç«™ç‚¹ä¸æ”¯æŒCORSï¼Œè·¨åŸŸçš„è¯ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ²¡æœ‰åŠæ³•æ¥è·å–CSRF tokenã€‚å› æ­¤ç¡®ä¿CSRF tokenä¸èƒ½é€šè¿‡AJAXè®¿é—®åˆ°ã€‚","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"ç™½å¸½å­è®²web","slug":"ç™½å¸½å­è®²web","permalink":"http://yoursite.com/tags/ç™½å¸½å­è®²web/"},{"name":"å®‰å…¨","slug":"å®‰å…¨","permalink":"http://yoursite.com/tags/å®‰å…¨/"}]},{"title":"JavaScriptè®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰","slug":"design-priciples1-md","date":"2017-01-30T06:05:31.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2017/01/30/design-priciples1-md/","link":"","permalink":"http://yoursite.com/2017/01/30/design-priciples1-md/","excerpt":"","text":"æ¦‚è¿°åŠ¨æ€è¯­è¨€ç±»å‹ä¸é¸­å­ç±»å‹ javascriptæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œåªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šçŸ¥é“å˜é‡ç±»å‹ï¼Œç¼ºç‚¹æ˜¯è¿è¡Œæ—¶å¯èƒ½å‡ºç°ä¸ç±»å‹æœ‰å…³çš„é”™è¯¯ï¼Œå¥½å¤„æ˜¯ï¼Œé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¸å…³å¿ƒå®ƒisAï¼Œåªå…³å¿ƒå®ƒï½ˆï½ï½“Aï¼Œæ¯”å¦‚ï¼Œæœ‰lengthï¼Œæœ‰sliceç­‰ç­‰çš„å°±å¯ä»¥å½“æ•°ç»„ç”¨ã€‚(ç›¸å½“äºï¼Œå¯èƒ½ä¸€åªä¼šé¸­å­å«çš„é¸¡ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯é¸­å­â€¦) å¤šæ€å¤šæ€çš„æ€æƒ³å…¶å®æ˜¯æŠŠâ€œåšä»€ä¹ˆâ€è·Ÿâ€œè°å»åšâ€åˆ†ç¦»å¼€æ¥ï¼Œéœ€è¦æ‰¾å‡ºå„ä¸ªå¯¹è±¡ä¸­å…±æœ‰çš„â€œåšä»€ä¹ˆâ€çš„éƒ¨åˆ†ã€‚å¤šæ€æ€§çš„æ ¹æœ¬ä½œç”¨åœ¨äºæŠŠè¿‡ç¨‹åŒ–çš„æ¡ä»¶åˆ†æ”¯è¯­å¥è½¬åŒ–ä¸ºå¯¹è±¡çš„å¤šæ€æ€§ã€‚javascriptç”±äºä¸ç”¨ç±»å‹æ£€æŸ¥ï¼Œä¸ç”Ÿä¿±æ¥æœ‰å¤šæ€æ€§ã€‚å¾ˆå¤šè®¾è®¡æ¨¡å¼å°±æœ‰å¤šæ€æ€§çš„å†…æ¶µåœ¨é‡Œé¢ï¼Œè€Œjavascriptçš„é«˜é˜¶å‡½æ•°ä¹Ÿå¯ä»¥ç”¨æ¥å®ç°è¿™äº›è®¾è®¡æ¨¡å¼ã€‚ 123456789var makeSound = function(animal)&#123; animal.sound();&#125;//è¿™æ ·å°±å¯ä»¥è°ƒç”¨// makeSound(new Duck())var Duck = function()&#123;&#125;Duck.prototype.sound = function()&#123; console.log(&quot;å˜å˜å˜&quot;);&#125; å°è£…åŒ…æ‹¬å°è£…æ•°æ®ã€å°è£…æ–¹æ³•ã€å°è£…ç±»å‹ã€å°è£…å˜åŒ–ã€‚å…¶ä¸­ å°è£…æ•°æ®ï¼ˆè®¿é—®æƒé™ï¼‰ leté™å®šä½œç”¨åŸŸ é—­åŒ… symbol ä¼ªç§æœ‰å±æ€§ å°è£…å˜åŒ–ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­å…±å½’çº³æ€»ç»“äº†23ç§è®¾è®¡æ¨¡å¼ã€‚ä»æ„å›¾ä¸ŠåŒºåˆ†ï¼Œè¿™23ç§è®¾è®¡æ¨¡å¼åˆ†åˆ«è¢«åˆ’åˆ†ä¸ºåˆ›å»ºå‹æ¨¡å¼ã€ç»“æ„å‹æ¨¡å¼å’Œè¡Œä¸ºå‹æ¨¡å¼ã€‚æ‹¿åˆ›å»ºå‹æ¨¡å¼æ¥è¯´ï¼Œè¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ˜¯ä¸€ç§æŠ½è±¡è¡Œä¸ºï¼Œè€Œå…·ä½“åˆ›å»ºä»€ä¹ˆå¯¹è±¡åˆ™æ˜¯å¯ä»¥å˜åŒ–çš„ï¼Œåˆ›å»ºå‹æ¨¡å¼çš„ç›®çš„å°±æ˜¯å°è£…åˆ›å»ºå¯¹è±¡çš„å˜åŒ–ã€‚è€Œç»“æ„å‹æ¨¡å¼å°è£…çš„æ˜¯å¯¹è±¡ä¹‹é—´çš„ç»„åˆå…³ç³»ã€‚è¡Œä¸ºå‹æ¨¡å¼å°è£…çš„æ˜¯å¯¹è±¡çš„è¡Œä¸ºå˜åŒ–ã€‚ åŸå‹ç³»ç»Ÿjavascriptéµå®ˆåŸå‹ç¼–ç¨‹çš„åŸºæœ¬åŸåˆ™ï¼š æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å¯¹è±¡ é™¤äº†undefinedä»¥å¤–ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ˜¯å¯¹è±¡ï¼ˆå½“ç„¶åŸºæœ¬ç±»å‹çš„é‚£å‡ ç§ä¹Ÿå¯ä»¥é€šè¿‡åŒ…è£…ç±»çš„æ–¹å¼å¾—åˆ°å¯¹è±¡ï¼‰ï¼Œæ ¹å¯¹è±¡éƒ½æ˜¯Object.prototypeã€‚ è¦å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œä¸æ˜¯é€šè¿‡å®ä¾‹åŒ–ç±»ï¼Œè€Œæ˜¯æ‰¾åˆ°ä¸€ä¸ªå¯¹è±¡ä½œä¸ºåŸå‹å¹¶å…‹éš†å®ƒï¼ˆObject.create(proto)ï¼‰ å¯ä»¥é€šè¿‡Object.getPrototypeOfæ¥è·å–åŸå‹ã€‚ æ˜¯é€šè¿‡newè¿ç®—ç¬¦è¿›è¡Œçš„æ“ä½œï¼Œå¯ä»¥ç”¨ObjectFactoryå‡½æ•°æ¥æ¨¡æ‹Ÿè¿™ä¸€æ“ä½œã€‚ 1234567891011121314function Person(name)&#123; this.name = name&#125;Person.prototype.getName = function()&#123; return this.name;&#125;var objectFactory = function()&#123; var obj = new Object(); //1 var Constructor = [].shift.call(arguments); obj._proto_ = Constructor.prototype //ï¼ï¼æŒ‡å‘åŸå‹ //2 var ret = Constructor.apply(obj,arguments); //3 return typeof ret==='object'? ret: obj; //4&#125;var person = objectFactory(Person,'luchen') åˆ†åˆ«å¯¹åº”äºä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š ç”¨newè°ƒç”¨ä¸€ä¸ªå‡½æ•°å‘ç”Ÿäº†è¿™äº›äº‹ï¼š ï¼ˆ1ï¼‰æ–°å»ºä¸€ä¸ªå¯¹è±¡ instance=new Object(); ï¼ˆ2ï¼‰è®¾ç½®åŸå‹é“¾ instance.__proto__=F.prototype; ï¼ˆ3ï¼‰è®©Fä¸­çš„thisæŒ‡å‘instanceï¼Œæ‰§è¡ŒFçš„å‡½æ•°ä½“ã€‚ ï¼ˆ4ï¼‰åˆ¤æ–­Fçš„è¿”å›å€¼ç±»å‹ï¼š å¦‚æœæ˜¯å€¼ç±»å‹ï¼Œå°±ä¸¢å¼ƒå®ƒï¼Œè¿˜æ˜¯è¿”å›instanceã€‚ å¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œå°±è¿”å›è¿™ä¸ªå¼•ç”¨ç±»å‹çš„å¯¹è±¡ï¼Œæ›¿æ¢æ‰instanceã€‚ ä½œè€…ï¼šä½•å¹» é“¾æ¥ï¼šhttps://www.zhihu.com/question/36440948/answer/71234418 æ¥æºï¼šçŸ¥ä¹ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒã€‚ newæ“ä½œçš„ç­‰ä»·ä¸ºï¼š å…‹éš†ä¸€ä¸ªobjectå¯¹è±¡ï¼Œå¹¶æŠŠå®ƒæŒ‡å‘æ­£ç¡®çš„åŸå‹ï¼Œå¹¶è®¾ç½®å®ƒçš„å†…éƒ¨å±æ€§ç­‰å…¶ä»–æ“ä½œã€‚ å¯¹è±¡ä¼šè®°ä½å®ƒçš„åŸå‹é€šè¿‡å¯¹è±¡çš„_proto_æ¥è®°ä½åŸå‹ã€‚åœ¨åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼ˆnewï¼‰çš„æ—¶å€™å°±å»ºç«‹äº†è¿™ä¹ˆä¸€æ¡é“¾ã€‚ ä½†æ˜¯ä¹Ÿä¸æ˜¯è¯´åŸå‹å°±å›ºå®šäº†ï¼Œå®ƒå¯ä»¥åŠ¨æ€çš„æŒ‡å‘åˆ«å¤„ 1A.prototype = obj å¦‚æœå¯¹è±¡æ— æ³•å“åº”æŸä¸ªè¯·æ±‚ï¼Œä¼šæŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™ä»–çš„[æ„é€ å™¨çš„]åŸå‹ æŸ¥æ‰¾å±æ€§æ—¶ï¼Œå…ˆé€šè¿‡å¯¹è±¡çš„_proto_æ¥å§”æ‰˜åˆ°è¯¥å¯¹è±¡çš„æ„é€ å™¨çš„åŸå‹ï¼ˆA.prototypeï¼‰ä¸Šï¼Œè€ŒA.prototypeåœ¨ä¸Šé¢è¢«æŒ‡å‘ä¸ºobjï¼Œé‚£ä¹ˆå°±ä»objæ¥æŸ¥æ‰¾å±æ€§ã€‚ obj -&gt; obj._proto_= A.prototype -&gt;objB è™½ç„¶es6ä¸­æœ‰ç±»çš„æ¦‚å¿µäº†ï¼Œä½†æœ¬è´¨è¿˜æ˜¯ç”¨çš„åŸå‹é“¾ï¼Œçœ‹es6 featureé‡Œé¢çš„å¯¹æ¯” 1234567891011121314151617181920212223242526272829303132333435363738//es6class Shape &#123; constructor (id, x, y) &#123; this.id = id this.move(x, y) &#125; move (x, y) &#123; this.x = x this.y = y &#125;&#125;//ç»§æ‰¿class Rectangle extends Shape &#123; constructor (id, x, y, width, height) &#123; super(id, x, y) this.width = width this.height = height &#125;&#125;//es5var Shape = function (id, x, y) &#123; this.id = id; this.move(x, y);&#125;;Shape.prototype.move = function (x, y) &#123; this.x = x; this.y = y;&#125;;//ç»§æ‰¿//ç»§æ‰¿å±æ€§var Rectangle = function (id, x, y, width, height) &#123; Shape.call(this, id, x, y); this.width = width; this.height = height;&#125;;//è¿™è¾¹æ˜¯ç»§æ‰¿æ–¹æ³•Rectangle.prototype = Object.create(Shape.prototype);//å› ä¸ºé‡å†™åŸå‹é“¾äº†ï¼Œæ‰€ä»¥constructorä¼šä¸¢å¤±ï¼Œè¦å†è¡¥ä¸ŠRectangle.prototype.constructor = Rectangle; newè¿ç®—ç¬¦çš„ç²¾é«“åœ¨ä¸_proto_çš„æŒ‚è½½ï¼Œç»§æ‰¿çš„ç²¾é«“åœ¨äºå±æ€§å’Œæ–¹æ³•çš„å¤åˆ¶ï¼Œæ–¹æ³•çš„å¤åˆ¶å¯ä»¥ç”¨Object.createï¼Œç„¶åé‡å†™åŸå‹é“¾ï¼Œä½†é‡å†™åä¼šå¯¼è‡´constructorä¸¢å¤±ï¼Œå› æ­¤è¦æ‰¾å›æ¥ã€‚å…·ä½“çš„å¯ä»¥å›å¤´å†çœ‹ä¸‹é«˜ç¨‹â€¦ thisthisçš„è‹¥å¹²ç§åœºæ™¯ï¼Œåœ¨æ¥¼ä¸»çš„æŸç¯‡blogé‡Œé¢å·²ç»è¯´è¿‡äº†ã€‚æ¯”è¾ƒå¥½çš„ä»£ç ç‰‡æ®µ 123456789101112document.getElementById = ( return function(func)&#123; return func.apply(document,arguments) &#125;)(document.getElementById);//å®ç°bindFunction.prototype.bind = function(context)&#123; var self = this; //ä¿å­˜å½“å‰å‡½æ•° return function()&#123; self.apply(context,arguments); &#125;&#125; é—­åŒ…å’Œé«˜é˜¶å‡½æ•°ç”¨å¤„ï¼š å°è£…å˜é‡ å»¶ç»­å±€éƒ¨å˜é‡çš„å¯¿å‘½ 12345678var mult = (function()&#123; var privateParam = &#123;&#125;; return function()&#123; privateParam[key] = someValue; return privateParam &#125;&#125;)mult() å‘½ä»¤æ¨¡å¼æ˜¯æŠŠè¯·æ±‚å°è£…æˆå¯¹è±¡ï¼Œä»è€Œåˆ†ç¦»è¯·æ±‚çš„å‘èµ·è€…å’Œè¯·æ±‚çš„æ¥å—è€…ï¼ˆæ‰§è¡Œè€…ï¼‰ä¹‹é—´çš„è€¦åˆå…³ç³»Â·ç”¨é—­åŒ…å¯ä»¥äº‹å…ˆå¾€å‘½ä»¤å¯¹è±¡ä¸­æ¤å…¥å‘½ä»¤çš„æ¥æ”¶è€…ã€‚è™½ç„¶é—­åŒ…ä½¿å¾—å±€éƒ¨å˜é‡å¯ä»¥é•¿æœŸè¢«å¼•ç”¨ï¼Œä¸€ç›´ç”Ÿå­˜ä¸‹å»ï¼Œä½†ä¸€èˆ¬æ¥è¯´å®ƒä¸ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ï¼Œè¦å›æ”¶çš„è¯åªéœ€è¦è®¾ç½®nullå³å¯ã€‚ä¸å†…å­˜æœ‰å…³çš„åœ°æ–¹æ˜¯æ¯”è¾ƒå®¹æ˜“å½¢æˆå¾ªç¯å¼•ç”¨ï¼Œå¦‚æœé—­åŒ…çš„ä½œç”¨åŸŸé“¾ä¸­ä¿å­˜ç€ä¸€äº›DOMèŠ‚ç‚¹ï¼Œé‚£å°±å¯èƒ½é€ æˆå†…å­˜æ³„éœ²ï¼Œä½†è¿™æ˜¯ç”±äºIEæµè§ˆå™¨ä¸­BOMå’ŒDOMæ˜¯ä½¿ç”¨C++ç”¨COMå¯¹è±¡çš„å‡¡æ˜¯å®ç°çš„ï¼Œå®ƒçš„åƒåœ¾å›æ”¶æœºåˆ¶æ˜¯å¼•ç”¨è®¡æ•°ï¼Œå¾ªç¯å¼•ç”¨ä¼šå¯¼è‡´æ— æ³•è¢«å›æ”¶ï¼Œæ‰€ä»¥å†…å­˜æ³„æ¼ã€‚ ç»å…¸é—­åŒ… 1234567for(var i=0;i&lt;nodes.length;i++)&#123; (function(i)&#123; node[i].onclick = function()&#123; console.log(i); &#125; &#125;)(i)&#125; é«˜é˜¶å‡½æ•° é«˜é˜¶å‡½æ•°æ˜¯è‡³å°‘æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„å‡½æ•°ï¼šå‚æ•°ä¸ºå‡½æ•°è¿”å›å€¼ä¸ºå‡½æ•° å‚æ•°ä¸ºå‡½æ•°ï¼š ajaxå›è°ƒã€Array.prototype.sortå‡½æ•° è¿”å›å€¼ä¸ºå‡½æ•°ï¼šå¸¸è§çš„ä¸ºå•æ —æ¨¡å¼ï¼Œå…·ä½“çš„å¯ä»¥çœ‹ä¹‹å‰çš„åšæ–‡ç¬¬å…«æ¡ è¿˜æœ‰ä¸€æ®µå¾ˆä¸é”™çš„ä»£ç ç‰‡æ®µï¼š 1234567function isType(type)&#123; return function(obj)&#123; return Object.prototype.toString.call(obj)===`[object $&#123;type&#125;]`; &#125;&#125;var isArray = isType('Array')isArray([1,2,4]) é«˜é˜¶å‡½æ•°çš„å…¶ä»–åœºæ™¯è¿˜æœ‰ï¼š currying ä¹‹åæˆ‘ä»¬çœ‹å‡½æ•°å¼ç¼–ç¨‹ä¼šæ¶‰åŠåˆ°ï¼Œå…·ä½“å†çœ‹ å‡½æ•°èŠ‚æµï¼ˆä¹‹å‰æˆ‘ä»¬è®²è¿‡ï¼‰ æƒ°æ€§åŠ è½½ï¼ˆé¦–æ¬¡å—…æ¢åå‡½æ•°è¦†ç›–ï¼‰ 123456789101112function createXHR()&#123; ifï¼ˆtypeof XMLHttpRequest != 'undefined'ï¼‰&#123; createXHR = function()&#123; new XMLHttpRequest(); &#125; &#125;else if(typeof ActiveObject != 'undefined')&#123; createXHR = function()&#123; ... &#125; &#125;else ... return createXHR();&#125; åˆ†æ—¶å‡½æ•°ï¼ˆä¸€æ¬¡å¾€é¡µé¢ä¸Šå¤§é‡æ·»åŠ domèŠ‚ç‚¹ä¼šè®©æµè§ˆå™¨å¡é¡¿ï¼Œå¯ä»¥ç”¨settimeoutåˆ†å¤šæ¬¡è¿›è¡Œæ“ä½œï¼‰ è®¾è®¡æ¨¡å¼1. å•ä¾‹æ¨¡å¼ jsä¸­å•ä¾‹æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ï¼šç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œä¾›å…¨å±€è®¿é—®ã€‚ 1234567//å•ä¾‹var Singleton = (function()&#123; var param; return function(initialValue)&#123; return param || (param = initialValue); &#125;&#125;)(); å…¨å±€å˜é‡ä¸æ˜¯å•ä¾‹ï¼Œä½†å¸¸è¢«ç”¨ä½œå•ä¾‹ï¼Œä½†ä¼šé€ æˆå‘½åç©ºé—´çš„æ±¡æŸ“ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼å¯ä»¥é™ä½æ±¡æŸ“ï¼š ä½¿ç”¨å‘½åç©ºé—´ 1234var a = &#123; someSpace1: &#123;&#125;, someSpace2: &#123;&#125;&#125; ä½¿ç”¨é—­åŒ…å°è£…ç§æœ‰å˜é‡ 123456var func1 = function()&#123; var privateParam; return function()&#123; //... &#125;&#125; 1.1 æƒ°æ€§å•ä¾‹ä½¿ç”¨æ—¶æ‰åˆ›å»ºï¼Œè€Œä¸æ˜¯ä¸€è¿è¡Œ/åŠ è½½é¡µé¢å°±åˆ›å»ºã€‚æ¯”å¦‚ç™»å½•çª—å£ï¼Œé€šå¸¸çš„åšæ³•æ˜¯ä¸€å¼€å§‹å°±éšè—ï¼Œä½¿ç”¨æ—¶display:blockã€‚ä½†å¾ˆå¯èƒ½ä¸€ç›´ç”¨ä¸åˆ°ã€‚æ”¹è¿›çš„æ–¹æ³•æ˜¯onclickçš„æ—¶å€™åˆ›å»ºï¼Œä½†æ˜¯ç»´æŒçš„éœ€è¦ä¿è¯æ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œå°±å¯ä»¥ç”¨ä¹‹å‰çš„é—­åŒ…æ¥è¿›è¡Œåˆ¤æ–­ã€‚ 12345678910111213141516171819//æƒ°æ€§å•ä¾‹var generateLoginBox = (function()&#123; var div; function createDiv()&#123; var div = document.createElement('div'); div.innerHTML = \"ç™»å½•çª—å£\"; document.body.appendChild(div); return div; &#125; return function()&#123; return div || (div = createDiv()); &#125;&#125;)(); document.getElementById(\"loginBtn\").addEventListener(\"click\",function()&#123; var div = generateLoginBox(); div.style.display = 'block';&#125; ä½†å®é™…ä¸Šä¸Šè¿°ä»£ç ä¸­ç®¡ç†å•ä¾‹çš„è·Ÿåˆ›å»ºå¯¹è±¡çš„è¿›è¡Œäº†è€¦åˆï¼ˆå³è¿™ä¸ªå•ä¾‹å¯ä»¥ç”¨æ¥åˆ›å»ºå¾ˆå¤šç±»å‹çš„å•ä¾‹ï¼Œä¸å…‰æ˜¯div,è¿˜å¯èƒ½æ˜¯å…¶ä»–çš„imageç­‰ç­‰ï¼‰ã€‚å› æ­¤éœ€è¦è¿›è¡Œæ‹†åˆ† 123456789101112131415161718function createDiv()&#123; var div = document.createElement('div'); div.innerHTML = \"ç™»å½•çª—å£\"; document.body.appendChild(div); return div; &#125;//æœ´ç´ çš„æ”¹è¿›ï¼Œä¸€æ­¥ç”Ÿæˆç»“æœvar generateSingle = (function()&#123; var result; return function(fn)&#123; return result || (result = fn.apply(this,arguments)); &#125;&#125;)();document.getElementById(\"loginBtn\").addEventListener(\"click\",function()&#123; var div = generateSingle(createDiv); div.style.display = 'block';&#125; method2ï¼šç”Ÿæˆå‡½æ•°çš„å‡½æ•° 12345678910111213//ç®¡ç†å•ä¾‹çš„å‡½æ•°ï¼var generateSingle = function(fn)&#123; var result; return function()&#123; return result || (result = fn.apply(this,arguments)); &#125;&#125;document.getElementById(\"loginBtn\").addEventListener(\"click\",function()&#123; var createSingleDiv = generateSingle(createDiv); var div = createSingleDiv(); div.style.display = 'block';&#125; ç±»ä¼¼çš„åœºæ™¯è¿˜åŒ…æ‹¬å¯¹domå…ƒç´ ç»‘å®šäº‹ä»¶ï¼Œå®é™…ä¸Šåªè¦åœ¨æœ€å¼€å§‹åˆ›å»ºçš„æ—¶å€™ç»‘ä¸€æ¬¡å°±å¥½ã€‚ ã€summaryã€‘å…¨å±€+å‘½åç©ºé—´-ã€‹å•ä¾‹-ã€‹æƒ°æ€§å•ä¾‹ï¼ˆç®¡ç†å•ä¾‹çš„ä»£ç ä¸åˆ›å»ºå¯¹è±¡çš„ä¼šè€¦åˆï¼‰-ã€‹å¸¦æœ‰ä»£ç†çš„æƒ°æ€§å•ä¾‹ ç­–ç•¥æ¨¡å¼ jsä¸­ç­–ç•¥æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ï¼šå®šä¹‰ä¸€ç³»åˆ—å¯ä»¥äº’ç›¸æ›¿ä»£çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬åˆ†åˆ«å°è£…èµ·æ¥ã€‚åœ¨jsä¸­è¡¨ç°ä¸ºä¸€ä¸ªstrategyå¯¹è±¡ ç¨‹åºéœ€è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯æ¥å—ç”¨æˆ·è¯·æ±‚å¹¶è¿›è¡Œåˆ†é…çš„æ€»è°ƒåº¦éƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯å„ç­–ç•¥è®¡ç®—éƒ¨åˆ†ã€‚å¦‚ 12345678910111213141516//è°ƒåº¦éƒ¨åˆ†Contextvar calculateBonus = function(salary,level)&#123; return strategies[level](salary);&#125;//ç­–ç•¥è®¡ç®—éƒ¨åˆ†var strategies = &#123; 'A': function(salary)&#123; return salary*3; &#125;, 'B': function(salary)&#123; return salary*2; &#125;, 'C': function(salary)&#123; return salary*1; &#125;&#125; è¿˜æœ‰å…¶ä»–æ —å­å¦‚ï¼Œç¼“åŠ¨åŠ¨ç”»å’Œè¡¨å•æ ¡éªŒï¼š å¯¹äºç¼“åŠ¨åŠ¨ç”»æ¥è¯´ï¼Œç­–ç•¥å°±æ˜¯é›†ç»“äº†ä¼—å¤šâ€ æ ¹æ®time,èµ·ç»ˆç‚¹ç­‰ä¿¡æ¯æœ€ç»ˆè®¡ç®—ä½ç½®çš„å‡½æ•°â€ç­–ç•¥çš„å¯¹è±¡ã€‚ å¯¹äºè¡¨å•æ ¡éªŒï¼Œåé¢æˆ‘ä»¬ä¼šæåˆ°ï¼Œè¡¨å•æ ¡éªŒä¹Ÿæ¶‰åŠåˆ°è£…é¥°å™¨æ¨¡å¼ï¼ˆåœ¨ä¸æ”¹åŠ¨åŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šï¼Œå…ˆè¿›è¡Œvalidate çš„beforeæ ¡éªŒï¼Œè¿”å›å€¼æ­£ç¡®åå†æäº¤ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960var strategies = &#123; noEmptyName:function(name,errMsg)&#123; if(!name) return errMsg; &#125;, minLength: function(value,length,errMsg)&#123; if(value.length&lt;length) return errMsg; &#125;, isMobile: function(phoneNum,reg,errMsg)&#123; if(!reg.test(phoneNum)) return errMsg; &#125;&#125;function Validator()&#123; this.validateQueue = [];&#125;/** * [validator.add()] * @param &#123;[type]&#125; item [description] * @param &#123;[type]&#125; rules [description] */Validator.prototype.add = function(item,rules)&#123; var ruleFuncs = rules.map(function(rule)&#123; var strategyArr = rule.strategy.split(':'); var strategy = strategyArr.shift(); strategyArr.unshift(item); strategyArr.push(rule.errorMsg); return function()&#123; return strategies[strategy].apply(null,strategyArr); &#125;; &#125;) this.validateQueue = this.validateQueue.concat(ruleFuncs);&#125;Validator.prototype.start = function()&#123; return this.validateQueue.every(function(fn)&#123; var errMsg = fn(); if(errMsg) &#123; console.log(errMsg); return false; &#125; return true; &#125;)&#125;var validate = function()&#123; var validator = new Validator(); var form = &#123; username: 'luchen' &#125; validator.add(form.username, [&#123; strategy: 'noEmptyName', errorMsg: 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º' &#125;, &#123; strategy: 'minLength:7', errorMsg: 'ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°äº7ä½' &#125;]); var result = validator.start();&#125;validate(); ============æ›´æ–°å¢åŠ äº†è£…é¥°å™¨æ¨¡å¼çš„ç­–ç•¥æ¨¡å¼ 12345678910111213141516171819202122232425262728293031323334353637383940var validate = function()&#123; var validator = new Validator(); var form = &#123; username: 'luchen' &#125; validator.add(form.username, [&#123; strategy: 'noEmptyName', errorMsg: 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º' &#125;, &#123; strategy: 'minLength:7', errorMsg: 'ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°äº6ä½' &#125;]); var result = validator.start(); return result;&#125;// validate()/** * è£…é¥°å™¨æ¨¡å¼ */Function.prototype.before = function(beforeFn)&#123; var fn = this; return function () &#123; //è£…é¥°å™¨æ·»åŠ validateçš„beforeåˆ¤æ–­ if(!beforeFn.apply(this,arguments)) return; else return fn.apply(this,arguments) &#125;&#125;var submit = function()&#123; //ajax console.log('----ajax----');&#125;;submit = submit.before(validate);//è°ƒç”¨submit() ã€summaryã€‘ç­–ç•¥æ¨¡å¼è€ƒè™‘ç”¨å¯¹è±¡ç®€ä¾¿åˆ†é…ç­–ç•¥ï¼Œæ¥ä»£æ›¿switchåŠè€¦åˆï¼Œcaseè¿˜æœ‰ è®¡ç®—å¥–é‡‘ã€ç¼“åŠ¨åŠ¨ç”»å’Œè¡¨å•æ ¡éªŒä¸‰ä¸ªä¾‹å­ã€‚","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://yoursite.com/tags/è®¾è®¡æ¨¡å¼/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"javascript","slug":"javascript","permalink":"http://yoursite.com/tags/javascript/"}]},{"title":"æ‰è¿‡çš„å‘æ€»å¾—è‡ªå·±å¡«èµ·æ¥","slug":"æ‰è¿‡çš„å‘æ€»å¾—è‡ªå·±å¡«èµ·æ¥-md","date":"2016-10-31T03:32:14.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2016/10/31/æ‰è¿‡çš„å‘æ€»å¾—è‡ªå·±å¡«èµ·æ¥-md/","link":"","permalink":"http://yoursite.com/2016/10/31/æ‰è¿‡çš„å‘æ€»å¾—è‡ªå·±å¡«èµ·æ¥-md/","excerpt":"","text":"1. sort()æ¥¼ä¸»æœ€è¿‘åœ¨åˆ·leetcodeï¼Œå†™threeSumçš„æ—¶å€™éœ€è¦å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚ä½†æ˜¯å‡ºæ¥çš„ç»“æœå§‹ç»ˆä¸å¯¹ã€‚è°ƒè¯•äº†ä»¥åæ‰å‘ç°sort()å‡½æ•°ä¸æƒ³è±¡ä¸­ä¸å¤ªä¸€æ ·: sort()æ–¹æ³•ï¼šå¦‚æœçœç•¥å‚æ•°ï¼Œæ•°ç»„é¡¹ä¼š**å…ˆæ ¹æ®toString()å‡½æ•°å°†å…¶å€¼è½¬æ¢æˆå­—ç¬¦ä¸²**åœ¨è¿›è¡Œæ¯”è¾ƒï¼Œæ˜¯æŒ‰UNICODEè¿›è¡Œæ¯”è¾ƒçš„ï¼Œç„¶åæ ¹æ®è¿™ä¸ªè¿›è¡Œæ’åºã€‚ å› æ­¤ä¼šå¯¼è‡´ä¸‹é¢çš„æƒ…å†µäº§ç”Ÿã€‚ ![](http://p1.bqimg.com/567571/824ec9546b15fd75.png) ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œéœ€è¦è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•° 12let arr = [-4,-2,-1];arr.sort((a,b)=&gt; a-b) 2. set of array of arrayé€šå¸¸æˆ‘ä»¬å¯ä»¥ç”¨setæ¥uniqueä¸€ä¸ªæ•°ç»„ï¼Œç±»ä¼¼äº 1[...new Set([1,2,2,3])] or Array.from(new Set([1,2,2,3])) ä½†æ˜¯å¯¹äºarray of arrayå°±æ¯”è¾ƒå°´å°¬äº†..å› ä¸ºjsé‡Œé¢æ•°ç»„æ˜¯å¯¹è±¡ï¼Œä¸¤ä¸ªæ•°ç»„çš„å¼•ç”¨æ˜¯ä¸ä¸€æ ·çš„ã€‚æ‰€ä»¥å½“ä½ è¾“å…¥è¿™æ ·çš„å€¼ 1Array.from(new Set([[1],[1]])) å…¶å®æ˜¯ä¸ä¼šèµ·åˆ°ä»»ä½•ä½œç”¨çš„ã€‚æš‚æ—¶çš„æ“æ“çš„æ–¹æ³•ï¼Œåªèƒ½ä¹‹å‰ç”¨json.stringifyå¤„ç†ä¸€éã€‚ 123resultSet.add(JSON.stringify([1,2]));result = Array.from(resultSet).map(a=&gt; JSON.parse(a));","categories":[],"tags":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"http://yoursite.com/tags/å¼€å‘/"},{"name":"å‘","slug":"å‘","permalink":"http://yoursite.com/tags/å‘/"},{"name":"leetcode","slug":"leetcode","permalink":"http://yoursite.com/tags/leetcode/"}]},{"title":"æ—¥å¸¸ç¬”è®°-äºŒ","slug":"æ—¥å¸¸ç¬”è®°-äºŒ","date":"2016-10-31T03:20:47.000Z","updated":"2017-03-25T05:32:39.000Z","comments":true,"path":"2016/10/31/æ—¥å¸¸ç¬”è®°-äºŒ/","link":"","permalink":"http://yoursite.com/2016/10/31/æ—¥å¸¸ç¬”è®°-äºŒ/","excerpt":"","text":"JavaScript å’Œäº‹ä»¶1. ç›‘å¬äº‹ä»¶æ–¹æ³•ï¼š htmlå†…è”å±æ€§é¿å…ä½¿ç”¨ï¼Œå› ä¸ºä¸htmlè€¦åˆ 1&lt;button onclick=&quot;alert(&apos;ä½ ç‚¹å‡»äº†è¿™ä¸ªæŒ‰é’®&apos;);&quot;&gt;ç‚¹å‡»è¿™ä¸ªæŒ‰é’®&lt;/button&gt; domå±æ€§ç»‘å®šç¼ºç‚¹ï¼šå¤šæ¬¡ç»‘å®šæ˜¯è¦†ç›–ï¼Œéæ·»åŠ  123element.onclick = function(event)&#123; alert(&apos;ä½ ç‚¹å‡»äº†è¿™ä¸ªæŒ‰é’®&apos;);&#125;; äº‹ä»¶ç›‘å¬å‡½æ•° 1234element.addEventListener(&lt;event-name&gt;, &lt;callback&gt;, &lt;use-capture&gt;);element.removeEventListener(&quot;click&quot;,funcName,false)//ieelement.attachEvent(&lt;event-name&gt;, &lt;callback&gt;);//event-name: on+name use-captureè®¾ä¸ºfalseä¸»è¦æ˜¯å› ä¸ºieä¸æ”¯æŒæ•è·é˜¶æ®µçš„äº‹ä»¶å“åº”ã€‚æ‰€ä»¥ç»Ÿä¸€åœ¨å†’æ³¡é˜¶æ®µå¤„ç†ã€‚ 2. äº‹ä»¶ä»£ç†éœ€è¦æ³¨æ„çš„æ—¶ï¼Œäº‹ä»¶è§¦å‘çš„ç›®æ ‡æ€»æ˜¯æœ€åº•å±‚çš„èŠ‚ç‚¹ã€‚æ¯”å¦‚ä½ ç‚¹å‡»ä¸€æ®µæ–‡å­—ï¼Œä½ ä»¥ä¸ºä½ çš„äº‹ä»¶ç›®æ ‡èŠ‚ç‚¹åœ¨ div ä¸Šï¼Œä½†å®é™…ä¸Šè§¦å‘åœ¨p,spanç­‰å­èŠ‚ç‚¹ä¸Šã€‚ äº‹ä»¶ä»£ç†ä¼˜ç‚¹ï¼š å‡å°‘äº‹ä»¶ç»‘å®šï¼Œæå‡æ€§èƒ½ã€‚ åŠ¨æ€å˜åŒ–çš„ DOM ç»“æ„ï¼Œä»ç„¶å¯ä»¥ç›‘å¬ã€‚ 123456789//åŸç”Ÿelement.addEventListener(&apos;click&apos;, function(event) &#123; // åˆ¤æ–­æ˜¯å¦æ˜¯ a èŠ‚ç‚¹ if ( event.target.tagName == &apos;A&apos; ) &#123; // a çš„ä¸€äº›äº¤äº’æ“ä½œ &#125;&#125;, false);//jquery$(parent).on(&quot;click&quot;,&quot;a&quot;,function(e)&#123;...&#125;) 3. åœæ­¢å†’æ³¡è¿™ä¸ªhinæœ‰ç”¨å‘€ï¼Œç‰¹åˆ«æ˜¯ç”¨äºå¼¹çª—çš„äº¤äº’ä¸Šï¼Œå¦‚æœå¸Œæœ›ç‚¹å‡»å¼¹çª—ä»¥å¤–çš„éƒ¨åˆ†è®©å¼¹çª—æ¶ˆå¤±ï¼Œå°±éœ€è¦ç»™å¼¹çª—è®¾ç½®é˜»æ­¢å†’æ³¡ 1234567891011var overlay = document.querySelector(&apos;.overlay&apos;); overlay.addEventListener(&apos;click&apos;, function(event) &#123; event.stopPropagation(); &#125;); // Remove the overlay when a &apos;click&apos; // is heard on the document (&lt;html&gt;) element document.addEventListener(&apos;click&apos;, function(event) &#123; overlay.parentNode.removeChild(overlay); &#125;); 4. å…¶ä»–æ³¨æ„äº‹é¡¹ äº‹ä»¶å›è°ƒå‡½æ•°çš„ä½œç”¨åŸŸé—®é¢˜ï¼Œè¯¦è§å¦ä¸€ç¯‡æ¥¼ä¸»çš„åšæ–‡æ—¥å¸¸ç¬”è®°çš„ç¬¬2æ¡thisæ€»ç»“ã€‚ resizeäº‹ä»¶ï¼Œç›¸å…³çš„timing function: debounce throttle immediate æ€»ç»“æ¥è¯´ï¼Œthrottleå’Œdebounceéƒ½æ˜¯ä¸ºäº†é™åˆ¶åœ¨æŸæ®µæ—¶é—´å†…å¤§é‡è¿ç»­çš„è§¦å‘æŸä¸€äº‹ä»¶è€Œè¿›è¡Œçš„ä¼˜åŒ–å‡½æ•°ï¼Œä¸¤è€…åŒºåˆ«åœ¨äºï¼š å‰è€…åªæ˜¯å‡å°‘è§¦å‘é¢‘ç‡ï¼Œæ¯”å¦‚æ¯éš”200ms,500msè§¦å‘ä¸€æ¬¡ï¼Œä½†è¿˜æ˜¯è¦æ‰§è¡Œå¤šæ¬¡çš„ã€‚å¦‚mousemove è€Œåè€…æ˜¯æŸæ®µæ—¶é—´åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼ŒæŠŠé‚£äº›åŒæ ·çš„æ“ä½œè®¤ä¸ºæ˜¯ä¸€æ¬¡æ“ä½œçš„æŠ–åŠ¨éƒ¨åˆ†ï¼Œå»æŠ–ã€‚ç­‰ä¸å†è¿›è¡ŒæŸé¡¹æ“ä½œæ—¶ï¼ˆæ¯”å¦‚æ»šåŠ¨ï¼‰æ‰ä¼šå»æ‰§è¡Œå®ƒã€‚egã€‚keydown-&gt;keyupã€‚åè€…çš„ä¸€ä¸ªæ —å­å°±æ˜¯ ç™¾åº¦é¦–é¡µä¸Šinputæ¡† ç›‘å¬ç”¨æˆ·çš„è¾“å…¥ï¼Œä¸éœ€è¦ç”¨æˆ·å›è½¦æ‰å‘é€è¯·æ±‚ï¼Œè€Œæ˜¯é—´éš”æ¯”å¦‚500msæ‰ä¼šå‘é€ä¸€æ¬¡ã€‚éœ€è¦ä½“ä¼šçš„æ˜¯ï¼Œå¹¶ä¸æ˜¯æ¯éš”500mså°±å‘é€ä¸€æ¬¡ï¼Œå› æ­¤è¿™è¾¹ç”¨çš„æ˜¯debounceã€‚è¿˜æœ‰ä¸€ä¸ªæ —å­å°±æ˜¯åˆ—è¡¨æ»šåŠ¨çš„æ—¶å€™ï¼Œå¦‚æœäº¤äº’æ˜¯ç­‰ç”¨æˆ·åœä¸‹æ¥å†è‡ªåŠ¨åŠ è½½é‚£ä¹ˆæ˜¯debounce,å¦‚æœæ˜¯åœ¨æ»šåŠ¨çš„è¿‡ç¨‹ä¸­ä¸€ç›´ä¼šè‡ªåŠ¨åŠ è½½ä¸‹é¢çš„å†…å®¹ï¼Œé‚£å°±æ˜¯throttleå…·ä½“çš„ä¾‹å­å¯ä»¥çœ‹ ä¸Šä¸€ç¯‡æ–‡ç« 5.åŠæ—¶æœç´¢ã€‚ç­‰æœ‰ç©ºï¼Œæ¥¼ä¸»å†ä»”ç»†çœ‹ä¸‹ä¸‹é¢çš„æ–‡ç« ï¼Œç„¶åpoä¸€ä¸ªåœ¨çº¿demoå¥½äº†ã€‚ã€‚ä¹‹å‰çš„é¡¹ç›®ä¸­æœ‰ç”¨åˆ°ï¼Œä½†æ˜¯ä¸å¤ªå¥½æ”¾åˆ°codepené‡Œé¢â€¦ å¿˜äº†è¿˜æœ‰ä¸€ä¸ªimmediate..å®ƒå…¶å®å°±æ˜¯debounceï¼Œåªæ˜¯æŠŠå›è°ƒä¸­è¦æ‰§è¡Œçš„æ“ä½œæå‡ºæ¥å…ˆè¿›è¡Œäº†ã€‚debounceä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯å…ˆç­‰å•Šç­‰ï¼Œç­‰åˆ°delta æ—¶é—´åˆ°äº†ï¼Œæˆ‘ä»¬æ‰å»æ‰§è¡Œ æ¯”å¦‚ fetchKeywordList(),ä½†æ˜¯immediateæ˜¯å…ˆæ‰§è¡Œï¼Œç„¶åå†ç­‰å•Šç­‰ã€‚æœ‰ç‚¹ç±»ä¼¼äºwhile(){}å’Œdo{} while()ã€‚to read : timing controls JavaScript å‡½æ•°èŠ‚æµå’Œå‡½æ•°å»æŠ–åº”ç”¨åœºæ™¯è¾¨æ JSé­”æ³•å ‚ï¼šå‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰ä¸å‡½æ•°å»æŠ–ï¼ˆdebounceï¼‰ Debouncing and Throttling Explained Through Examples æ¥¼ä¸»æ¥æ›´æ–°äº†ï¼Œæ‰“ä¸ªå°å¹¿å‘Šï¼Œä¹‹å‰è¯´çš„throtteï¼Œæœ€è¿‘ä¹Ÿåšäº†demo,å…·ä½“æ˜¯å†™cnodeåˆ—è¡¨æ—¶æƒ³å®ç°æ— é™æ»šåŠ¨è€Œåšçš„ã€‚å…·ä½“è¯·æˆ³æ— é™æ»šåŠ¨ webpack å…¨å±€å˜é‡é…ç½®![](http://p1.bpimg.com/567571/b00272bb9e65ec16.png) å› ä¸ºé¡¹ç›®ä¸­å¾ˆå¤šé¡µé¢éƒ½éœ€è¦å‘é€ajaxè¯·æ±‚ï¼Œä¸å¯èƒ½åœ¨æ¯ä¸€é¡µéƒ½import axios from â€˜axiosâ€™ã€‚å› æ­¤éœ€è¦webpackå…¨å±€é…ç½®ä¸€ä¸‹ã€‚è¡¥å……ä¸€ä¸‹ä¹‹å‰å¼€å‘reacté¡¹ç›®çš„å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š å¦‚æœåªæœ‰æœ‰é™å‡ ä¸ªimport,å¯ä»¥ç”¨resolve.aliasæŒ‡å®šè·¯å¾„ï¼ŒåŠ å¿«æœç´¢é€Ÿåº¦ã€‚ å¦‚æœæƒ³æ‰“åŒ…çš„è¯ï¼Œä½†æ˜¯å…¬ç”¨åº“ä¸æƒ³æ‰“åŒ…è¿›å»ï¼Œå¯ä»¥ç”¨externalsæŒ‡å®šã€‚åŒæ—¶åœ¨htmlé‡Œé¢å¼•ç”¨ä¸€ä¸‹å¤–éƒ¨cdnã€‚å…¶ä»–çš„èŠå£«çœ‹å‰ç«¯å¤–åˆŠï¼Œä»¥åŠè¿™ä¸ªåšå®¢ å‡½æ•°å£°æ˜ æ—¥æœŸæ ¼å¼åŒ–1234567891011121314function format(time,fmt)&#123; let dateObj = new Date(parseInt(time)); var o = &#123; &quot;M+&quot;: dateObj.getMonth() + 1, //æœˆä»½ &quot;d+&quot;: dateObj.getDate(), //æ—¥ &quot;h+&quot;: dateObj.getHours(), //å°æ—¶ &quot;m+&quot;: dateObj.getMinutes(), //åˆ† &quot;s+&quot;: dateObj.getSeconds(), //ç§’ &#125;; if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (dateObj.getFullYear() + &quot;&quot;).substr(4 - RegExp.$1.length)); for (let k in o) if (new RegExp(&quot;(&quot; + k + &quot;)&quot;).test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((&quot;00&quot; + o[k]).substr((&quot;&quot; + o[k]).length))); return fmt;&#125;","categories":[{"name":"æ—¥å¸¸é˜…è¯»ç¬”è®°","slug":"æ—¥å¸¸é˜…è¯»ç¬”è®°","permalink":"http://yoursite.com/categories/æ—¥å¸¸é˜…è¯»ç¬”è®°/"}],"tags":[{"name":"å¼€å‘","slug":"å¼€å‘","permalink":"http://yoursite.com/tags/å¼€å‘/"},{"name":"å¥½ç©çš„","slug":"å¥½ç©çš„","permalink":"http://yoursite.com/tags/å¥½ç©çš„/"},{"name":"äº‹ä»¶","slug":"äº‹ä»¶","permalink":"http://yoursite.com/tags/äº‹ä»¶/"}]},{"title":"vueç»„ä»¶å­¦ä¹ -upload","slug":"vueç»„ä»¶å­¦ä¹ -upload-md","date":"2016-10-31T01:35:54.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2016/10/31/vueç»„ä»¶å­¦ä¹ -upload-md/","link":"","permalink":"http://yoursite.com/2016/10/31/vueç»„ä»¶å­¦ä¹ -upload-md/","excerpt":"","text":"æ¥¼ä¸»æœ€è¿‘é¡¹ç›®ç»“æŸæ— æ‰€äº‹äº‹=ã€‚=ï¼ŒåŠ ä¸Šä¹‹å‰ç”¨elementçš„ä¸Šä¼ ç»„ä»¶ï¼Œç”¨ç€æœ‰ä¸€ç‚¹ç‚¹ä¸çˆ½â€¦å°±è¯•ç€è‡ªå·±å†™äº†ä¸‹ä¸Šä¼ ç»„ä»¶ï¼Œå•Šï¼Œå†™å®Œçš„å¿ƒç†æ´»åŠ¨å°±æ˜¯ï¼Œè™½ç„¶ä¸€ç›´åæ§½elementçš„uploadï¼Œä½†æ˜¯çœŸæ­£è½®åˆ°è‡ªå·±å†™æ‰å‘ç°too young =ã€‚=ã€‚ä»–ä»¬è¿˜æ˜¯æŒºå‰å®³çš„ï¼Œç‰¹åˆ«æ˜¯ç”Ÿå‘½å‘¨æœŸçš„å°è£…ä¸Šã€‚å›å½’æ­£é¢˜ï¼Œæ¥¼ä¸»çš„ç»„ä»¶ï¼Œå‚ç…§ç€elementå’Œant-designçš„upload apiï¼Œå¤§è‡´å®ç°äº†å¦‚ä¸‹åŠŸèƒ½ï¼š å•æ–‡ä»¶/å¤šæ–‡ä»¶ä¸Šä¼  æ–‡ä»¶é¢„è§ˆï¼Œå¯é€‰é¢„è§ˆæ–¹å¼ï¼šåˆ—è¡¨/å¡ç‰‡ï¼Œå¡ç‰‡ä¸»è¦æ˜¯é’ˆå¯¹imgï¼ˆç”¨URL.createObjectURLï¼‰ progressè¿›åº¦æ¡ ä»£ç ä¸­å®é™…ä¸Šæœ‰ä¸¤ç§ï¼š ä¸€ç§æ˜¯è¯»åˆ°å†…å­˜ï¼Œç”¨fileReaderçš„progressäº‹ä»¶ è¿˜æœ‰ä¸€ç§æ˜¯xhrçš„upload.onprogressäº‹ä»¶ æœ€ç»ˆè¿›åº¦æ¡æ˜¯æŒ‰ç…§poståˆ°æœåŠ¡å™¨çš„è¿›åº¦æ¥æ˜¾ç¤ºçš„ï¼‰ accept é™å®šæ‰€èƒ½æ¥å—çš„æ–‡ä»¶ç±»å‹ å¯ä»¥æ”¯æŒæ‹–æ‹½ä¸Šä¼ ã€ç²˜è´´ä¸Šä¼  æºç è¯·æˆ³uploadç»„ä»¶ï¼Œuploadåˆ†æ”¯å“Ÿ 1. fileReaderå†…ç½®äº†å‡ ä¸ªäº‹ä»¶ï¼ŒåŒ…æ‹¬onprogress,onloadstart,onabort,onerror,onload,onloadendç­‰å‡ ä¸ªäº‹ä»¶ï¼Œå…¶ä¸­onloadendç±»ä¼¼äºfinallyæ“ä½œï¼Œä¸ç®¡onerrorè¿˜æ˜¯onloadï¼Œç»“æŸéƒ½ä¼šæ‰§è¡Œã€‚åœ¨è¿™è¾¹æˆ‘ä»¬éœ€è¦å¤„ç†è¿›åº¦æ¡ï¼Œé‚£ä¹ˆå…ˆçœ‹onprogressäº‹ä»¶ã€‚eventå¯¹è±¡æœ‰è¿™ä¹ˆå‡ ä¸ªæœ‰ç”¨çš„å±æ€§ï¼š lengthComputableï¼šå†³å®šæµè§ˆå™¨æ˜¯å¦å¯ä»¥å¯¹è¿›åº¦è¿›è¡Œè®¡ç®— total: æ–‡ä»¶å¤§å° loaded:å·²ç»ä¸Šä¼ çš„å¤§å° result: è¯»å–çš„ç»“æœï¼Œä»¥data:urlæ ¼å¼ï¼Œå¯ä»¥ç”¨æ¥ä½œä¸ºsrcå®ç°é¢„è§ˆåŠŸèƒ½ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹fileå¯¹è±¡ç›´æ¥ç”¨URL.createObjectURL())æ¥è·å–å®ç°ã€‚ 2. æ–‡ä»¶ä¸Šä¼ æ–°ç‰ˆæœ¬çš„XMLHttpRequestå¯¹è±¡ï¼Œä¼ é€æ•°æ®çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªprogressäº‹ä»¶ï¼Œç”¨æ¥è¿”å›è¿›åº¦ä¿¡æ¯ã€‚å®ƒåˆ†æˆä¸Šä¼ å’Œä¸‹è½½ä¸¤ç§æƒ…å†µã€‚ä¸‹è½½çš„progressäº‹ä»¶å±äºXMLHttpRequestå¯¹è±¡ï¼Œä¸Šä¼ çš„progressäº‹ä»¶å±äºXMLHttpRequest.uploadå¯¹è±¡ã€‚ 12xhr.onprogressxhr.upload.onprogress è¦æ˜¾ç¤ºè¿›åº¦çš„è¯ï¼Œå¯ä»¥åœ¨onprogressäº‹ä»¶ä¸­è·å–ä¿¡æ¯ã€‚å…·ä½“çš„è·Ÿä¸Šé¢ä¸€æ ·ã€‚ä¸»è¦å°±æ˜¯xhrå’Œfilereaderå…¶å®éƒ½å®ç°äº†progressEventã€‚å…·ä½“çš„å¯ä»¥é€šè¿‡ç»™eventå¯¹è±¡æ‰“logçœ‹ä¸‹event.targetå°±çŸ¥é“äº†ã€‚åœ¨filereaderçš„onprogressä¸­ï¼Œe.targetå°±æ˜¯filereaderï¼Œæ‰€ä»¥å½“freader.onloadäº‹ä»¶ä¸­å¯ä»¥è°ƒç”¨e.target.resultæ¥è·å–srcå®ç°é¢„è§ˆã€‚å¦‚ä¸‹: 12345678//filereaderå®ç°é¢„è§ˆvar reader = new FileReader(); reader.onload = (function(aImg) &#123; return function(e) &#123; //e.target=== reader aImg.src = e.target.result; &#125;; &#125;)(img); 12345678//xhrä¸­æ˜¾ç¤ºè¿›åº¦xhr.upload.onprogress = function updateProgress(e)&#123;//e.target===XMLHttpRequestUploadï¼Œå³xhr.uploadå¯¹è±¡ if(e.lengthComputable)&#123; e.percent = e.loaded/e.total*100; if(options.onProgress) options.onProgress(e); &#125; &#125;; 3. xhræ‰§è¡Œé¡ºåºï¼š 12345671. xhr openã€‚æ‰“å¼€è¿æ¥2. xhr send ï¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¿½è¸ªè¯·æ±‚xhrå½“å‰çŠ¶æ€ï¼Œç”¨xhr.readyStateæ¥è®¿é—®ã€‚ - case 0: xhrå¯¹è±¡åˆšè¢«åˆ›å»ºï¼Œå°šæœªopen - case 1: //opened - case 2: // headers_receivedã€‚æ”¶åˆ°å“åº”å¤´ - case 3: //loading ä¸‹è½½é˜¶æ®µ - case 4: //done åªæœ‰å½“ responseType ä¸ºâ€textâ€ã€â€â€æ—¶ï¼Œxhrå¯¹è±¡ä¸Šæ‰æœ‰æ­¤å±æ€§ï¼Œæ­¤æ—¶æ‰èƒ½è°ƒç”¨xhr.responseText ä»ä¸Šé¢ä»‹ç»çš„äº‹ä»¶ä¸­ï¼Œå¯ä»¥çŸ¥é“è‹¥xhrè¯·æ±‚æˆåŠŸï¼Œå°±ä¼šè§¦å‘xhr.onreadystatechangeå’Œxhr.onloadä¸¤ä¸ªäº‹ä»¶ã€‚ ä¸€èˆ¬å€¾å‘äº xhr.onloadäº‹ä»¶ï¼Œå› ä¸ºxhr.onreadystatechangeæ˜¯æ¯æ¬¡xhr.readyStateå˜åŒ–æ—¶éƒ½ä¼šè§¦å‘ï¼Œè€Œä¸æ˜¯xhr.readyState=4æ—¶æ‰è§¦å‘ã€‚ 123456789//onload å½“è¯·æ±‚æˆåŠŸå®Œæˆæ—¶è§¦å‘ï¼Œæ­¤æ—¶xhr.readystate=4const xhr = new XMLHttpRequest();xhr.onload = function onload()&#123; if(xhr.status&lt;200 ||(xhr.status&gt;=300 &amp;&amp; xhr.status!== 304)) if(options.onError) options.onError(getError(action,xhr)); else options.onSuccess(getResponseBody(xhr)); &#125; è¡¥å……ä¸€æ¡ï¼Œxhr.sendåœ¨xmlhttprequest2ä¸­data typeå…¶å®æ˜¯å¯ä»¥æœ‰formdataçš„ï¼Œè¿™ä¸ªå°±æœ‰åˆ©äºæˆ‘ä»¬ä¸Šä¼ æ–‡ä»¶ã€‚å®ƒä¼šè‡ªåŠ¨å°†æ–‡ä»¶è½¬å˜ä¸ºå­—èŠ‚æµå¯¹è±¡ï¼Œç„¶ååå°å¯ä»¥è¿›è¡Œè§£æã€‚å¦‚æœæ˜¯å•çº¯çš„obj data,é‡Œé¢æ”¾ fileçš„è¯ï¼Œæ— æ³•ä¼ è¾“è¿‡å»ã€‚ä¹Ÿæ²¡æ³•è§£æã€‚ 4. html5 drag drop ä¸€å®šè¦åœ¨dragoverçš„å¤„ç†äº‹ä»¶ä¸­preventDefault(),å¦åˆ™é»˜è®¤è¡Œä¸ºæ˜¯ä¼šè·³è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢é¢„è§ˆæ–‡ä»¶çš„ã€‚ è·å–æ–‡ä»¶åˆ—è¡¨: e.dataTransfer.files ä¸ä¼šè§¦å‘åˆ°inputçš„changeäº‹ä»¶ 5. fileä¸Šä¼ 1234&lt;input type=\"file\" style=\"display:none\" id=\"fileInput\" ref=\"fileInput\" multiple @change=\"handleChange\"&gt;&lt;div @click=\"clickToChooseFile\" for=\"fileInput\"&gt; &lt;p class=\"upload-hint\"&gt;æ”¯æŒå•æ–‡ä»¶/å¤šæ–‡ä»¶ä¸Šä¼ ï¼Œè¯·é€‰æ‹©imageç±»å‹&lt;/p&gt; &lt;/div&gt; 1234//æ¨¡æ‹Ÿinputç‚¹å‡»clickToChooseFile()&#123; this.$refs.fileInput.click();&#125;, ä¸€èˆ¬æ˜¯æŠŠinputè¿›è¡Œéšè—ï¼Œç”¨å¦ä¸€ä¸ªè‡ªå®šä¹‰æ ·å¼çš„divä»£æ›¿å®ƒï¼Œç„¶ååœ¨clickäº‹ä»¶ä¸­å»æ‰‹åŠ¨clickè¯¥inputã€‚ è€Œç›‘å¬æ–‡ä»¶å˜åŒ–çš„äº‹ä»¶ onchangeäº‹ä»¶çš„å‚æ•°æ˜¯æœ¬åœ°æ–°å˜æ›´ï¼ˆå¢åŠ çš„filesæ•°ç»„ï¼‰ã€‚ 6. ç²˜è´´ä¸Šä¼ æˆ‘ä»¬éœ€è¦å¯¹itemsçš„æ¯ä¸€é¡¹è½¬åŒ–ä¸ºfileå¯¹è±¡ã€‚ 12345const imageFiles = Array.prototype.slice.call(e.clipboardData.items).filter(item=&gt;&#123; return (item.kind == &apos;file&apos; &amp;&amp; item.type.indexOf(&apos;image/&apos;) &gt;= 0); &#125;).map(item=&gt; item.getAsFile()); this.handleFiles(imageFiles); e.clipboardData.items.clear();//å®é™…ä¸Šæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ ç„¶åå°±å¯ä»¥ç»§ç»­ç”¨ä¹‹å‰çš„æ–¹æ³•ï¼ˆURL.createObjURL(file)ï¼‰è¯»å–ï¼Œé¢„è§ˆç­‰ç­‰æ“ä½œã€‚å…¶å®å®ƒå†…ç½®äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯getAsFileï¼Œä¸€ä¸ªæ˜¯getAsStringã€‚è½¬æ¢å®Œåä¼šæˆä¸ºblobå¯¹è±¡ï¼ˆfileä¹Ÿæ˜¯ä¸€ä¸ªblobå¯¹è±¡ï¼‰ã€‚ æ³¨æ„ç‚¹ï¼š æ¥¼ä¸»æœ¬æ¥æ˜¯æƒ³ç²˜è´´å®Œä»¥åæ¸…ç©ºå‰ªè´´æ¿çš„ã€‚ä½†æ˜¯è²Œä¼¼çœ‹äº†ä¸‹w3cçš„æ–‡æ¡£ï¼Œåªæœ‰åœ¨read/write modeä¸‹æ‰å¯ä»¥è¿›è¡Œæ“ä½œï¼Œè€Œreadå¯¹åº”äºdrag event,writeå¯¹åº”äºdropäº‹ä»¶ï¼Œå…¶ä»–å¯¹åº”äºprotected modeã€‚ è€Œå¹³æ—¶æˆ‘ä»¬æ‰€è¯´çš„æ¯”å¦‚çŸ¥ä¹çš„å‰ªè´´ç‰ˆæƒä¿¡æ¯ï¼Œåˆ™æ˜¯ç”¨e.clipboardData.setData()è¿™äº›æ¥è¿›è¡Œæ“ä½œçš„ã€‚æ—¢ç„¶å¯ä»¥setï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ç”¨å®ƒæ¥æ¸…ç©ºã€‚e.clipboardData.clearData(â€œtextâ€)ä¹Ÿå¯ä»¥å®ç°ã€‚ references ä½ çœŸçš„ä¼šä½¿ç”¨XMLHttpRequestå—ï¼Ÿ HTML5 drag &amp; drop æ‹–æ‹½ä¸æ‹–æ”¾ç®€ä»‹","categories":[{"name":"å¼€å‘æ—¥å¸¸","slug":"å¼€å‘æ—¥å¸¸","permalink":"http://yoursite.com/categories/å¼€å‘æ—¥å¸¸/"}],"tags":[{"name":"vue","slug":"vue","permalink":"http://yoursite.com/tags/vue/"},{"name":"ç»„ä»¶","slug":"ç»„ä»¶","permalink":"http://yoursite.com/tags/ç»„ä»¶/"},{"name":"upload","slug":"upload","permalink":"http://yoursite.com/tags/upload/"}]},{"title":"æ—¥å¸¸ç¬”è®°","slug":"æ—¥å¸¸ç¬”è®°","date":"2016-09-30T09:22:36.000Z","updated":"2017-03-25T05:32:28.000Z","comments":true,"path":"2016/09/30/æ—¥å¸¸ç¬”è®°/","link":"","permalink":"http://yoursite.com/2016/09/30/æ—¥å¸¸ç¬”è®°/","excerpt":"","text":"è¿™è¾¹çš„ç¬”è®°ä¸»è¦è®°è½½è‡ªå·±çœ‹å‘¨åˆŠæˆ–è€…ä¸é”™çš„æ–‡ç« ä¸­çš„ä¸€äº›good pointsï¼Œæˆ–è€…ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹,ä¹ŸåŠ å…¥äº†è‡ªå·±çš„ä¸€äº›æƒ³æ³• :) 1.const var letåŒºåˆ« let constçš„ä½œç”¨åŸŸæ›´å°ï¼Œä¸ºå—ä½œç”¨åŸŸï¼ˆ{}ï¼‰,varä¸ºå‡½æ•°ä½œç”¨åŸŸã€‚å¦‚æœæ˜¯forå¾ªç¯ä¸­çš„let ï¼Œå¦‚ 1234567891011121314var x = 0;for (let i = 0; i &lt; 10; i++) &#123; x += 10; //iåªåœ¨è¯¥ä½œç”¨åŸŸå­˜åœ¨&#125;try &#123; console.log(i);&#125; catch(e) &#123; console.log( &apos;i does not exist here!&apos; );&#125; è¾“å‡ºä¸ºï¼š â€˜i does not exist here!â€™ conståªèƒ½åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œå®ƒè¡¨ç¤ºå®ƒæ‰€ä»£è¡¨çš„å¼•ç”¨ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯æŒ‡é’ˆï¼‰æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€æŒ‡å‘çš„å†…å®¹å®é™…æ˜¯å¯ä»¥å˜çš„ã€‚å¦‚ 12345const a = &#123;&#125;;a[&apos;b&apos;] = 1;const b = [];b.push(1) ä¸‰è€…éƒ½ä¼šå˜é‡æå‡(hoist),åªæ˜¯varæå‡æ—¶ä¼šé»˜è®¤è®¾ç½®åˆå§‹å€¼ undefinedï¼Œè€Œlet,constä¸ä¼šã€‚å› æ­¤ï¼Œå¦‚æœåœ¨å£°æ˜æ—¶æ²¡æœ‰åˆå§‹åŒ–ï¼Œç„¶åå°±å»è®¿é—®å€¼çš„è¯ï¼Œvarä¼šæŠ¥å‡ºundefinedï¼Œè€Œlet,constä¼šæŠ›å‡ºReferenceError 1234//ç±»ä¼¼äºä»‹ä¸ªæ ·å­var a;console.log(\"a\",a); //undefineda = 3; 2. this æ€»ç»“æœ€è¿‘å†™ifeçš„taskçš„æ—¶å€™é‡åˆ°è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œ 1234567891011121314151617Queue.prototype = &#123; ... bubbleSort:function()&#123; var swap = false,that = this,firstRound = true; var arr = this.queue, i = 1, lastIndexOfNotSortedArr = arr.length-1; var bubbleSortId = setInterval(_runSort,interval); function _runSort()&#123; ... this.render(); //è¿™è¾¹çš„thiså®é™…ä¸Šæ˜¯windowï¼Œè€Œä¸æ˜¯newå‡ºæ¥çš„å¯¹è±¡ &#125;&#125; è®°å¾— ä½ ä¸çŸ¥é“çš„javascripté‡Œé¢æœ‰è®²è§£è¿‡ï¼Œå¥½ä¸å®¹æ˜“ç¿»å‡ºæ¥ä¸€ç‚¹ï¼Œå›å¿†ä¸€ä¸‹ã€‚ a. å…¨å±€/functionä¸­çš„thiséƒ½æŒ‡å‘windowå¯¹è±¡ b. æ˜¾ç¤ºè°ƒç”¨å¦‚ a.func()ï¼Œæˆ–è€…ç”¨æ„é€ å‡½æ•°æ–°å»ºå¯¹è±¡b = new B()æ—¶ï¼Œé‡Œé¢çš„this åˆ†åˆ«æŒ‡å‘a,b c. apply,call,bindæŒ‡å‘ç»‘å®šçš„å¯¹è±¡ d. å†…éƒ¨å‡½æ•°ä¸­çš„thisæŒ‡å‘window æ­¤å¤„å°±å°è¯äº†ä¸Šé¢çš„ä»£ç ä¸­çš„é—®é¢˜ 12345678910è¿˜æœ‰è¿™æ ·çš„æ —å­function Foo() &#123; this.value = 42; this.method = function() &#123; // this refers to the global object console.log(this.value); // undefined console.log(this === window); // true &#125;; setTimeout(this.method, 500);&#125; è¡¥å……æ —å­é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ —å­éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¯¹ç…§ç€çœ‹b,dä¸¤æ¡ã€‚ See the Pen this in event by lu (@luchen) on CodePen. 12345678910111213var element = document.getElementById(&apos;element&apos;);var user = &#123; firstname: &apos;Bob&apos;, greeting: function()&#123; alert(&apos;My name is &apos; + this.firstname); &#125;&#125;;user.greeting(); // attention1: My name is Bob// Attach user.greeting as a callbackelement.addEventListener(&apos;click&apos;, user.greeting);// attention2: My name is undefined attention1å¤„ç¬¦åˆbçš„è§„åˆ™ï¼Œè€Œattention2ä¸­ï¼Œåˆ™å®é™…ä¸Šæ˜¯å› ä¸ºï¼šäº‹ä»¶ç»‘å®šå‡½æ•°æ—¶ï¼Œä¼šä»¥å½“å‰å…ƒç´ ä¸ºä½œç”¨åŸŸæ‰§è¡Œã€‚ï¼ˆè™½ç„¶æ¥¼ä¸»æœ€å¼€å§‹ä»¥ä¸ºæ˜¯æŠŠuser.greetingå‡½æ•°èµ‹ç»™ä¸€ä¸ªåŒ¿åå›è°ƒå‡½æ•°ï¼Œfunction(){} = user.greeting.å› æ­¤åœ¨è§¦å‘å®ƒçš„æ—¶å€™thiså…¶å®æ˜¯ä¸¢å¤±äº†çš„ï¼‰ã€‚ä¸è¿‡æµ‹è¯•äº†ä¸‹ï¼Œè²Œä¼¼ç¡®å®æ˜¯æŠŠthisç»‘åœ¨äº†å…ƒç´ ä¸Šçš„ã€‚å…·ä½“çœ‹codepené‡Œé¢this.nodeNameã€‚å…³äºè¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š åŒ…è£¹åœ¨å¦ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­ 1element.addEventListener(&apos;click&apos;, function()&#123;user.greeting()&#125;); bind user 1234element.addEventListener(&apos;click&apos;, user.greeting.bind(user));//æˆ–è€…ä¸€æ­¥åˆ°ä½ï¼š user.greeting = user.greeting.bind(user); element.addEventListener(&apos;click&apos;, user.greeting); â€”â€”â€”â€”â€”â€” è¿™æ˜¯ä¸€æ¡æ —å­åˆ†å‰²çº¿ end â€”â€”â€”â€”â€” å…·ä½“çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸‰ç§ï¼š var that = this bind es6ç®­å¤´å‡½æ•°ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯ç”¨çš„ç¬¬ä¸€ç§æ–¹æ³•ï¼ˆç»babelè½¬è¯‘åå¯ä»¥çœ‹åˆ°ï¼Œé‡Œé¢æ˜¯æ²¡æœ‰thisçš„ï¼Œæ˜¯æ²¿ç”¨çš„å¤–éƒ¨çš„thisï¼‰å…·ä½“è§bié¡¹ç›®å¼€å‘æ€»ç»“ç¬¬26æ¡ ===æ›´æ–°ä¸Šé¢æˆ‘ä»¬è¯´åˆ°è¿‡å…ƒç´ çš„äº‹ä»¶ä¸­thisæ˜¯ä¸å…ƒç´ ç»‘å®šçš„ï¼Œé‚£ä¹ˆå¦‚æœåœ¨äº‹ä»¶å‡½æ•°ä¸­å¦å¤–å®šä¹‰çš„å›è°ƒå‡½æ•°ä¼šä¸¢å¤±this. 123456document.getElementById(&apos;div&apos;).onclick = function()&#123; console.log(this.id); //div var func = function()&#123; console.log(this.id) //undefined &#125;&#125; å¦‚æœ var getId = document.getElementByIdã€‚ç„¶åæ‰§è¡Œ getId(&#39;div&#39;)ã€‚ä¼šå®é™…ä¸Šå˜æˆè°ƒç”¨æ™®é€šå‡½æ•°getElementById,thiså°±æŒ‡å‘äº†windows,è€Œä¸æ˜¯document.å› æ­¤éœ€è¦è¿›è¡Œç»‘å®šdocumentã€‚ 12345document.getElementById = ( return function(func)&#123; return func.apply(document,arguments) &#125;)(document.getElementById); 3.ä¸­æ–‡æ­£åˆ™1/\\u4E00-\\u9FA5/ 4.è·¨åŸŸæ€»ç»“åœ¨å…¬å¸å¼€å‘çš„è¿‡ç¨‹ä¸­å…¶å®ä¹Ÿé‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯åƒå¦ä¸€ä¸ªæœåŠ¡å™¨postè¯·æ±‚ï¼Œæ˜¯çš„ï¼Œå‘æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯è·¨åŸŸï¼Œä¸€ä¸ªæ˜¯è·¨åŸŸæ²¡æ³•ç”¨post =ã€‚=ã€‚ä½†æ˜¯å½“æ—¶æ—¶é—´ç´§è¿«,åç«¯åŒå­¦ä¸æ˜¯å¾ˆä¼šé…ç½®ï¼Œå°±ç²—æš´çš„éƒ½ç”¨jsonp+getè§£å†³äº† 4.1 åœºæ™¯åŒæºç­–ç•¥ï¼Œå‡ºäºé˜²èŒƒè·¨ç«™è„šæœ¬çš„æ”»å‡»ï¼Œç¦æ­¢å®¢æˆ·ç«¯è„šæœ¬ï¼ˆå¦‚ JavaScriptï¼‰å¯¹ä¸åŒåŸŸçš„æœåŠ¡è¿›è¡Œè·¨ç«™è°ƒç”¨ã€‚è·¨ç«™è°ƒç”¨ä¸»è¦æŒ‡ï¼Œåªè¦ç½‘ç«™çš„ åè®®åprotocol ä¸»æœºhost ç«¯å£å·port è¿™ä¸‰ä¸ªä¸­çš„ä»»æ„ä¸€ä¸ªä¸åŒï¼Œç½‘ç«™é—´çš„æ•°æ®è¯·æ±‚ä¸ä¼ è¾“ï¼ˆajaxè¯·æ±‚ï¼‰ä¾¿æ„æˆäº†è·¨åŸŸè°ƒç”¨ã€‚è€Œç”¨scriptæ ‡ç­¾è¯·æ±‚å’Œè§£æåˆ™å¯ä»¥æ­£å¸¸è¿ä½œã€‚ æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè·¨åŸŸè¯·æ±‚å¹¶éæ˜¯æµè§ˆå™¨é™åˆ¶äº†å‘èµ·è·¨ç«™è¯·æ±‚ï¼Œè€Œæ˜¯è¯·æ±‚å¯ä»¥æ­£å¸¸å‘èµ·ï¼Œåˆ°è¾¾æœåŠ¡å™¨ç«¯ï¼Œä½†æ˜¯æœåŠ¡å™¨è¿”å›çš„ç»“æœä¼šè¢«æµè§ˆå™¨æ‹¦æˆªã€‚ æ›´ç›´ç™½ä¸€ç‚¹çš„è§£é‡Šå°±æ˜¯ï¼Œä»¥é’“é±¼ç½‘ç«™ï¼ˆgetæœåŠ¡å™¨æ•°æ®ï¼‰ä¸ºä¾‹ã€‚ta0bao.comï¼Œç”¨æˆ·æäº¤ä¿¡æ¯ï¼Œé‚£ä¹ˆé»‘å®¢ä¼šå‘é€ajaxåˆ°taobao.comï¼Œç„¶åtaobaoé‚£è¾¹çš„æœåŠ¡å™¨è¿”å›æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åŒæºç­–ç•¥çš„è¯ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«è·å–åˆ°ã€‚ä½†æ˜¯æœ‰äº†åŒæºç­–ç•¥ï¼Œæµè§ˆå™¨é‚£è¾¹å¯ä»¥å¾—åˆ°è¿™ä¸ªæ•°æ®ï¼Œä½†æ˜¯é»‘å®¢åœ¨ä»£ç é‡Œæ˜¯å¾—ä¸åˆ°çš„ã€‚è¢«æµè§ˆå™¨æ‹¦æˆªäº†ï¼Œå°±ä¸ç»™ä½ å°±ä¸ç»™ä½ =ã€‚=ã€‚ åŒæºåªèƒ½é™åˆ¶ä¸è¢«è·å–æ•°æ®ï¼Œä½†æ˜¯å‘é€å…¶å®æ˜¯é™åˆ¶ä¸äº†çš„ã€‚æ¯”å¦‚è·å–ç”¨æˆ·çš„ç§å¯†ä¿¡æ¯ã€‚æ¯”å¦‚xssã€‚é»‘å®¢å¯ä»¥åœ¨ç”¨æˆ·æäº¤ä¿¡æ¯ï¼ˆåŠ ä¸Šç°åœ¨åœ¨a.comä¸‹ï¼‰æ—¶å‘é€ä¸¤ä¸ªajax,ä¸€ä¸ªç»™æ­£å¸¸çš„ç½‘ç«™ï¼ˆa.comï¼‰ï¼Œä¸€ä¸ªç»™è‡ªå·±çš„æœåŠ¡å™¨(b.com)ã€‚è¿™ä¸ªæ˜¯ç±³æœ‰åŠæ³•é˜»æ‹¦å“’ï¼Œè¦ä¸ç„¶é’“é±¼ç½‘ç«™ä¹Ÿä¸ä¼šè¾£ä¹ˆçŒ–ç‹‚â€¦æ‘Šæ‰‹ã€‚ è¿™å®é™…ä¸Šä¹Ÿè¯´æ˜äº†è·¨åŸŸå‡ºç°çš„åŸå› åŠè§£å†³æ–¹æ¡ˆï¼ˆç”¨è·å–scriptä»£æ›¿ajaxè¯·æ±‚ï¼‰ 4.2 è§£å†³æ–¹æ¡ˆï¼šJSONP JSONPæ˜¯ JSON çš„ä¸€ç§ä½¿ç”¨æ¨¡å¼ï¼Œå¯ä»¥è§£å†³ä¸»æµæµè§ˆå™¨çš„è·¨åŸŸæ•°æ®è®¿é—®é—®é¢˜ã€‚å…¶åŸç†æ˜¯æ ¹æ® XmlHttpRequest å¯¹è±¡å—åˆ°åŒæºç­–ç•¥çš„å½±å“ï¼Œè€Œ script æ ‡ç­¾å…ƒç´ å´ä¸å—åŒæºç­–ç•¥å½±å“ï¼Œå¯ä»¥åŠ è½½è·¨åŸŸæœåŠ¡å™¨ä¸Šçš„è„šæœ¬ï¼Œç½‘é¡µå¯ä»¥ä»å…¶ä»–æ¥æºåŠ¨æ€äº§ç”Ÿ JSON èµ„æ–™ã€‚ç”¨ JSONP è·å–çš„ä¸æ˜¯ JSON æ•°æ®ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥è¿è¡Œçš„ JavaScript è¯­å¥ã€‚jsonæ•°æ®è¢«å°è£…åœ¨å›è°ƒå‡½æ•°é‡Œï¼Œå°±æ˜¯æ‰€è°“çš„json with paddingï¼ˆjsonå¡«å……ï¼‰ æˆ‘ä»¬é€šå¸¸ä¼šç›´æ¥ç”¨jqueryçš„jsonpçš„è§£å†³æ–¹æ¡ˆï¼Œç”¨æ³•å¦‚ä¸‹ï¼š 123456789requestDict[&quot;update&quot;] = $.ajax(&#123; url: urls.update+encodeURIComponent(JSON.stringify(queriesObj)), type: &quot;get&quot;, dataType: &quot;jsonp&quot;, jsonp: &quot;callback&quot;, jsonpCallback: &quot;handleServerPolyData&quot;,//å›è°ƒ success: function(serverData) &#123; &#125;, ); æœ€ç»ˆå‘å‡ºçš„urlæ˜¯è¿™æ ·çš„ 1http://bigdata.xiaojukeji.com/hotmap/getHeatmapOverlay?productLine=taxi?callback=handleServerHeatData? ä½†å®é™…ä¸Šå®ƒæ˜¯åšäº†ä¸€å±‚å°è£…ï¼Œä¼šæœ‰ç‚¹è¯¯å¯¼ã€‚è¿”å›çš„å®é™…ä¸Šè¿˜æ˜¯javascriptè¯­å¥ï¼Œjqueryè¿›è¡Œäº†è§£æï¼Œæ­£ç¡®æ—¶ä¼šè°ƒç”¨successï¼ŒåŒæ—¶æŠŠé‡Œé¢çš„æ•°æ®å­˜ä¸ºä¸Šé¢çš„serverDataã€‚è®©ä½ çœ‹èµ·æ¥jsonpè·Ÿæ™®é€šçš„ajaxè¯·æ±‚æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚ å®é™…ä¸Šå¦‚æœè‡ªå·±å®ç°çš„è¯ï¼Œåº”è¯¥æ˜¯è¿™æ ·çš„ï¼šserver1 è¯·æ±‚é¡µé¢æœ‰ä¸€ä¸ªscriptæ ‡ç­¾ 1&lt;script src = &apos;http://localhost:3001/jsonServerResponse?jsonp=jsonpCallback&apos;&gt;&lt;/script&gt; æˆ–è€…åœ¨ä»£ç é‡Œæ‰‹åŠ¨createElement(â€œscriptâ€)ï¼Œç„¶åè®¾ç½®srcåappendåˆ°headä¸­ã€‚ 1234//server1è¯·æ±‚é¡µé¢çš„jsä»£ç åªæœ‰ä¸‹é¢çš„å›è°ƒfunction jsonpCallback(data) &#123; console.log(\"jsonpCallback: \"+data.name)&#125; 12345678910// server2å¤„ç†è¯·æ±‚app.get(&apos;/jsonServerResponse&apos;, function(req, res) &#123; var cb = req.query.jsonp console.log(cb) var data = &apos;var data = &#123;&apos; + &apos;name: $(&quot;#name&quot;).val() + &quot; - server 3001 jsonp process&quot;,&apos; + &apos;id: $(&quot;#id&quot;).val() + &quot; - server 3001 jsonp process&quot;&apos; + &apos;&#125;;&apos; var debug = &apos;console.log(data);&apos; var callback = &apos;$(&quot;#submit&quot;).click(function() &#123;&apos; + data + cb + &apos;(data);&apos; + debug + &apos;&#125;);&apos; res.send(callback) res.end()&#125;) å¯ä»¥çœ‹å‡ºï¼ŒæœåŠ¡ç«¯è¿”å›çš„åº”è¯¥æ˜¯ä¸€æ®µç«‹å³æ‰§è¡Œçš„jsä»£ç ã€‚ 4.3 ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šè§£æå¿«+è§£å†³è·¨åŸŸã€‚jsonpä¸­ï¼Œç”±äºæ•°æ®æ˜¯è¢«å½“æˆåŸç”Ÿçš„javascriptï¼Œå› æ­¤è§£æå’ŒåŸç”Ÿçš„ä¸€æ ·å¿«ï¼Œæ‰€ä»¥æ•°æ®ä¼ è¾“æ—¶ï¼Œæ—¶é—´ï¼ˆä¸‹è½½+è§£æï¼‰ä¸­çš„è§£æéƒ¨åˆ†å‡ ä¹ä¸º0 ç¼ºç‚¹ï¼ˆåŠ¨æ€è„šæœ¬æ³¨å…¥å¼•èµ·çš„ï¼‰ï¼š ä¸å®‰å…¨ åªèƒ½getè¯·æ±‚ ä¸èƒ½è®¾ç½®è¯·æ±‚çš„å¤´ä¿¡æ¯ï¼Œä¹Ÿå°±ä¸èƒ½è®¾ç¼“å­˜ã€‚ä¹Ÿä¸å¯ä»¥è®¿é—®è¯·æ±‚çš„å¤´ä¿¡æ¯ ä¸èƒ½å¤±è´¥å¤„ç† éœ€è¦ç­‰åˆ°æ‰€æœ‰æ•°æ®è¿”å›æ‰å¯ä»¥è®¿é—® é’ˆå¯¹jsonpä¸èƒ½æ”¯æŒpostç­‰è¯·æ±‚çš„é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯cors(Cross-Origin Resource Sharing)ä¸»è¦æ˜¯æœåŠ¡å™¨å¯¹å“åº”å¤´è¿›è¡Œäº†å¤„ç† 12//Access-Control-Allow-Originres.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;); reference:å‰ç«¯è·¨åŸŸè¯·æ±‚åŸç†åŠå®è·µ ===2016/11/20æ›´æ–° æœ¬æ¬¡æ›´æ–°æ˜¯é’ˆå¯¹jsonpä¸èƒ½postçš„é—®é¢˜ã€‚ä¹‹å‰æˆ‘ä»¬è¯´äº†å¯ä»¥ç”¨corsï¼Œè¿™ä¸ªæ¥¼ä¸»è¿˜æ²¡æœ‰è¯•è¿‡ã€‚æ¥¼ä¸»è¿™æ¬¡æ˜¯ç”¨å‰ç«¯ä»£ç†çš„æ–¹æ³•ï¼Œæœ¬è´¨æ˜¯æœ¬åœ°è¯·æ±‚æœ¬åœ°æœåŠ¡å™¨ï¼Œæœ¬åœ°æœåŠ¡å™¨å»åšè½¬å‘ï¼ŒæœåŠ¡å™¨é—´çš„è½¬å‘æ˜¯æ²¡æœ‰è·¨åŸŸè¿™ä¸ªæ¦‚å¿µçš„ã€‚å› æ­¤å¯ä»¥è§£å†³ï¼Œè€Œè¿™ç§æ–¹æ³•ä¸‹ï¼ŒæœåŠ¡ç«¯å®é™…ä¸Šä¸éœ€è¦åƒcorsé‚£æ ·è¿›è¡Œå˜æ›´ã€‚ï¼ˆåœºæ™¯æ˜¯ï¼Œæœ¬åœ°å¼€å‘éœ€è¦è®¿é—®å¦ä¸€ä¸ªåŸŸåä¸‹çš„æ•°æ®ï¼‰ã€‚ å…·ä½“æ–¹æ³•æ˜¯ï¼š vue-cliä¸­ï¼Œæ˜¯ä½¿ç”¨äº†http-proxy-middlewareçš„ä¸­é—´ä»¶ï¼ˆnode-http-proxyï¼‰è¿›è¡Œå¤„ç†ï¼Œå¦‚ä¸‹ 1234567proxyTable: &#123; &apos;/ip/serverInfo&apos;: &#123; target: &apos;https://cnodejs.org&apos;, //origin,åŸŸåéƒ¨åˆ† pathRewrite:&#123;&apos;^/ip/serverInfo&apos;: &apos;/api/v1/topics&apos;&#125;, changeOrigin: true &#125;,&#125;, webpackä¸­æœ‰ä¸“é—¨çš„é…ç½®ï¼Œå…¶å®ä¹Ÿæ˜¯åˆ©ç”¨çš„http-proxy-middleware 123456789 // In webpack.config.js&#123; devServer: &#123; proxy: &#123; &apos;/api&apos;: &#123; target: &apos;https://other-server.example.com&apos;, secure: false &#125; &#125; 5. å³æ—¶æœç´¢ç›‘å¬v-modelå˜åŒ–ï¼Œæ¯æ¬¡å˜åŠ¨å°±å–æ¶ˆä¸Šä¸€æ¬¡è¯·æ±‚ã€‚å½“è¶…è¿‡500msçš„æ—¶å€™å°±å‘é€æœç´¢è¯·æ±‚ã€‚ 1234567watch: &#123; searchInput(newValue, oldValue)&#123; clearTimeout(timer); if(newValue.trim() !==oldValue.trim()) timer = setTimeout(this.fetchKeywordList,500); &#125; &#125;, 6. cookie.jsä»£ç èµæ1234567var value = document.cookie.split(/;\\s*/) .map(opt.autoencode ? opt.decode : function (d) &#123; return d; &#125;) .map(function (part) &#123; return part.split(&apos;=&apos;); &#125;) .reduce(function (parts, part) &#123; parts[part[0]] = part[1]; return parts; &#125;, &#123;&#125;)[data]; demo: var arr = [{â€œidâ€:3,â€zh_nameâ€:â€testâ€},{â€œidâ€:5,â€zh_nameâ€:â€â€lili}]ç»“æœï¼šObject {3: â€œtestâ€, 5: â€œliliâ€} 1234arr.reduce((prev,cur)=&gt;&#123; prev[cur[&quot;id&quot;]] = cur[&quot;zh_name&quot;]; return prev;&#125;,&#123;&#125;)","categories":[{"name":"æ—¥å¸¸é˜…è¯»ç¬”è®°","slug":"æ—¥å¸¸é˜…è¯»ç¬”è®°","permalink":"http://yoursite.com/categories/æ—¥å¸¸é˜…è¯»ç¬”è®°/"}],"tags":[{"name":"å¥‡èˆå‘¨åˆŠ","slug":"å¥‡èˆå‘¨åˆŠ","permalink":"http://yoursite.com/tags/å¥‡èˆå‘¨åˆŠ/"},{"name":"å‰ç«¯åšæ–‡","slug":"å‰ç«¯åšæ–‡","permalink":"http://yoursite.com/tags/å‰ç«¯åšæ–‡/"},{"name":"è·¨åŸŸ","slug":"è·¨åŸŸ","permalink":"http://yoursite.com/tags/è·¨åŸŸ/"},{"name":"debounce","slug":"debounce","permalink":"http://yoursite.com/tags/debounce/"}]},{"title":"es6 å­¦ä¹ ç¬”è®°(å››)","slug":"es6-4","date":"2016-09-27T05:54:03.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2016/09/27/es6-4/","link":"","permalink":"http://yoursite.com/2016/09/27/es6-4/","excerpt":"","text":"proxyç”¨äºä»£ç†ã€‚åœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªã€‚å°±æ¯”å¦‚å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ã€‚è®¾ç½®äº†ä»£ç†åï¼Œå¯¹åŸå¯¹è±¡çš„ä¿®æ”¹ç›´æ¥é€šè¿‡ä»£ç†å°±å¯ä»¥ã€‚ æœ‰ç‚¹å¯ä»¥ç±»æ¯”äºæ ‡ç­¾æ¨¡æ¿ï¼Œåšäº†ä¸€å±‚å¤„ç†ã€‚ åŸºæœ¬ç”¨æ³• new Proxy(targetObj,handler) handler:{ä¸€ç»„æ–¹æ³•ï¼Œå¦‚get(){},set(){}} 123456789101112131415var person = &#123; name: &quot;å¼ ä¸‰&quot;&#125;;var proxy = new Proxy(person, &#123; get: function(target, property) &#123; if (property in target) &#123; return target[property]; &#125; else &#123; throw new ReferenceError(&quot;Property \\&quot;&quot; + property + &quot;\\&quot; does not exist.&quot;); &#125; &#125;&#125;);proxy.name // &quot;å¼ ä¸‰&quot;proxy.age // æŠ›å‡ºä¸€ä¸ªé”™è¯¯ å¸¸ç”¨çš„å¯ä»¥æ‹¦æˆªçš„æ–¹æ³• get/set :æ‹¦æˆªå±æ€§è·å–/è®¾ç½® å¦‚ obj.nameã€‚setæ–¹æ³•å¯ä»¥ç”¨äºvalidate- getå¯ä»¥è¢«ç»§æ‰¿ apply: æ‹¦æˆªå‡½æ•°è°ƒç”¨/call/applyå‡½æ•°- ä½¿ç”¨ apply (target, ctx, args) å¦‚proxy(1, 2) // 6 proxy.call(null, 5, 6) // 22 constructï¼šæ‹¦æˆªProxyå®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚new obj(â€¦args)ã€‚è¯¥æ–¹æ³•å¿…é¡»è¿”å›å¯¹è±¡ has(target, propKey)ï¼šæ‹¦æˆª- propKey in proxyçš„æ“ä½œ(for in ä¸å½±å“)ï¼Œ - ä»¥åŠå¯¹è±¡çš„hasPropertyï¼ˆä¸åŒºåˆ†ownï¼‰æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ï¼ˆegã€‚ä½¿ç”¨hasæ–¹æ³•éšè—æŸäº›å±æ€§ï¼Œä¸è¢«inè¿ç®—ç¬¦å‘ç°ï¼‰ 1234567891011121314151617181920212223242526//æ‘˜è‡ªruanyfåšå®¢var handler = &#123; get: function(target, name) &#123; if (name === &apos;prototype&apos;) &#123; return Object.prototype; &#125; return &apos;Hello, &apos; + name; &#125;, apply: function(target, thisBinding, args) &#123; return args[0]; &#125;, construct: function(target, args) &#123; return &#123;value: args[1]&#125;; &#125;&#125;;var fproxy = new Proxy(function(x, y) &#123; return x + y;&#125;, handler);fproxy(1, 2) // 1new fproxy(1,2) // &#123;value: 2&#125;fproxy.prototype === Object.prototype // truefproxy.foo // &quot;Hello, foo&quot; reflectåŒproxyä¸€æ ·ï¼Œæ˜¯es6ä¸ºäº†å®Œå–„å¯¹è±¡çš„æ“ä½œè€Œæ–°æå‡ºçš„å¯¹è±¡ã€‚ä¸»è¦åšçš„å†…å®¹åŒ…æ‹¬ï¼š ç§»é™¤ObjectæŸäº›æ–¹æ³•ï¼šæŠŠåŸæœ‰çš„ä¸€äº›å±äºobjectå†…éƒ¨çš„æ–¹æ³•å¦‚definePropertyæŒ‚åˆ°Reflectå•† æ”¹å˜ObjectæŸäº›æ“ä½œï¼šæŠŠå¦‚ a in objè¿™ç§å˜ä¸ºå‡½æ•°è¡Œä¸ºReflect.has(Object,â€™assignâ€™) Proxyä¸Reflectä¸€ä¸€å¯¹åº”ï¼Œproxyçš„æ¯ä¸€ä¸ªæ–¹æ³•ï¼Œéƒ½å¯ä»¥è°ƒç”¨Reflectçš„ç›¸åº”çš„æ–¹æ³•ï¼Œä¿è¯åŸç”Ÿæ–¹æ³•å¯ä»¥è°ƒç”¨ã€‚ï¼ˆè¿™ä¸ªæ–¹æ³•å…¶å®å°±æ˜¯å®Œå–„äº†çš„objectæ–¹æ³•ï¼‰","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"es6","slug":"es6","permalink":"http://yoursite.com/tags/es6/"}]},{"title":"es6 å­¦ä¹ ç¬”è®°(ä¸‰)","slug":"es6-3","date":"2016-09-27T05:51:45.000Z","updated":"2016-09-27T05:53:38.000Z","comments":true,"path":"2016/09/27/es6-3/","link":"","permalink":"http://yoursite.com/2016/09/27/es6-3/","excerpt":"","text":"Set å®šä¹‰ new Set([1,2,3,4])ã€æ³¨ã€‘ï¼šæ·»åŠ è¿›çš„æ—¶å€™ï¼Œä¸è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå†…éƒ¨æ˜¯åœ¨===çš„åŸºç¡€ä¸Šè¿›è¡Œäº†è¡¥å……ï¼ˆNaN===NaNï¼‰ã€‚å› æ­¤ 5å’Œâ€5â€æ˜¯ä¸¤ä¸ªä¸åŒçš„å€¼ä¸¤ä¸ªç©ºå¯¹è±¡å¯ä»¥åŒæ—¶åŠ å…¥NaNåªèƒ½æ·»åŠ ä¸€ä¸ª ç”¨é€”ï¼šæ•°ç»„å»é‡1[...new Set(array)] æ–¹æ³• æ“ä½œæ–¹æ³• éå†æ–¹æ³•å¯¹è±¡çš„æ˜¯Object.keys()setæ˜¯set1.keys(),åŒset1.values() 123456789101112let set1 = new Set([&apos;red&apos;, &apos;green&apos;, &apos;blue&apos;]);//è¿”å›å€¼ç›¸åŒfor(let item of set1.keys())for(let item of set1.values())for(let item of set1)for (let item of set.entries()) &#123; console.log(item);&#125;// [&quot;red&quot;, &quot;red&quot;]// [&quot;green&quot;, &quot;green&quot;]// [&quot;blue&quot;, &quot;blue&quot;] ç”¨é€” 12345678910111213let a = new Set([1, 2, 3]);let b = new Set([4, 3, 2]);// å¹¶é›†let union = new Set([...a, ...b]);// Set &#123;1, 2, 3, 4&#125;// äº¤é›†let intersect = new Set([...a].filter(x =&gt; b.has(x)));// set &#123;2, 3&#125;// å·®é›†let difference = new Set([...a].filter(x =&gt; !b.has(x))); éå†çš„åŒæ—¶è¿›è¡Œæ”¹å˜ 12345678// æ–¹æ³•ä¸€let set = new Set([1, 2, 3]);set = new Set([...set].map(val =&gt; val * 2));// setçš„å€¼æ˜¯2, 4, 6// æ–¹æ³•äºŒlet set = new Set([1, 2, 3]);set = new Set(Array.from(set, val =&gt; val * 2)); weaksetä¸setçš„åŒºåˆ«åœ¨äºï¼Œå®ƒçš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿æ˜¯é€šè¿‡new WeakSet(arr)å®šä¹‰çš„ï¼Œarrçš„æˆå‘˜æ‰æ˜¯weaksetçš„æˆå‘˜ï¼Œå› æ­¤å¦‚æœarråªæ˜¯ã€1,2ã€‘è¿™ç§ï¼Œæ˜¯ä¸è¡Œçš„ã€‚ æ¥å—ä¸€ä¸ªæ•°ç»„æˆ–ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ä½œä¸ºå‚æ•° æ–¹æ³• æ“ä½œï¼šæ¯”setå°‘clear()æ–¹æ³•ï¼Œæ²¡æœ‰forEach,æ²¡æœ‰sizeå±æ€§ éå†ï¼šæˆå‘˜ä¸å¯éå† ä¸æ˜¯å¾ˆæ˜ç™½çš„ç‚¹ï¼šå¼±å¼•ç”¨ Mapæ¯”ä¼ ç»Ÿçš„Objectæ›´ä¸ºæ‹“å±•ï¼Œkeyä¸é™äºå­—ç¬¦ä¸² ä½¿ç”¨123456var m = new Map()map.set(key,value)//ä¹Ÿæ¥å—ä»¥æ•°ç»„ä½œä¸ºå‚æ•°var m = new Map([[k1,v1],[k2,v2],[]]) æ³¨æ„ å¯¹ä¸€ä¸ªkeyå¤šæ¬¡èµ‹å€¼ï¼Œä¼šè¦†ç›– æœªçŸ¥keyï¼Œè¿”å›undefined keyä¸å†…å­˜åœ°å€ç»‘å®šï¼Œæ‰€ä»¥æ¯”è¾ƒkeyçš„æ—¶å€™å®é™…ä¸Šæ˜¯æŒ‰å¼•ç”¨æ¥çœ‹çš„ å±æ€§å’Œæ–¹æ³•setä¸­æ˜¯add delete clear has.mapä¸­æ˜¯set delete clear get æ“ä½œæ–¹æ³• 123456789//set è¿”å›mapè‡ªèº«ï¼Œå› æ­¤å¯ä»¥é“¾å¼è°ƒç”¨m.set(&quot;edition&quot;, 6) // é”®æ˜¯å­—ç¬¦ä¸²m.set(262, &quot;standard&quot;) // é”®æ˜¯æ•°å€¼m.set(undefined, &quot;nah&quot;) //get æœªçŸ¥åˆ™undefinedm.get(&apos;&apos;)//has(key),clear() éå†æ–¹æ³•keys.values() entries() forEach().åŒsetçš„ 12345678for (let [key, value] of map.entries()) &#123; console.log(key, value);&#125;// ç­‰åŒäºä½¿ç”¨map.entries()for (let [key, value] of map) &#123; console.log(key, value);&#125; è½¬æ•°ç»„1234567891011[...map.keys()]// [1, 2, 3][...map.values()]// [&apos;one&apos;, &apos;two&apos;, &apos;three&apos;][...map.entries()]// [[1,&apos;one&apos;], [2, &apos;two&apos;], [3, &apos;three&apos;]][...map]// [[1,&apos;one&apos;], [2, &apos;two&apos;], [3, &apos;three&apos;]] ä¸å…¶ä»–ç±»å‹çš„è½¬æ¢ æ•°ç»„ å¯¹è±¡ jsonå…·ä½“è§æ•™ç¨‹ weakmapè·Ÿweaksetå·®ä¸å¤š å¼‚æ­¥åŠasync","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"es6","slug":"es6","permalink":"http://yoursite.com/tags/es6/"}]},{"title":"es6 å­¦ä¹ ç¬”è®°(äºŒ)","slug":"es6-2","date":"2016-09-27T05:49:01.000Z","updated":"2016-09-27T05:51:30.000Z","comments":true,"path":"2016/09/27/es6-2/","link":"","permalink":"http://yoursite.com/2016/09/27/es6-2/","excerpt":"","text":"è§£æ„èµ‹å€¼ä»æ•°ç»„æˆ–è€…å¯¹è±¡ä¸­æå–å€¼å»å¯¹å˜é‡/æ•°ç»„èµ‹å€¼è¢«ç§°ä¸ºè§£æ„ã€‚ ä¸€ã€æ•°ç»„è§£æ„èµ‹å€¼ç±»ä¼¼äº123let [head, ...tail] = [1, 2, 3, 4];head // 1tail // [2, 3, 4] æ³¨æ„ç‚¹ï¼šå³è¾¹å¿…é¡»ä¸ºå¯éå†çš„ç»“æ„ã€‚ å·¦&gt;å³å¯¹äºæ²¡æœ‰åŠæ³•åŒ¹é…çš„å˜é‡ï¼Œä¼šè¢«èµ‹å€¼ä¸ºundefinedï¼Œæ•°ç»„ä¼šè¢«èµ‹ä¸ºç©º1234let [x, y, ...z] = [&apos;a&apos;];x // &quot;a&quot;y // undefinedz // [] ä¸ºäº†é¿å…è¿™æ ·ï¼Œå¯ä»¥è€ƒè™‘ç»™é»˜è®¤å€¼ã€‚ä¸”ä¸€æ—¦å³è¾¹çš„å€¼éä¸¥æ ¼ç­‰äºundefinedï¼Œå°±ä¼šè¦†ç›–å·¦è¾¹çš„é»˜è®¤å€¼1[x, y = &apos;b&apos;] = [&apos;a&apos;]; // x=&apos;a&apos;, y=&apos;b&apos; å·¦&lt;å³ä¸å®Œå…¨è§£æ„ï¼Œåªå–éƒ¨åˆ†å€¼1234let [a, [b], d] = [1, [2, 3], 4];a // 1b // 2d // 4 äºŒã€å¯¹è±¡çš„è§£æ„èµ‹å€¼å˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚æœ¬è´¨ä¸Šç±»ä¼¼äº 1234var &#123; foo: foo, bar: bar &#125; = &#123; foo: &quot;aaa&quot;, bar: &quot;bbb&quot; &#125;;//egvar &#123;key1,key2&#125; = &#123;key1:value1,key2:value2&#125;key1 //value1 åŒºåˆ†æ¨¡å¼å’Œå˜é‡ ä¹Ÿå¯ä»¥è®¾ç½®é»˜è®¤å€¼ 123456var &#123;x,y=5&#125; = &#123;x:1&#125;x //1y //5var &#123;x:y = 3&#125; = &#123;x: 5&#125;;y // 5 ä¸è¦å°†èŠ±æ‹¬å·å†™åœ¨è¡Œé¦–ï¼Œé¿å…è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œç”¨æ‹¬å·åŒ…è£¹å³å¯ã€‚ 123456var x;&#123;x&#125; = &#123;x: 1&#125;;// SyntaxError: syntax error// æ­£ç¡®çš„å†™æ³•(&#123;x&#125; = &#123;x: 1&#125;); ä¸‰ã€å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼123456const [a, b, c, d, e] = &apos;hello&apos;;//ä¹Ÿå¯ä»¥for (let codePoint of &apos;foo&apos;) &#123; console.log(codePoint)&#125; æ•°å€¼å’Œå¸ƒå°”å€¼ä¹Ÿå¯ä»¥è§£æ„ å››ã€ç”¨é€” äº¤æ¢å˜é‡ 1[x, y] = [y, x+y]; ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼ 1234function example() &#123; return [1, 2, 3];&#125;var [a, b, c] = example(); å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ ä¸for of é…åˆéå† 123for (let [key, value] of map) &#123; console.log(key + &quot; is &quot; + value);&#125; æ¨¡å— å­—ç¬¦ä¸²æ‰©å±• includes/startsWith/endsWith(str,index)indexä¸ºå¼€å§‹æœç´¢çš„ä½ç½® repeat() 12&quot;he&quot;.repeat(3) //hehehe&quot;he&quot;.repeat(0) //&quot;&quot; æ¨¡æ¿å­—ç¬¦ä¸²è§å¦ä¸€ä¸ªç¬”è®°es6ç¬”è®°ï¼ˆä¸€ï¼‰æ¨¡æ¿ç¼–è¯‘éƒ¨åˆ†è§é˜®ä¸€å³°ç¬”è®° æ ‡ç­¾æ¨¡æ¿ è·Ÿåœ¨å‡½æ•°ååé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²ä¼šè¢«è¯†åˆ«ä¸ºå¤šä¸ªå‚æ•°ã€‚- ç”¨é€”1 å¯ä»¥ç”¨æ¥å¯¹ç”¨æˆ·ä¼ å…¥çš„æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œæ¯”å¦‚è¿‡æ»¤HTMLå­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹123456789101112131415161718192021222324252627var message = SaferHTML`&lt;p&gt;$&#123;sender&#125; has sent you a message.&lt;/p&gt;`;function SaferHTML(templateData) &#123; var s = templateData[0]; //&lt;p&gt; for (var i = 1; i &lt; arguments.length; i++) &#123; var arg = String(arguments[i]); //sender // Escape special characters in the substitution. s += arg.replace(/&amp;/g, &quot;&amp;amp;&quot;) .replace(/&lt;/g, &quot;&amp;lt;&quot;) .replace(/&gt;/g, &quot;&amp;gt;&quot;); // Don&apos;t escape special characters in the template. s += templateData[i]; //templateData[i]è¿™è¾¹æŒ‡has sent you a message.&lt;/p&gt; &#125; return s;&#125;//ç±»ä¼¼äºfunctionName(strArr,..valuesArr),è¿™è¾¹çš„strArrå³ä¸ºæ¨¡æ¿å­—ç¬¦ä¸²ä¸­åˆ†è§£å‡ºæ¥çš„æ‰€æœ‰éå˜é‡çš„å­—ç¬¦ä¸²æ‰€ç»„æˆçš„æ•°ç»„ã€‚//&quot;templateData&quot; [&quot;&lt;p&gt;&quot;, &quot; has sent you a message.&lt;/p&gt;&quot;]//&quot;arguments&quot; [object Arguments] &#123; 0: [&quot;&lt;p&gt;&quot;, &quot; has sent you a message.&lt;/p&gt;&quot;], 1: &quot;luchen&quot;&#125;arguments = strArr + valuesArr é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆç¥å¥‡çš„ç”¨æ³•ï¼Œå°±æ˜¯å¯ä»¥å°†æ™®é€šçš„javascriptè½¬æ¢ä¸ºå…¶ä»–è¯­è¨€ï¼Œæ¯”å¦‚è¯´jsx..,æ‰¾åˆ°jsxå‡½æ•°çš„å®ç°ï¼Œç„¶åå°±å¯ä»¥å°†ä¸€ä¸ªDOMå­—ç¬¦ä¸²è½¬ä¸ºReactå¯¹è±¡..å››å›½ä»¥..123456789jsx` &lt;div&gt; &lt;input ref=&apos;input&apos; onChange=&apos;$&#123;this.handleChange&#125;&apos; defaultValue=&apos;$&#123;this.state.value&#125;&apos; /&gt; $&#123;this.state.value&#125; &lt;/div&gt;` æ•°å€¼çš„æ‰©å±• 0b,0o äºŒè¿›åˆ¶å…«è¿›åˆ¶å†™æ³• 123456780b111110111 === 5030o767 === 503//es5parseInt(&quot;111110111&quot;, 2) === 503parseInt(&quot;767&quot;, 8) === 503//è½¬ä¸ºåè¿›åˆ¶ç”¨Number(str)Number(&apos;0b111&apos;) åŸæœ‰æ–¹æ³•åŠ äº†Numberé™å®šï¼Œå–æ¶ˆå…¨å±€å‡½æ•°ä¼ ç»Ÿæ–¹æ³•å…ˆç”¨Numberè½¬æ¢ï¼Œç„¶ååˆ¤æ–­ï¼Œè€Œç°åœ¨ä¸ä¼šè½¬æ¢ï¼Œå¦‚æœéæ•°å€¼ï¼Œç›´æ¥false 12345Number.isFinite() Number.isNaN()Number.parseInt() Number.parseFloat()Number.isInteger()//Number.isInteger(25) // true 25ä¸25.0è¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªæ•°//Number.isInteger(25.0) // true å¢åŠ æå°å€¼ï¼Œç”¨äºæµ®ç‚¹æ•°è¯¯å·®åˆ¤æ–­Number.EPSILON æ•´æ•°èŒƒå›´JavaScriptèƒ½å¤Ÿå‡†ç¡®è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´åœ¨-2^53åˆ°2^53ä¹‹é—´ï¼ˆå¼€åŒºé—´ï¼‰ç°åœ¨ç”¨Number.MAX_SAFE_INTEGERå’ŒNumber.MIN_SAFE_INTEGERè¿™ä¸¤ä¸ªå¸¸é‡ï¼Œç”¨æ¥è¡¨ç¤ºè¿™ä¸ªèŒƒå›´çš„ä¸Šä¸‹é™ã€‚ 12Number.MAX_SAFE_INTEGER === 2**53-1Number.MAX_SAFE_INTEGER === -(2**53-1) Mathå¯¹è±¡çš„æ‰©å±• Math.trunc()å–æ•°çš„æ•´æ•°éƒ¨åˆ†ï¼Œæˆªæ–­ï¼Œéå››èˆäº”å…¥ã€‚éæ•°å€¼å…ˆNumber(),ä¸èƒ½è½¬åˆ™NaN 1234//ç­‰äºfunction mathTrunc (x) &#123; return (x &lt; 0 ? Math.ceil(x) : Math.floor(x))&#125; Math.sign()åˆ¤æ–­ç¬¦å· ä¸‰è§’å‡½æ•°è¿ç®— å¯¹æ•°è¿ç®— æŒ‡æ•°è¿ç®— 12**3 ===8 æ•°ç»„æ‰©å±•å¯¹è±¡=ã€‹æ•°ç»„ Array.from()å°†ä»¥ä¸‹ä¸¤ç§å¯¹è±¡è½¬å˜ä¸ºæ•°ç»„ ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰ï¼Œå¦‚argumentsï¼ŒgetElementsByTagå¾—åˆ°çš„é›†åˆ å¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼Œå¦‚Set Map ä»»ä½•æœ‰lengthå±æ€§çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥é€šè¿‡Array.fromæ–¹æ³•è½¬ä¸ºæ•°ç»„ ï¼ˆ1ï¼‰ç”¨æ³•ï¼š 1Array.from(arrayLike, x =&gt; x * x); **è¡¥å……**ï¼š æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰ä¹Ÿå¯ä»¥åšåˆ°ã€‚ä¸»è¦æ˜¯ä»¥ä¸‹åœºæ™¯: 12345function f1(param1,...arr)&#123;//ç¡®åˆ‡çš„è¯´æ˜¯restå‚æ•° //arr == [v2,v3]&#125;f1(v1,v2,v3) Array.of()å°†ä¸€ç»„æ•°å€¼è½¬ä¸ºæ•°ç»„ 123 Array.of() // []Array.of(undefined) // [undefined]Array.of(1) // [1] arr.copyWithin(destIndex,srcStart,srcEnd) 12// å°†3å·ä½å¤åˆ¶åˆ°0å·ä½[1, 2, 3, 4, 5].copyWithin(0, 3, 4) arr.find() arr.findIndexä¸»è¦æ˜¯ç”±äºarr.indexOfæ¯”è¾ƒæ˜¯åŸºäº===å…¨ç­‰æ“ä½œç¬¦ï¼Œé‚£ä¹ˆNaNå°±ä¸èƒ½è¢«æ‰¾åˆ°ï¼Œå› ä¸ºè·ŸNaNæœ‰å…³çš„è¡¨è¾¾å¼éƒ½ä¼šè¿”å›false.å‚æ•°ä¸ºå›è°ƒå‡½æ•° 123[1, 5, 10, 15].findIndex(function(value, index, arr) &#123; return value &gt; 9;&#125;) // 2 è¡¥å……ï¼š 1arr.includes(param1,startIndex) //es7 arr.fill()å¸¸ç”¨è¯­åˆå§‹åŒ– 1new Array(3).fill(7) //[7,7,7] arr.entries(),keys(),values()å¸¸ä¸for..ofä¸€èµ·ä½¿ç”¨è¿›è¡Œå¯¹è±¡éå† 123for (let index of [&apos;a&apos;, &apos;b&apos;].keys()) &#123; console.log(index);&#125; å‡½æ•°çš„æ‰©å±• å‡½æ•°å‚æ•°é»˜è®¤å€¼åªèƒ½ä½œä¸ºå°¾å‚æ•° restå‚æ•° å€¼-ã€‹æ•°ç»„ 1234567891011function add(...values) &#123; let sum = 0; for (var val of values) &#123; sum += val; &#125; return sum;&#125;add(2, 5, 3) // 10 æ‰©å±•è¿ç®—ç¬¦å°†æ•°ç»„-ã€‹é€—å·åˆ†éš”çš„åºåˆ—ä¸åŒäºrestå‚æ•°æ˜¯åœ¨å½¢å‚ä¸­ï¼Œæ‰©å±•è¿ç®—ç¬¦ç”¨äºå‡½æ•°è°ƒç”¨é‡Œ 123456function add(x, y) &#123; return x + y;&#125;var numbers = [4, 38];add(...numbers) // 42 å¸¸ç”¨ 1234Math.max(...[14, 3, 77])arr1.push(...[13,3,2]) //concat[...arr1, ...arr2, ...arr3][a, ...rest] = list ç®­å¤´å‡½æ•° å°¾é€’å½’-ã€‹é€’å½’æ”¹å†™,ä»¥è§£å†³å¤šä½™çš„å‚æ•°çš„é—®é¢˜ï¼ˆå¥—ä¸€å±‚å‡½æ•°/curry/es6é»˜è®¤å€¼ï¼‰-ã€‹ä¼˜åŒ–ï¼šå¾ªç¯æ›¿ä»£é€’å½’(1)è¿”å›å‡½æ•°è€Œä¸æ˜¯è¿”å›å‡½æ•°è°ƒç”¨ï¼Œç”¨é“¾å¼è°ƒç”¨æ¥æ›¿ä»£åµŒå¥—è°ƒç”¨è§é˜®ä¸€å³°es6(2)memonizationå­˜å‚¨ä¸­é—´å€¼å…·ä½“è§é«˜æ€§èƒ½javascriptï¼ˆp76ï¼‰ å¯¹è±¡æ‰©å±• å±æ€§ã€æ–¹æ³•çš„ç®€å†™ 12345678910111213var birth = &apos;2000/01/01&apos;;var Person = &#123; name: &apos;å¼ ä¸‰&apos;, //ç­‰åŒäºbirth: birth birth, // ç­‰åŒäºhello: function ()... hello() &#123; console.log(&apos;æˆ‘çš„åå­—æ˜¯&apos;, this.name); &#125;&#125;; å±æ€§åè¡¨è¾¾å¼,ä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰æ–¹æ³•å 12345let propKey = &apos;foo&apos;;let obj = &#123; [propKey]: true,&#125;; æ–¹æ³•çš„nameå±æ€§get/setå‡½æ•° -ã€‹person.firstName.name // â€œget firstNameâ€åŒ¿åå‡½æ•° (new Function()).name // â€œanonymousâ€symbol const key1 = Symbol(â€˜descriptionâ€™); Object.isåœ¨===çš„åŸºç¡€ä¸Šè¡¥å……ä¸¤ç‚¹ï¼š NaN 1Object.is(NaN, NaN) // true +0 -0ä¸ç›¸ç­‰ 1Object.is(+0, -0) // false Object.assign æµ…æ‹·è´ï¼Œå¦‚æœæºå¯¹è±¡çš„æŸä¸ªkeyçš„valueæ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆå¤åˆ¶çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚ 123456var obj1 = &#123;a: &#123;b: 1&#125;&#125;;var obj2 = Object.assign(&#123;&#125;, obj1);obj1.a.b = 2;obj2.a.b // 2tong åŒåå±æ€§ï¼Œåªä¼šæ›¿æ¢ï¼Œä¸ä¼šæ·»åŠ  åªèƒ½æ‹·è´è‡ªèº«å±æ€§ï¼Œä¸èƒ½æ‹·è´ç»§æ‰¿çš„å±æ€§ä»¥åŠä¸å¯æšä¸¾çš„å±æ€§ã€‚ ç”¨é€”ï¼š ç»™å¯¹è±¡æ·»åŠ å±æ€§ 12345class Point&#123; constructor(x,y)&#123; Object.assign(this,&#123;x,y&#125;) &#125;&#125; ç»™å¯¹è±¡æ·»åŠ æ–¹æ³• 12345Object.assign(someClass.prototype,&#123; someMethod(arg1, arg2) &#123; Â·Â·Â· &#125;,&#125;) å…‹éš†å¯¹è±¡1234function clone(origin) &#123; let originProto = Object.getPrototypeOf(origin); return Object.assign(Object.create(originProto), origin); &#125; å±æ€§çš„éå†for..in,Object.keys(),Object.getOwnPropertyNames(obj),Object.getOwnPropertySymbols(obj),Reflect.ownKeys(obj) éå†é¡ºåºï¼š æ•°å­—ï¼ˆæŒ‰å¤§å°ï¼‰-ã€‹å­—ç¬¦ä¸²(æŒ‰ç”Ÿæˆæ—¶é—´)-ã€‹Symbolï¼ˆæŒ‰ç”Ÿæˆæ—¶é—´ï¼‰12Reflect.ownKeys(&#123; [Symbol()]:0, b:0, 10:0, 2:0, a:0 &#125;)// [&apos;2&apos;, &apos;10&apos;, &apos;b&apos;, &apos;a&apos;, Symbol()] es7ä¸­çš„Object.getOwnPropertyDescriptorsrestç”¨äºå¯¹è±¡è§£æ„ è¡¥å……çŸ¥è¯†ES5æœ‰ä¸‰ä¸ªæ“ä½œä¼šå¿½ç•¥enumerableä¸ºfalseçš„å±æ€§ã€‚ forâ€¦inå¾ªç¯ï¼šåªéå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾çš„å±æ€§ Object.keys()ï¼šè¿”å›å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å¯æšä¸¾çš„å±æ€§çš„é”®å JSON.stringify()ï¼šåªä¸²è¡ŒåŒ–å¯¹è±¡è‡ªèº«çš„å¯æšä¸¾çš„å±æ€§ es6ä¸­Object.assign():è·ŸObject.keysä¸€æ ·ï¼Œåªæ‹·è´è‡ªèº«çš„å¯æšä¸¾å±æ€§ es6ä¸­æ‰€æœ‰classçš„åŸå‹çš„æ–¹æ³•éƒ½æ˜¯ä¸å¯æšä¸¾çš„ã€‚","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"es6","slug":"es6","permalink":"http://yoursite.com/tags/es6/"}]},{"title":"es6 å­¦ä¹ ç¬”è®°(ä¸€)","slug":"es6-1","date":"2016-09-27T05:45:47.000Z","updated":"2017-02-01T01:31:58.000Z","comments":true,"path":"2016/09/27/es6-1/","link":"","permalink":"http://yoursite.com/2016/09/27/es6-1/","excerpt":"","text":"æ¦‚è§ˆç®­å¤´å‡½æ•°ã€æ¨¡æ¿å­—ç¬¦ä¸²ã€promiseã€generator(iter.nextå»æ‰§è¡Œyieldå†…å®¹)ã€classã€module æ‚è®° ä½œç”¨åŸŸï¼Œç”¨ä»£ç å—+let æ›¿ä»£IIFEï¼Œç‰¹åˆ«æ˜¯letå¯ä»¥å¤„ç†é—­åŒ…çš„é—®é¢˜è¡¥å……è§å¦ä¸€ç¯‡ç¬”è®° 1234567891011121314for(let i=0;i&lt;6;i++)&#123; a[i] = function()&#123; console.log(i); &#125;&#125;//es5çš„å®ç°åº”è¯¥æ˜¯ä»‹æ ·çš„for(var i=0;i&lt;6;i++)&#123; (function(i)&#123; a[i] = function()&#123; console.log(i); &#125; &#125;)(i);&#125; 2ï¼Œç”¨æ¨¡æ¿å˜é‡ä»£æ›¿å­—ç¬¦ä¸²æ‹¼æ¥ 1`$&#123;x&#125;+$(y)` == x+&quot;+&quot;+y æ¨¡æ¿å­—é¢é‡å¯ä»¥æ¨ªè·¨å¤šè¡Œã€‚ ç©ºæ ¼å’Œæ¢è¡Œéƒ½ä¼šä¿ç•™ 3ï¼Œå‡½æ•°çš„é»˜è®¤å‚æ•°åº”è¯¥åœ¨æœ€å³è¾¹ï¼Œå®å‚ä¸å½¢å‚ä»å·¦å¼€å§‹åŒ¹é… 4ï¼Œclass 1234567891011121314151617181920//es5function Point(x,y)&#123; this.x = x; this.y = y;&#125;Point.prototype.toString = function () &#123; return &apos;(&apos; + this.x + &apos;, &apos; + this.y + &apos;)&apos;;&#125;//es6class Point&#123; constructor(x,y)&#123; this.x = x; this.y = y; &#125; toString()&#123; return &apos;(&apos; + this.x + &apos;, &apos; + this.y + &apos;)&apos;; &#125;&#125; æ³¨æ„ç‚¹ï¼š classä¸å­˜åœ¨å˜é‡æå‡ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„ä½¿ç”¨å¿…é¡»è¦åœ¨å®šä¹‰å ç§æœ‰æ–¹æ³•ï¼š ç”¨ _functionName æŠŠç§æœ‰æ–¹æ³•éƒ½æ”¾å¤–éƒ¨ï¼Œclasså†…éƒ¨åªå­˜æš´éœ²å‡ºå»çš„å…¬æœ‰æ–¹æ³•ï¼Œæ¯”å¦‚ 12345678class Widget &#123; foo (baz) &#123; bar.call(this, baz); &#125; // ...&#125;function bar(baz)&#123;...&#125; ç”¨symbolå¤„ç†ç§æœ‰æ–¹æ³•å’Œå±æ€§çš„åç§° 123456789101112const privateFun = Symbol(&apos;bar&apos;);const privateParam = Symbol(&apos;bar&apos;);class test1&#123; //ç§æœ‰æ–¹æ³• [bar](param)&#123; //ç§æœ‰å±æ€§ this[privateParam] = ... &#125; fun1()&#123; this[bar](&quot;å®å‚&quot;); &#125;&#125; 5ï¼Œ ç»§æ‰¿é€šè¿‡extendså…³é”®å­—ï¼Œç»§æ‰¿äº†çˆ¶ç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ç­‰äºå¤åˆ¶äº†ä¸€ä¸ªPointç±»123456789101112131415class Rectangle extends Shape &#123; constructor (id, x, y, width, height) &#123; super(id, x, y) //çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå¿…é¡»è°ƒç”¨ï¼Œç”¨æ¥æ–°å»ºçˆ¶ç±»çš„thiså®ä¾‹ï¼ŒåŒæ—¶å¤åˆ¶ä¸€ä»½ä½œä¸ºè‡ªå·±çš„ this.width = width this.height = height &#125;&#125;//es5function Rectangle(id, x, y, width, height) &#123; Shape.call(this, id, x, y)//å¤åˆ¶ä¸€ä»½çˆ¶ç±»shapeçš„å±æ€§id,x,yï¼Œç”¨è‡ªå·±çš„å€¼è¿›è¡Œåˆå§‹åŒ– this.width = width this.height = height&#125;Rectangle.prototype = Object.create(Shape.prototype)//æ·±å¤åˆ¶çˆ¶ç±»çš„åŸå‹ï¼Œç„¶åæ”¹å˜åŸå‹çš„æŒ‡å‘ï¼Œä½¿å¾—å­ç±»è‡ªå·±ä¿æŒä¸€ä»½åŸå‹Rectangle.prototype.constructor = Rectangle 6, é™æ€å±æ€§æ–¹æ³• static å‡½æ•°staticæ–¹æ³•æ˜¯è¢«ç±»æ‰€è°ƒç”¨ï¼Œå®ä¾‹æ˜¯æ²¡æœ‰åŠæ³•è°ƒç”¨çš„ã€‚è€Œä¸”å¯ä»¥è¢«ç»§æ‰¿ 123456789class Foo &#123; static classMethod() &#123; return &apos;hello&apos;; &#125;&#125;class Bar extends Foo &#123;&#125;Bar.classMethod(); // &apos;hello&apos; é™æ€å±æ€§ï¼šç±»æœ‰é™æ€å±æ€§ï¼Œä½†æ˜¯ç±»å†…éƒ¨æ˜¯ä¸èƒ½æœ‰é™æ€å±æ€§çš„ã€‚åªèƒ½åœ¨å¤–éƒ¨ 12345class Foo &#123;&#125;Foo.prop = 1;Foo.prop // 1 å®ä¾‹å±æ€§ä¹‹å‰æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰å®ä¾‹å±æ€§ï¼Œç°åœ¨å¯ä»¥æ”¾åœ¨å¤–éƒ¨123456789101112131415161718192021class MyClass &#123; myProp = 42; constructor() &#123; console.log(this.myProp); // 42 //ä»¥å‰çš„å†™æ³•ï¼šthis.myProp = ... &#125;&#125;//æˆ–è€…æ›´å¤æ‚çš„æ˜¯class ReactCounter extends React.Component &#123; newProps = &#123; count:3; &#125;; state; //constructoré‡Œé¢å·²ç»å®šä¹‰çš„å®ä¾‹å±æ€§ constructor(props) &#123; super(props); this.state = &#123; count: 0 &#125;; &#125;&#125; es7ä¸­é™æ€å±æ€§ææ¡ˆï¼Œå°†é™æ€å±æ€§ä¹Ÿåƒå®ä¾‹å±æ€§ä¸€æ ·æ”¾è¿›æ¥1234567class MyClass &#123; static myStaticProp = 42; constructor() &#123; console.log(MyClass.myProp); // 42 &#125;&#125; Moduleæ¨¡å—åŒ–123456789101112131415161718192021var firstName = &apos;mei&apos;;var lastName = &apos;qingguang&apos;;var year = 1988;//exportexport &#123;firstName, lastName, year&#125;;//importimport &#123;firstName, lastName, year&#125; from &quot;./module1.js&quot;console.log(firstName);æˆ–è€… import * as Module1 from &quot;./module1.js&quot;console.log(Module1.firstName)//æ•´ä½“è¾“å‡ºçš„è¯//test1.jsexport default function()&#123; ...&#125;import yourModuleName from &quot;test1.js&quot;yourModuleName() //å‡½æ•°æ‰§è¡Œ","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"es6","slug":"es6","permalink":"http://yoursite.com/tags/es6/"}]},{"title":"vueå­¦ä¹ å‰ä¼ (äºŒ)","slug":"vue-prev-2","date":"2016-09-27T05:36:28.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2016/09/27/vue-prev-2/","link":"","permalink":"http://yoursite.com/2016/09/27/vue-prev-2/","excerpt":"","text":"vueä¹‹å‰çš„åšå®¢é‡Œé¢ï¼Œæˆ‘ä»¬è®²äº†vueçš„æ•°æ®ç»‘å®šä»¥åŠå®ƒçš„ç”¨æ³•ï¼Œè€Œç”±äºä¹‹å‰ä¸€ç›´ç”¨reactå¼€å‘ï¼Œéš¾å…ä¼šè¿›è¡Œç›¸äº’æ¯”è¾ƒï¼Œé‚£ä¹ˆè¿™ä¸€ç¯‡å°±ä»¥ä¸reactè”ç³»çš„è§’åº¦æ¥çœ‹çœ‹vueçš„ä¸€äº›ç‰¹æ€§ã€‚psï¼šä¹‹å‰çš„æ•°æ®ç»‘å®šï¼Œå› ä¸ºå½“æ—¶å…¬å¸çš„ç‰ˆæœ¬æ˜¯æ—§çš„ï¼Œä¸ºäº†ç»§ç»­åœ¨å‰feçš„åŸºç¡€ä¸Šç»§ç»­å†™ï¼Œä¸å¾—å·²ç”¨çš„æ˜¯0.12çš„ç‰ˆæœ¬ï¼Œä»Šå¤©è¿™ç¯‡çš„ç‰ˆæœ¬æ˜¯1.0ï¼šï¼‰ ç»„ä»¶åŒ–props:æŸ¥çœ‹vue componentæ•™ç¨‹ï¼Œæ€»ç»“æ¥è¯´ï¼Œå®ƒæ˜¯react propsçš„æ‰©å±•ç‰ˆæœ¬ã€‚ï¼ˆ1ï¼‰ç›¸åŒçš„åœ°æ–¹åœ¨äºï¼špropsä¹Ÿæ˜¯é»˜è®¤å•å‘æ•°æ®æµï¼Œä»çˆ¶ç»„ä»¶ä¼ é€’å±æ€§åˆ°å­ç»„ä»¶ã€‚ï¼ˆ2ï¼‰ä¹‹æ‰€ä»¥è¯´æ‰©å±•ï¼Œä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š æ‰©å±•ä¸€ï¼šprops in vue == [ä¼ª]props in react; æ‰©å±•äºŒï¼šprops in vue å¯å•å‘ï¼Œå¯åŒå‘ç»‘å®šæ•°æ®ã€‚ è®©æˆ‘ä»¬çœ‹ç¬¬ä¸€ä¸ªæ‰©å±•ã€‚ vueçš„propsæä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼Œé™æ€çš„+åŠ¨æ€ç»‘å®šã€‚ç”¨reactçš„æ–¹å¼æ¥ç†è§£çš„è¯ï¼š props == å­ç»„ä»¶é»˜è®¤çš„ä¸å¯å˜å±æ€§ã€‚ ç»‘å®šçš„props== props in reactã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œpropsåªè´Ÿè´£ä¼ é€’çˆ¶ç»„ä»¶ä¼ ç»™å®ƒçš„å±æ€§ï¼Œä¸”å½“ç»„ä»¶åŠ è½½ååªä¼ é€’ä¸€æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸‹é¢çš„é™æ€ç»‘å®šdemoä¸­ï¼Œè™½ç„¶è·Ÿçˆ¶modelåŒåï¼Œä½†æ˜¯åªè§£æä¸ºå­—ç¬¦ä¸²ï¼Œåªæœ‰å˜æˆåŠ¨æ€ç»‘å®šçš„propsï¼Œæ‰ä¼šè§£æä¸ºä»çˆ¶å…ƒç´ ä¼ é€’ä¸‹æ¥çš„å˜é‡ã€‚æ¯æ¬¡çˆ¶ç»„ä»¶çš„ç›¸å…³æ•°æ®è¿›è¡Œå˜åŒ–æ—¶ï¼Œå­ç»„ä»¶ä¾¿ä¼šéšä¹‹æ›´æ”¹ï¼Œç±»ä¼¼äºreactä¸­çš„props. See the Pen vueç»„ä»¶åŒ–demo by lu (@luchen) on CodePen. 123456789//html&lt;div class=\"childWrapper\"&gt; &lt;input v-model=\"dynamicMsg\"&gt; &lt;br&gt;&lt;span&gt;é™æ€ç»‘å®šï¼š&lt;/span&gt; &lt;child parent-msg=\"dynamicMsg\"&gt;&lt;/child&gt; &lt;br&gt;&lt;span&gt;åŠ¨æ€ç»‘å®šåˆ°çˆ¶å…ƒç´ ï¼š&lt;/span&gt; &lt;child :parent-msg=\"dynamicMsg\"&gt;&lt;/child&gt;&lt;/div&gt; 1234567891011//javascriptVue.component('child', &#123; props: ['parentMsg'], template: '&lt;span&gt;&#123;&#123; parentMsg &#125;&#125;&lt;/span&gt;'&#125;)var parent = new Vue(&#123; el:\".childWrapper\", data:&#123; dynamicMsg:\"hello\" &#125;&#125;) æ³¨æ„ç‚¹ï¼š jsä¸­çš„camelå†™æ³•å¯¹åº”äºhtmlä¸­çš„kebab-case å¦‚æœ prop æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„ï¼Œæ˜¯æŒ‰å¼•ç”¨ä¼ é€’ã€‚åœ¨å­ç»„ä»¶å†…ä¿®æ”¹å®ƒä¼šå½±å“çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œä¸ç®¡æ˜¯ä½¿ç”¨å“ªç§ç»‘å®šç±»å‹ã€‚å°±å˜æˆäº†åŒå‘ç»‘å®šäº† å¦‚æœpropsæ˜¯æ•°ç»„ï¼Œåˆ™éœ€è¦æŒ‰ç…§åŠ¨æ€ç»‘å®šæ¥å†™ï¼Œä½¿å¾—çœ‹æˆå˜é‡ã€è¡¨è¾¾å¼ï¼Œå¦åˆ™ä¼šä»¥å­—ç¬¦ä¸²ä¼ é€’ã€‚===æ›´æ–°2017/1/4 çˆ¶ç»„ä»¶ä¼ è¿›æ¥çš„propsä½œä¸ºå­ç»„ä»¶dataçš„åˆå§‹å€¼å­˜åœ¨çš„è¯ï¼Œå¦‚æœå®ƒå˜åŠ¨ï¼Œå†…éƒ¨dataæ˜¯ä¸èƒ½å“åº”çš„ï¼Œéœ€è¦è®¾ç½®watchï¼ˆpropsï¼‰ï¼Œä¿æŒdataå§‹ç»ˆåœ¨propsçš„åŸºç¡€ä¸Šå˜åŠ¨ å†çœ‹çœ‹ç¬¬äºŒä¸ªæ‰©å±•reactçš„propsæ˜¯å•å‘æ•°æ®æµï¼Œè€Œvueä¸­è¿˜å¯ä»¥å®ç°åŒå‘çš„ç»‘å®šã€‚ä½†æ˜¯æœ€å¥½è¿˜æ˜¯ä¸è¦è¿™ä¹ˆåšï¼Œå› ä¸ºçˆ¶ç»„ä»¶æœ‰å¾ˆå¤šå­ç»„ä»¶ï¼Œæ¯ä¸ªéƒ½è¿›è¡ŒåŒå‘ç»‘å®šçš„è¯ï¼Œä¼šæœ‰å„ç§å†²çªé—®é¢˜ï¼Œè€Œä¸”å…‰çœ‹çˆ¶ç»„ä»¶çš„ä¿¡æ¯ï¼Œå¾ˆéš¾ç†è§£çˆ¶ç»„ä»¶çš„çŠ¶æ€ 1&lt;child :msg.sync=&quot;parentMsg&quot;&gt;&lt;/child&gt; é€šå¸¸æ˜¯ç”¨v-bindæ¥ç»‘å®šæ•°æ®ï¼Œå®ç°jsä¸­ä¼ å€¼ä½¿å¾—æ•°æ®æ¸²æŸ“ï¼Œåœ¨äº¤äº’é¢‘ç¹çš„è¡¨å•ä¸Šï¼Œå¯ä»¥ç”¨v-modelè¿›è¡ŒåŒå‘ç»‘å®šã€‚ è®¡ç®—å±æ€§ä¹Ÿæœ‰åŒå‘ç»‘å®šçš„å«ä¹‰ï¼Œwatch+åå‘set åŒå‘propsç¤ºä¾‹12//child&lt;modal :category=&quot;category&quot; title=&quot;ç¦å‘&quot; :order=&quot;order&quot; :show.sync=&quot;showModal&quot;&gt;&lt;/modal&gt; parentä¼šå¯¹showModalè¿™ä¸ªå˜é‡è¿›è¡Œå˜åŠ¨ã€‚ 12345//parent buttonç‚¹å‡»å“åº”äº‹ä»¶showDetail()&#123; console.log(&quot; ==== &quot;, this.showModal); this.showModal = true; &#125;, åœ¨modalå†…éƒ¨ 1234567&lt;div class=\"modal\" v-show=\"show\"&gt; //here &lt;div class=\"modal-dialog\"&gt; &lt;div class=\"modal-content\"&gt; &lt;div class=\"modal-header\"&gt; &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\" @click=\"closeModal\"&gt;&amp;times;&lt;/button&gt; &lt;h4 class=\"modal-title\"&gt;&#123;&#123;category&#125;&#125;&lt;/h4&gt; &lt;/div&gt; 12345678910111213141516export default &#123; name:&quot;PopModal&quot;, props:[&quot;category&quot;,&quot;order&quot;,&quot;show&quot;], //è¡¨æ˜ä»çˆ¶å…ƒç´ ä¼ é€’ä¸‹æ¥ data () &#123; return&#123; &#125; &#125;method()&#123;closeModal()&#123; this.show = false; &#125;,&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœmodalç»‘å®šçš„æ—¶å€™æ˜¯å•å‘çš„ï¼Œå³ ï¼šshow = â€œshowModalâ€ï¼Œé‚£ä¹ˆå­ç»„ä»¶å†…éƒ¨ä½¿å¾—show = falseçš„æ—¶å€™ï¼Œçˆ¶ç»„ä»¶çš„showModalè¿˜æ˜¯ä¿æŒtrueçš„çŠ¶æ€ã€‚é‚£ä¹ˆä¼šå¯¼è‡´çˆ¶çš„çŠ¶æ€æ˜¯æ˜¾ç¤ºï¼Œå­çŠ¶æ€æ˜¯ä¸æ˜¾ç¤ºï¼Œé‚£ä¹ˆç‚¹å‡» showPopæŒ‰é’®çš„æ—¶å€™æ˜¯æ— æ³•æ˜¾ç¤ºçš„ã€‚åº”è¯¥æ”¹ä¸ºåŒå‘ä¸Šã€‚ 12//update&lt;modal :category=&quot;category&quot; title=&quot;ç¦å‘&quot; :order=&quot;order&quot; :show.sync=&quot;showModal&quot;&gt;&lt;/modal&gt; å¼€å‘æ‚é¡¹ scope é™åˆ¶cssAç»„ä»¶ï¼ŒBç»„ä»¶éƒ½å¼•å…¥åˆ°ç»„ä»¶Cä¸­ï¼Œä½†æ˜¯A,Béƒ½æœ‰åŒæ ·çš„æ ·å¼.class nameï¼Œé‚£ä¹ˆä¼šå†²çªï¼Œå› æ­¤éœ€è¦ç”¨scope å»è¿›è¡Œé™åˆ¶ï¼Œè€Œä¸”éœ€è¦æ³¨æ„çš„æ˜¯åœ¨styleé‡Œé¢è¿›è¡Œ importï¼Œscopeæ˜¯ä¸èµ·ä½œç”¨çš„ã€‚åªèƒ½inline css 12345678910111213141516&lt;style lang=&quot;scss&quot; scoped&gt;.modal&#123; display: block; display: flex; align-items:center; justify-content:center; background-color: rgba(11, 11, 11, 0.6); .action&#123; cursor: pointer; &#125;&#125;.modal-dialog&#123; max-width: 30%;&#125;&lt;/style&gt; vue-router æ³¨æ„äº‹é¡¹ 1234&lt;ul class=&quot;nav nav-tabs&quot;&gt; &lt;li class=&quot;&quot;&gt;&lt;a v-link=&quot; &apos;/event/list&apos; &quot; &gt;ä¿¡æ¯åˆ—è¡¨&lt;/a&gt;&lt;/li&gt; &lt;li&gt;&lt;a v-link=&quot; &apos;/event/create&apos; &quot; &gt;åˆ›å»ºäº‹ä»¶&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; è¿™è¾¹çš„v-link è·Ÿv-onä¸€æ ·ï¼Œé‡Œé¢çš„é»˜è®¤æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå¦‚æœæƒ³ä¼ é€’å­—ç¬¦ä¸²è¿›å»ï¼Œéœ€è¦å¦åŠ å•å¼•å· åŒç†ï¼Œ@clickï¼Œçœ‹è¿™ä¸ªä¾‹å­ 123// toggleActive()é‡Œé¢çš„å¦‚æœç›´æ¥æ˜¯Aï¼Œä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªå˜é‡ï¼Œæ— æ³•å¾—åˆ°ï¼Œéœ€è¦å˜æˆå­—ç¬¦ä¸² &lt;li :class=&quot;[&apos;tab-item&apos;,isA?&apos;tab-active&apos;:&apos;&apos;] &quot; @click=&quot;toggleAcitive(&apos;A&apos;)&quot;&gt;&lt;a v-link=&quot; &apos;/event/list&apos; &quot; &gt;ä¿¡æ¯åˆ—è¡¨&lt;/a&gt;&lt;/li&gt; &lt;li :class=&quot;[&apos;tab-item&apos;,!isA?&apos;tab-active&apos;:&apos;&apos;] &quot; @click=&quot;toggleAcitive(&apos;B&apos;)&quot;&gt;&lt;a v-link=&quot; &apos;/event/create&apos; &quot;&gt;åˆ›å»ºäº‹ä»¶&lt;/a&gt;&lt;/li&gt; class åŠ¨æ€ç»‘å®š 1&lt;li class=&quot;pageList[0]===1?&apos;disabled&apos;:&apos;&apos;&quot;&gt; è¿™æ ·æ˜¯æ— æ³•è¯†åˆ«çš„ï¼Œé‡Œé¢ä¸æ˜¯ä¸‰å…ƒç¬¦ï¼Œè€Œæ˜¯å°±æ˜¯ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦åŠ bindç»‘å®šæ‰ä¼šå˜æˆä¸‰å…ƒè¡¨è¾¾å¼ input checkboxç»‘å®šåˆ°ä¸€ä¸ªæ•°ç»„çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šä»–ä»¬çš„valueï¼Œå¦åˆ™ç›¸å½“äºä¸€ä¸ªï¼Œä¼šåŒæ—¶é€‰ä¸­æˆ–ä¸é€‰ä¸­ï¼ŒæŒ‡å®šåæ‰ä¼šå„è‡ªæ§åˆ¶ã€‚ ajax uiä½“éªŒä¼˜åŒ– 12345678910111213141516171819handleEventEdited(data)&#123; //ç›´æ¥æ›´æ–° var temp = Object.assign(&#123;&#125;,this.eventList); this.eventList = this.eventList.map(event=&gt;&#123; if(event.name==data.name) return Object.assign(&#123;&#125;,event,&#123;name:data.newName&#125;); else return event; &#125;); //å‘é€è¯·æ±‚ this.$http.post(server_path+&quot;/event&quot;,data).then((response)=&gt;&#123; console.log(&quot;äº‹ä»¶ä¿®æ”¹æˆåŠŸ&quot;); &#125;,(err)=&gt;&#123; //ä¿®æ”¹å¤±è´¥åå›é€€ this.eventList = temp; console.log(&quot;äº‹ä»¶ä¿®æ”¹å¤±è´¥&quot;); &#125;); &#125;, ç”Ÿå‘½å‘¨æœŸ æ¥¼ä¸»æœ€è¿‘çš„å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼Œå•é¡µåº”ç”¨ï¼Œæœ€å¤–å±‚ç»„ä»¶ä¸ºapp.vueã€‚å†…å±‚é è·¯ç”±åµŒå¥—äº†å‡ ä¸ªå­ç»„ä»¶ã€‚å­ç»„ä»¶é¡µé¢ä¸€åŠ è½½å°±éœ€è¦å»å‘è¯·æ±‚è·å–æ•°æ®ï¼Œè€Œè¯·æ±‚çš„paramé‡Œé¢ä¾èµ–çˆ¶ç»„ä»¶è·å¾—çš„æ•°æ®ã€‚ åœ¨noç»„ä»¶ï¼Œnoå•é¡µçš„æƒ…å†µä¸‹ï¼Œè¿™ç§å¯ä»¥ç”¨ä¸€ä¸ªé¡µé¢åŠ è½½åŒæ­¥è¯·æ±‚å»æå®šã€‚ä½†æ˜¯ç°åœ¨ä¸å…è®¸è¿™æ ·ã€‚è¿˜ç‰µæ‰¯åˆ°è¯¥åœ¨å“ªä¸ªåˆé€‚çš„ç”Ÿå‘½å‘¨æœŸé‡Œå»å‘é€è¯·æ±‚çš„é—®é¢˜ã€‚ å›°æƒ‘ç‚¹1ï¼šä¹‹å‰å†™reactçš„æ—¶å€™ï¼Œå®˜æ–¹å»ºè®®åœ¨componentDidMounté‡Œé¢è¿›è¡Œfetch,ä½†æ˜¯æˆ‘æ¯”è¾ƒç–‘æƒ‘çš„æ˜¯ä¸ºä»€ä¹ˆä¸åœ¨componentWillMountæˆ–è€…renderé‡Œé¢æ“ä½œã€‚å› ä¸º1ï¼Œæ•°æ®å–å¾—åå°±ä¸€ç›´å­˜åœ¨ç€ï¼Œmountä»¥åè‚¯å®šå¯ä»¥æ˜¾ç¤ºã€‚2ï¼Œéš¾é“æ˜¯å› ä¸ºwillMountå’Œrenderæ˜¯åœ¨domæ¸²æŸ“ï¼Œå¯èƒ½é˜»å¡uiçº¿ç¨‹çš„é—®é¢˜ã€‚ä½†æ˜¯ajaxæ˜¯å¦å¼€ä¸€ä¸ªçº¿ç¨‹å•Šï¼Œåº”è¯¥æ˜¯ä¸å½±å“çš„å•Šã€‚ ç§‘æ™®ä¸€ä¸‹vueçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¥¼ä¸»å¤§æ¦‚æ‰“å°äº†ä¸€ä¸‹mountä¹‹å‰çš„æ‰§è¡Œé¡ºåºã€‚ ç»“åˆå®˜ç½‘çš„ç”Ÿå‘½å‘¨æœŸåˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œéƒ½ä¼šç»å†å¦‚ä¸‹çš„è¿‡ç¨‹ï¼š beforeCreated-&gt; ç”Ÿæˆdata,computed è¿™äº›æ•°æ®,åˆå§‹åŒ–äº‹ä»¶-&gt;created,å®ä¾‹å¯¹è±¡è¢«åˆ›å»º-&gt; åœ¨ä»createdåˆ°beforeMountè¿‡ç¨‹ä¸­ç¼–è¯‘æ¨¡æ¿ï¼ˆtemplateï¼‰-&gt; ç¼–è¯‘å®Œæˆåå°†templateæ’å…¥elæˆ–è€…çˆ¶htmlä¸­ï¼Œè¿™å°±å®Œæˆäº†mountedã€‚ è€Œå¯¹äºçˆ¶ç»„ä»¶ï¼Œå› ä¸ºåµŒå¥—äº†å­ç»„ä»¶ï¼Œå®ƒçš„mountéœ€è¦ç­‰åˆ°å­ç»„ä»¶éƒ½å¤„ç†å®Œï¼Œç”Ÿæˆelå¹¶æ’å…¥documentåæ‰ç®—å®Œæˆã€‚ä¹Ÿå°±è§£é‡Šäº†ä¸Šé¢æ‰“å°çš„å†…å®¹ã€‚ ç°åœ¨çš„è§„åˆ’å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œåœ¨çˆ¶ç»„ä»¶createdçš„æ—¶å€™å»fetchæ•°æ®ã€‚ç„¶ååœ¨å­ç»„ä»¶ä¸­ç”¨v-if=â€™isParentDataGotâ€™ æ¥ç¡®å®šè£…è½½ä¸å¦ã€‚å› ä¸ºä¸Šé¢æˆ‘ä»¬è¯´äº†ï¼Œå­ç»„ä»¶å…ˆåˆ›å»ºå®ä¾‹ï¼Œå»è®¡ç®—è¿™äº›data,æ—¢ç„¶çˆ¶ç»„ä»¶æ•°æ®è¿˜æœªè·å–ã€‚é‚£ä¹ˆæœ¬ç»„ä»¶v-if === falseã€‚ä¸æ˜¾ç¤ºä½†æ˜¯å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè¿˜åœ¨è¿›è¡Œã€‚åªæ˜¯å½“çˆ¶ç»„ä»¶è·å–åˆ°åupdate,æŠŠæ•°æ®é™„ä¸Šå»ï¼Œç„¶ååœ¨mountedé‡Œé¢å»å‘é€è‡ªå·±çš„è¯·æ±‚ã€‚ å›°æƒ‘ç‚¹2ï¼šæ¥¼ä¸»æƒ³çŸ¥é“æ˜¯å¦å¯ä»¥åœ¨beforeMounté‡Œé¢return falseæ¥æ§åˆ¶æ˜¯å¦è£…è½½ã€‚å›°æƒ‘ç‚¹3ï¼šä¸€èˆ¬æ˜¯åœ¨mountedå‘é€è¯·æ±‚ï¼Œé‚£ä¹ˆvueç°åœ¨çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œåœ¨created,beforeMountè¿™äº›é‡Œé¢å‘é€ä¼šæœ‰ä»€ä¹ˆå½±å“ã€‚ çŸ¥è¯†å›é¡¾ mouseenter mouseoveråŒºåˆ«mouseenteråªåœ¨åˆšè¿›å…¥æŸä¸ªå…ƒç´ æ—¶è§¦å‘ï¼Œä¸ä¼šå†’æ³¡è€Œmouseoveråœ¨è¿›å…¥ï¼Œä»¥åŠåœ¨è¯¥å…ƒç´ ä¸Šç§»åŠ¨æ—¶éƒ½ä¼šè§¦å‘ gitè¿œç¨‹åˆå¹¶æ¥¼ä¸»æ˜¯é¡¹ç›®ownerçš„è¯ï¼Œæ¥å—è¿œç¨‹pull requeståmergeåˆ°devåˆ†æ”¯ã€‚æœ¬åœ° 12345git fetch bit-origin dev:new-branchgit checkout new-branch æŸ¥çœ‹æœ€æ–°ä»£ç ã€‚å¦‚æœå¯ä»¥çš„è¯git checkout devgit merge new-branchã€‚ä½¿å¾—devä¸ºæœ€ç»ˆä»£ç git remove new-branch","categories":[{"name":"å¼€å‘æ—¥å¸¸","slug":"å¼€å‘æ—¥å¸¸","permalink":"http://yoursite.com/categories/å¼€å‘æ—¥å¸¸/"}],"tags":[{"name":"vue","slug":"vue","permalink":"http://yoursite.com/tags/vue/"},{"name":"å­¦ä¹ æ‚é¡¹","slug":"å­¦ä¹ æ‚é¡¹","permalink":"http://yoursite.com/tags/å­¦ä¹ æ‚é¡¹/"}]},{"title":"vueå­¦ä¹ å‰ä¼ (ä¸€)","slug":"vue-prev-1","date":"2016-09-27T05:32:42.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2016/09/27/vue-prev-1/","link":"","permalink":"http://yoursite.com/2016/09/27/vue-prev-1/","excerpt":"","text":"reactçš„é¡¹ç›®ç»“å®Œæœ€è¿‘åˆæ¥äº†ä¸€ä¸ªå¯è§†åŒ–çš„éœ€æ±‚ï¼Œåœ¨çƒ­åŠ›å›¾ä¸Šå®šåˆ¶ã€‚å¥½å¥‡å®å®ä¸€ç›´æƒ³çŸ¥é“angularè·Ÿvueçš„æ•°æ®ç»‘å®šè·Ÿreactæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå°±è¯•ç€ä¸Šæ‰‹äº†ä¸‹vueï¼Œç»“æœæœ‰ç‚¹å‘çš„æ˜¯ï¼Œå…¬å¸çš„ç‰ˆæœ¬æ˜¯0.12çš„ï¼Œæœ‰äº›è¯­æ³•è·Ÿ1.0çš„è¿˜ä¸ä¸€æ ·ï¼Œæ¯”å¦‚v-repeatå•¥çš„,classçš„åŠ¨æ€ç»‘å®šæ¯”è¾ƒé¸¡è‚‹etcâ€¦å®³çš„æˆ‘è°ƒäº†åŠå¤©æ‘”â€¦ ä¸‹é¢å°±æ¥ä¸ªdemoæŠŠã€‚vueå®ä¾‹demo See the Pen vueå®ä¾‹demo by lu (@luchen) on CodePen. ä¸ºä»€ä¹ˆjsfiddleç»å¸¸æŒ‚= =ï¼Œä½œä¸šéƒ¨è½çš„markdownå±…ç„¶ä¸èƒ½æ”¯æŒcodepenç›´æ¥åµŒå…¥htmlâ€¦å°±å‹‰å¼ºæˆ³é“¾æ¥çœ‹ä¸‹å•¦ã€‚ 12345678910111213141516//html&lt;h3&gt;æµ‹è¯•éƒ¨åˆ†&lt;/h3&gt;&lt;div id=\"app\"&gt; vue 0.12ç‰ˆæœ¬çš„classç»‘å®š&lt;br&gt; &#123;&#123;customClass?customClass+' red':\"red\"&#125;&#125; &lt;div class=\"&#123;&#123;customClass?customClass +' red':'red'&#125;&#125;\"&gt;class test&lt;/div&gt;&lt;/div&gt;&lt;h3&gt;å®ä¾‹demo&lt;/h3&gt;&lt;ul v-show=\"isChaoxi\" class=\"target-wrapper clearfix\"&gt; &lt;li v-repeat=\"product in productLines\" class=\"&#123;&#123;'sm-box-item '+product.customClass&#125;&#125;\" v-on=\"click:changeProduct(product.name)\"&gt; &lt;span class=\"box-item-data\"&gt;&#123;&#123;product.data&#125;&#125;&lt;/span&gt; &lt;span class=\"box-item-name\"&gt;&#123;&#123;product.zh_name&#125;&#125;&lt;/span&gt; &lt;/li&gt; &lt;/ul&gt; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//css.red&#123; color:red;&#125;.box-border&#123; border:1px solid black;&#125;.target-wrapper&#123; list-style:none; display: flex; margin-left: -10px;&#125;.sm-box-item&#123; flex: 1; margin-left: 10px; padding: 10px 20px; height: 78px; box-sizing: border-box; font-size: 18px; color: #fff; cursor: pointer;&#125;.box-item-data,.box-item-name&#123; width: 100%; display: block;&#125;.box-item-data&#123; text-align: left; font-size: 20px;&#125;.box-item-name&#123; text-align: right; font-size: 16px;&#125;.chaoxi&#123; background-color: #fd6252;&#125;.kuaiche&#123; background-color:#54c3bc;&#125;.taxi&#123; background-color: #106ed5;&#125;.sfc&#123; background-color: #00cd99;&#125;.zhuanche&#123; background-color: #9587e9;&#125; 1234567891011121314151617181920212223242526//javascriptvar testVue = new Vue(&#123; el:\"#app\", data:&#123; show:false, customClass:\"box-border\", test:\"test\" &#125;&#125;);var demoVue = new Vue(&#123; el:\".target-wrapper\", data:&#123; isChaoxi:true, productLines: [ &#123;data:'10000',zh_name:\"æ½®æ±\",customClass:'chaoxi'&#125;, &#123;data:'30000',zh_name:\"å‡ºç§Ÿè½¦\",customClass:'taxi'&#125;, &#123;data:'8000',zh_name:\"å¿«è½¦\", customClass:'kuaiche'&#125;, &#123;data:'200',zh_name:\"ä¸“è½¦\",customClass:'zhuanche'&#125;, &#123;data:'100',zh_name:\"é¡ºé£è½¦\",customClass:'sfc'&#125; ] &#125;&#125;); å…³äºset,éœ€è¦æ³¨æ„çš„æ˜¯ åœ¨new Vueçš„æ—¶å€™æ²¡æœ‰è®¾ç½®çš„å±æ€§ï¼Œæ˜¯ä¸å¯ä»¥ç”¨vobj.key = valueæ¥æ›´æ–°çš„ã€‚åªèƒ½ç”¨$set.ä½†æ˜¯å®˜æ–¹å»ºè®®æ˜¯åœ¨dataä¸­è¿›è¡Œå£°æ˜ï¼Œä¸è¦åŠ¨æ€è®¾ç½®ã€‚ åŸå› æœ‰ä¸¤ç‚¹ï¼š ä»£ç æ˜“è¯»æ€§ åŠ¨æ€æ·»åŠ ä¼šå¼ºåˆ¶æ‰€æœ‰çš„ watcher é‡æ–°è®¡ç®—ï¼Œå› ä¸ºå®ƒä¹‹å‰ä¸å­˜åœ¨ï¼Œæ²¡æœ‰ watcher è¿½è¸ªå®ƒã€‚è™½ç„¶æ€§èƒ½ä¸Šå·®åˆ«ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯ä¸å»ºè®®ã€‚1editVobj.$set(&quot;fenceName&quot;,this.name); è€Œä¸”å¦‚æœkeyå¯¹åº”çš„valueæ˜¯ä¸€ä¸ªå¯¹è±¡çš„è¯ï¼Œ$setè®¾ç½®å®é™…ä¸Šä¼šè¿›è¡Œæ›¿æ¢ï¼Œè€Œä¸æ˜¯extend/object.assignã€‚","categories":[{"name":"å¼€å‘æ—¥å¸¸","slug":"å¼€å‘æ—¥å¸¸","permalink":"http://yoursite.com/categories/å¼€å‘æ—¥å¸¸/"}],"tags":[{"name":"vue","slug":"vue","permalink":"http://yoursite.com/tags/vue/"},{"name":"æ•°æ®ç»‘å®š","slug":"æ•°æ®ç»‘å®š","permalink":"http://yoursite.com/tags/æ•°æ®ç»‘å®š/"}]},{"title":"vueå­¦ä¹ å‰ä¼ (ä¸‰)","slug":"vue-todo","date":"2016-09-27T05:05:20.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2016/09/27/vue-todo/","link":"","permalink":"http://yoursite.com/2016/09/27/vue-todo/","excerpt":"","text":"ä¹‹å‰ç”¨jqueryå†™è¿‡ä¸€æ¬¡todoï¼Œæœ€è¿‘åœ¨å­¦vue,ï¼ˆå¥½å§å…¶å®è¿™ç¯‡æ–‡ç« æ”¾ä¸Šæ¥çš„æ—¶å€™å·²ç»è¿‡äº†å¥½ä¹…äº†ï¼Œç®—æ˜¯ç”¨vueå¼€å‘é¡¹ç›®çš„å‰ä¼ å§~ï¼Œåç»­ä¼šæ…¢æ…¢æ”¾ä¸Šé¡¹ç›®demoè®²è§£ï¼‰ï¼Œä¸‹é¢å°±æ˜¯ç”¨vueé‡æ„çš„todoçš„demoå•¦ã€‚,å¯èƒ½è¿™è¾¹æ˜¾ç¤ºæœ‰é—®é¢˜ï¼Œç›´æ¥æˆ³codepençš„é“¾æ¥å°±å¥½å•¦ã€‚ See the Pen todo via vue by lu (@luchen) on CodePen. v-modelçš„åŒå‘ç»‘å®šå®é™…ä¸Šä¹Ÿæ˜¯ç”¨get-set(observer) æ¥å®ç°çš„ã€‚å¯¹äºçš„è¯­å¥è¿›è¡Œç¼–è¯‘ï¼Œå…¶å®æ˜¯ä»£ç†åˆ°_dataå†…éƒ¨å±æ€§ï¼Œvm.message === vm._data.messageï¼Œè½¬å˜æˆä¸ºç±»ä¼¼äºä¸Šé¢çš„computedå±æ€§ä¸­çš„keyï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„get setæ–¹æ³•ã€‚ å…¶ä¸­ï¼Œéœ€è¦å®ç°observerã€‚å¯¹messageåˆ›å»ºobserveå¯¹è±¡1new Observer(&#123;message: &apos;Hello World&apos; &#125;) ï¼Œ å®ä¾‹åŒ–depå¯¹è±¡ï¼Œç”¨äºä¸‹é¢çš„æ”¶é›†ä¾èµ–,ã€‚ç´§æ¥ç€é€šè¿‡convertæ–¹æ³•ï¼ˆObserver.protoype.convert()ï¼‰å°†å±æ€§å˜æˆreactiveçš„ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®ç°get,set getç”¨äºæ”¶é›†ä¾èµ–äºmessageçš„å…¶ä»–key setç”¨äºç›‘å¬messageå˜åŒ–åé€šçŸ¥è¿™äº›ä¾èµ–ï¼Œä¾èµ–çš„æ”¶é›†æˆ‘ä»¬è¯´è¿‡ï¼Œæ˜¯ç”¨depå®ç°çš„ï¼Œå…·ä½“æ¥è¯´æ˜¯åˆ›å»ºäº†ä¸€ä¸ªsubsæ•°ç»„æ¥ä¿å­˜è®¢é˜…è€…ã€‚ ä»¥ä¸Šä¸ºinitçš„ä¸€äº›æ“ä½œï¼Œç„¶åå°±åˆ°äº†mountéƒ¨åˆ†ï¼šcompile+link.compileä¸»è¦æ˜¯å¯¹el,templateé‡Œé¢çš„å†…å®¹è¿›è¡Œè§£æï¼Œå¦‚1&#123;&#123;&#125;&#125; éœ€è¦åˆ›å»ºå…ƒç´ ï¼Œè¿™è¾¹æ˜¯textnodeï¼Œç„¶åappendåˆ°fragmentä¸­ï¼ˆé«˜æ€§èƒ½javascriptä¹Ÿæåˆ°è¿‡ï¼Œæ˜¯ä¸€ä¸ªé¿å…å¤šæ¬¡é‡ç»˜é‡æ’çš„å¥½æ–¹æ³•ï¼‰ã€‚linkä¸»è¦è¿›è¡Œçš„æ“ä½œå°±æ˜¯å®ä¾‹åŒ–æŒ‡ä»¤ï¼ˆè¿™è¾¹æ˜¯textæŒ‡ä»¤ï¼‰ï¼Œå°†æŒ‡ä»¤å’Œæ–°å»ºçš„å…ƒç´ ï¼ˆtextnodeï¼‰linkåœ¨ä¸€èµ·ï¼Œç„¶åå°†å…ƒç´ æ›¿æ¢åˆ°DOM treeä¸­å»ã€‚ ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼Œä¼šé€šè¿‡watcherå»è·å¾—è¡¨è¾¾å¼â€messageâ€çš„è®¡ç®—å€¼ï¼Œæ›´æ–°åˆ°ä¹‹å‰æ–°å»ºçš„TextNodeä¸­å»ï¼Œå®Œæˆåœ¨é¡µé¢ä¸Šæ¸²æŸ“:è·å–watcheræ•°æ®çš„æ—¶å€™ï¼Œä¼šåŒæ—¶æŠŠå®ƒä»¬åŠ å…¥åˆ°å˜åŒ–çš„è®¢é˜…è€…é›†åˆä¸­ï¼ˆå³dep.subsæ•°ç»„ä¸­ï¼‰ï¼Œä¸€æ—¦æ•°æ®è¿›è¡Œäº†å˜åŠ¨ï¼Œå°±ä¼šé€šè¿‡dep.notify() -&gt; watcher.update() -&gt; directive.update() -&gt; textDirective.update()ï¼Œå®ŒæˆDOMçš„æ›´æ–°ã€‚ references Vue.jsæºç ï¼ˆ1ï¼‰ï¼šHello Worldçš„èƒŒå æ¥¼ä¸»æ¥æ›´æ–°å•¦ï¼Œæœ€è¿‘å¯¹vuexæ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œå°±è¯•ç€ç”¨vuexé‡æ„äº†ä¸€ä¸‹todoï¼Œä½†æ˜¯æ¯”è¾ƒå›°æƒ‘çš„æ˜¯å…³äºv-modelçš„é—®é¢˜ã€‚å®˜æ–¹ç»™å‡ºçš„å»ºè®®æ˜¯å°†v-modelå˜æˆä¸€ä¸ªè®¡ç®—å±æ€§ï¼Œè¿™å¯¹äºä¸€ä¸ªæ™®é€šçš„å˜é‡ä¸å¤±ä¸ºä¸€ä¸ªå¥½çš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘è¿™è¾¹é‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œå½“æˆ‘åˆ—è¡¨æ¸²æŸ“çš„æ—¶å€™ï¼Œé‡Œé¢æœ‰v-modelï¼Œï¼ˆv-model=â€listitem.inputâ€ï¼‰è¿™ç§ï¼Œæˆ‘è¯¥æ€ä¹ˆå»ç»™å®ƒè®¾ç½®setå‡½æ•°ï¼Ÿvuexçš„ç‰ˆæœ¬ä»£ç è¯·æˆ³é“¾æ¥todo","categories":[{"name":"å¼€å‘æ—¥å¸¸","slug":"å¼€å‘æ—¥å¸¸","permalink":"http://yoursite.com/categories/å¼€å‘æ—¥å¸¸/"}],"tags":[{"name":"vue","slug":"vue","permalink":"http://yoursite.com/tags/vue/"},{"name":"todo","slug":"todo","permalink":"http://yoursite.com/tags/todo/"}]},{"title":"å›¾è§£http(äºŒ)","slug":"å›¾è§£httpä¹‹äºŒ","date":"2016-09-27T04:45:38.000Z","updated":"2017-03-25T05:47:36.000Z","comments":true,"path":"2016/09/27/å›¾è§£httpä¹‹äºŒ/","link":"","permalink":"http://yoursite.com/2016/09/27/å›¾è§£httpä¹‹äºŒ/","excerpt":"","text":"æœ¬ç¯‡ä¸»è¦ä»‹ç»å›¾è§£httpçš„ç¬¬äºŒå¤§éƒ¨åˆ†ï¼ŒåŒ…æ‹¬webæœåŠ¡å™¨ç›¸å…³çš„å†…å®¹ã€httpæŠ¥æ–‡çš„ä¸€äº›å­—æ®µï¼Œé’ˆå¯¹httpä¸æ»¡è¶³éœ€æ±‚è€Œè¿½åŠ çš„åè®®ã€åŠŸèƒ½ï¼Œwebå®‰å…¨ç­‰æ–¹é¢ã€‚and è™½ç„¶æ˜¯ç¬”è®°ï¼Œä½†æ˜¯é‡Œé¢ä¸å®šæœŸç©¿æ’ç€æ¥¼ä¸»çš„æ€è€ƒè·Ÿæ€»ç»“ï¼Œç‰¹åˆ«æ˜¯sslçš„éƒ¨åˆ†æ€å¯†è¾¾ chapter5 ä¸httpæœ‰å…³çš„webæœåŠ¡å™¨ ä¸ºä»€ä¹ˆè¯·æ±‚å¤´ä¸­è¦æŒ‡å®šuriå› ç°å®ç”Ÿæ´»ä¸­ï¼Œæœ‰å¯èƒ½ä¸€ä¸ªæœåŠ¡å™¨ä¸Šéƒ¨ç½²ç€å¤šä¸ªæœåŠ¡ï¼Œï¼ˆè™šæ‹ŸæœåŠ¡å™¨å­˜åœ¨ï¼‰åŸŸåä¸åŒï¼Œé‚£ä¹ˆå…‰æœ‰IPæ˜¯æ²¡æœ‰ç”¨çš„éƒ½ä¼šå®šä½åˆ°è¿™ä¸ªæœåŠ¡å™¨ï¼Œå› æ­¤éœ€è¦æœ‰æŒ‡å®šçš„uriæ¥å”¯ä¸€è¯†åˆ« å®¢æˆ·ç«¯ ä»£ç†æœåŠ¡å™¨ æºæœåŠ¡å™¨æ¯æ¬¡ç»è¿‡ä»£ç†æœåŠ¡å™¨ï¼Œéƒ½éœ€è¦å†™å…¥ via é¦–éƒ¨ä¿¡æ¯åˆ°å¤´è¯·æ±‚å¤´æˆ–è€…å“åº”å¤´ã€‚ chapter6 httpé¦–éƒ¨chapter6 æ˜¯httpé¦–éƒ¨å­—æ®µçš„ä¸€äº›è¯´æ˜ï¼ŒåŒ…æ‹¬é€šç”¨é¦–éƒ¨ã€è¯·æ±‚é¦–éƒ¨ã€å“åº”é¦–éƒ¨ã€å®ä½“é¦–éƒ¨ä»¥åŠä¸€äº›æ²¡æœ‰æ”¾åˆ°http1.1çš„rfcé‡Œé¢ä½†å¾ˆå¸¸ç”¨çš„é¦–éƒ¨å­—æ®µï¼ŒåŒ…æ‹¬cookieçš„ä¸€äº›å­—æ®µåŠå±æ€§ï¼Œå¦‚set-cookieçš„secureï¼ŒhttpOnlyå±æ€§,cookieå­—æ®µã€‚è¿˜æœ‰å…¶ä»–çš„å¦‚DNTï¼ˆdo not traceï¼Œæ‹’ç»ä¸ªäººä¿¡æ¯è¢«æœé›†ï¼‰ï¼Œp3pï¼ˆä¿æŠ¤ç”¨æˆ·éšç§ï¼‰çš„ç­‰ç­‰ã€‚å…·ä½“å¯ä»¥æŸ¥çœ‹ä¹¦ä¸Šçš„ä»‹ç»ï¼Œè¿™éƒ¨åˆ†ä¸å†èµ˜è¿°ã€‚ chapter7 ç¡®ä¿webå®‰å…¨çš„httpspart1: èµ·å› æœ¬ç« æ˜¯åŸºäºhttpçš„ä»¥ä¸‹ä¸‰ä¸ªç¼ºç‚¹å±•å¼€çš„ï¼š é€šä¿¡å†…å®¹å¯èƒ½è¢«çªƒå¬ï¼ˆæ˜æ–‡ä¸åŠ å¯†ï¼‰ è¢«ç¯¡æ”¹ï¼ˆæŠ¥æ–‡å®Œæ•´æ€§Xï¼‰ é€šä¿¡åŒæ–¹èº«ä»½æ— æ³•ç¡®è®¤ã€‚ ä¸ºä»€ä¹ˆä¸åŠ å¯†ï¼Ÿå› ä¸ºåŠ å¯†äº†å…¶å®ä¹Ÿå¯èƒ½è¢«çªƒå¬ï¼Œåªæ˜¯å¯èƒ½ä¸ä¼šè¢«ç ´è§£è€Œå·²ã€‚ å¦‚ä½•é˜²æ­¢è¢«çªƒå¬â€”â€”åŠ å¯† é€šä¿¡åŠ å¯†ï¼šhttp+ ssl/tls æ­¤å¤„SSLå‡ºæ²¡ç›¸å½“äºæ•´ä¸ªé€šä¿¡ä¿¡é“æ˜¯å®‰å…¨çš„ã€‚ ssl:secure socket layer å®‰å…¨å¥—æ¥å­—tls:transport layer security ä¼ è¾“å±‚å®‰å…¨åè®® å†…å®¹åŠ å¯†æ­¤å¤„ä»…å¯¹æŠ¥æ–‡ä¸»ä½“ï¼Œä¸åŒ…æ‹¬æŠ¥æ–‡é¦–éƒ¨ï¼ˆè¯·æ±‚å¤´ï¼ˆè¯·æ±‚è¡Œ+è¯·æ±‚é¦–éƒ¨ï¼‰ï¼‰ã€‚ç¼ºç‚¹ï¼šå†…å®¹æœ‰è¢«ç¯¡æ”¹çš„å¯èƒ½ã€‚ å¦‚ä½•ç¡®è®¤é€šä¿¡æ–¹çš„èº«ä»½â€”â€”è¯ä¹¦ ä¸ç¡®è®¤é€šä¿¡æ–¹çš„èº«ä»½ï¼Œå¯èƒ½ä¼šå¸¦æ¥è‹¥å¹²éšæ‚£ï¼š æœåŠ¡å™¨/å®¢æˆ·ç«¯çš„ä¼ªé€ ã€ é€šä¿¡æ–¹çš„æƒé™æ— æ³•ç¡®è®¤ã€ æµ·é‡è¯·æ±‚æ¥å—å¯¼è‡´çš„Dosæ”»å‡»SSLä½¿ç”¨äº†ä¸€ç§è¢«ç§°ä¸ºè¯ä¹¦çš„æ‰‹æ®µã€‚è¯ä¹¦æ˜¯æœ‰å¯ä¿¡ç¬¬ä¸‰æ–¹é¢å‘ï¼Œç”¨äºç¡®è®¤æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ˜¯å®é™…å­˜åœ¨çš„ï¼Œå¹¶ä¸”è¯ä¹¦çš„ä¼ªé€ æå…¶å›°éš¾ã€‚å®¢æˆ·ç«¯åœ¨å¼€å§‹é€šä¿¡å‰å…ˆç¡®è®¤æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œä¿è¯æ˜¯è‡ªå·±è¦è®¿é—®çš„æœåŠ¡å™¨ã€‚ å¦‚ä½•ä¿è¯é€šä¿¡å†…å®¹ä¸è¢«ç¯¡æ”¹â€”â€”æ‘˜è¦ç°å®ç”Ÿæ´»ä¸­ï¼Œè¯·æ±‚æˆ–è€…å“åº”åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¯èƒ½è¢«æ”»å‡»è€…æ‹¦æˆªåè¿›è¡Œç¯¡æ”¹çš„ï¼Œè¿™ç§å°±æ˜¯ä¸­é—´äººæ”»å‡»ã€‚é€šå¸¸é¿å…çš„æ–¹æ³•æœ‰MD5å’ŒSHA-1ç­‰hashå€¼æ ¡éªŒçš„æ–¹æ³•ã€æ•°å­—ç­¾åï¼ˆæ–‡ä»¶çš„æ•°å­—ç­¾åå¯ä»¥ç”¨PGPæ¥ç”Ÿæˆï¼‰ã€‚ä½†è¿™äº›æ–¹æ³•éƒ½éœ€è¦å®¢æˆ·ç«¯çš„ç”¨æˆ·å»äº²è‡ªæ£€æŸ¥éªŒè¯æ˜¯å¦è‡ªå·±ä¸‹è½½çš„æ–‡ä»¶å°±æ˜¯æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚è€Œä¸”ä¸€æ—¦MD5ï¼ŒPGPè¿™äº›è¢«ç¯¡æ”¹çš„è¯ï¼Œç”¨æˆ·å…¶å®ä¹Ÿæ— æ³•å‘ç°ã€‚ ç»¼ä¸Šï¼ŒHTTPSå¯ä»¥è§£å†³ä»¥ä¸Šä¸‰ç§é—®é¢˜ï¼ŒSSLæä¾›äº†è®¤è¯+åŠ å¯†å¤„ç†+æ‘˜è¦çš„åŠŸèƒ½ã€‚å®ƒå¯ä»¥æ€»ç»“ä¸º HTTPS = HTTP+ åŠ å¯†+ è®¤è¯ +å®Œæ•´æ€§ä¿æŠ¤ part2 HTTPS1. ä½¿ç”¨sslæ—¶ï¼Œå°±ä»é€šå¸¸çš„httpä¸tcpé€šä¿¡å˜æˆhttp-&gt;ssl-&gt;tcp-&gt;ip.. ã€æ³¨ã€‘sslæ˜¯ç‹¬ç«‹äºhttpçš„åè®®çš„ï¼Œå…¶ä»–è¿è¡Œåœ¨åº”ç”¨å±‚çš„SMTP,Telnetç­‰åè®®éƒ½å¯ä»¥ä¸sslé…åˆä½¿ç”¨ã€‚ 2. httpsé‡‡å–äº†å…±äº«ç§˜é’¥åŠ å¯†+å…¬å¼€ç§˜é’¥åŠ å¯†çš„æ··åˆåŠ å¯†æ–¹å¼è¡¥å……çŸ¥è¯†ï¼š åŠ å¯†åˆ†ä¸¤ç§ï¼Œå¯¹ç§°/éå¯¹ç§°ï¼Œsslé‡‡å–çš„æ˜¯éå¯¹ç§°å³å…¬å¼€ç§˜é’¥åŠ å¯† å¯¹ç§°å¯†é’¥ï¼ˆå…±äº«å¯†é’¥ï¼‰ï¼Œå³åŠ å¯†è§£å¯†éƒ½ç”¨åŒä¸€ä¸ªç§˜é’¥ï¼Œç¼ºç‚¹åœ¨äºç§˜é’¥å¿…é¡»å‘é€ç»™å¯¹æ–¹ï¼Œè€Œä¼ é€æ—¶æœ‰å¯èƒ½å°±è¢«çªƒå¬ç”šè‡³è·å–åˆ°ã€‚ å…¬å¼€ç§˜é’¥ä½¿ç”¨éå¯¹ç§°å¯†é’¥ï¼Œå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼Œå…¬é’¥å¯ä»¥è¢«ä»»æ„å…±äº«ã€‚å…·ä½“æ¥è¯´æ˜¯ï¼ŒAå‘é€ç»™Bï¼Œå°±ç”¨Bçš„å…¬é’¥åŠ å¯†ï¼ŒBæ”¶åˆ°åç”¨è‡ªå·±çš„ç§é’¥è§£å¯†ä¼˜ç‚¹åœ¨äºå®‰å…¨æ€§å¾—åˆ°äº†æå¤§çš„ä¿éšœï¼š åŒæ—¶è·å–å…¬é’¥ç§é’¥å¾ˆå›°éš¾ å³ä½¿è·å¾—äº†ç ´è§£ä¹Ÿå›°éš¾ï¼ˆå¤§ç´ æ•°åˆ†è§£ï¼‰ å®é™…ä¸­ï¼Œç”±äºå…¬å¼€ç§˜é’¥åŠ å¯†å¾ˆæ…¢ï¼Œå› æ­¤httpsé‡‡å–äº†ä¸¤ç§æ–¹å¼æ··åˆä½¿ç”¨çš„æ–¹å¼ï¼Œç”¨å…¬å¼€å¯†é’¥åŠ å¯†çš„æ–¹æ³•å»äº¤æ¢æ¥ä¸‹æ¥åœ¨å…±äº«ç§˜é’¥åŠ å¯†æ–¹å¼ä¸­çš„å¯†é’¥ï¼Œç„¶ååœ¨ç¡®ä¿å¯†é’¥å®‰å…¨çš„å‰æä¸‹ç”¨å…±äº«ç§˜é’¥çš„æ–¹å¼é€šä¿¡ã€‚ é—®é¢˜åˆæ¥äº†â€¦å½“ä½ ç”¨å…¬å¼€ç§˜é’¥åŠ å¯†çš„æ–¹æ³•ä¼ è¾“æ—¶ï¼Œä½ æ€ä¹ˆçŸ¥é“è¿™ä¸ªè¢«ä½ ä¼ çš„å°±æ˜¯çœŸæ­£çš„å…¬å¼€ç§˜é’¥ã€‚ä½†æ˜¯å…‰æœ‰ä¸è¡Œï¼Œå› ä¸ºä¸èƒ½è¯æ˜å…¬é’¥æœ¬èº«å°±æ˜¯çœŸæ­£çš„å…¬é’¥ï¼Œæœ‰å¯èƒ½è¿™ä¸ªå…¬é’¥å·²ç»è¢«æ”»å‡»è€…æ›¿æ¢ã€‚å› æ­¤ï¼Œå°±éœ€è¦è¯ä¹¦æ¥éªŒè¯ã€‚ 3. è¯ä¹¦ ç›®çš„ï¼šç”¨äºç¡®è®¤æœåŠ¡å™¨èƒŒåä¼ä¸šæ˜¯å¦çœŸå®å­˜åœ¨ æµç¨‹ï¼š æœåŠ¡å™¨è¿è¥äººå‘˜å‘ æ•°å­—è¯ä¹¦è®¤è¯æœºæ„ç”³è¯·ï¼Œæœºæ„ç”¨è‡ªå·±çš„ç§é’¥å¯¹ç”³è¯·çš„å…¬å¼€ç§˜é’¥åšæ•°å­—ç­¾åï¼Œç„¶åæŠŠè¿™ä¸ªå…¬å¼€å¯†é’¥Aæ”¾å…¥å…¬é’¥è¯ä¹¦ã€‚ç„¶åæœåŠ¡å™¨æŠŠè¯ä¹¦ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯è¦éªŒè¯è¿™ä¸ªå…¬é’¥è¯ä¹¦æ˜¯å¦æ˜¯æ­£ç¡®çš„ï¼Œå°±ç›´æ¥æŠŠè¯ä¹¦ï¼ˆå…¬é’¥A+æœºæ„ç§é’¥ç»„æˆçš„æ•°å­—ç­¾åï¼‰è¿åŒæµè§ˆå™¨å†…ç½®å¥½çš„è®¤è¯æœºæ„çš„å…¬é’¥Bï¼Œå»éªŒè¯æ•°å­—ç­¾åï¼Œä»¥ç¡®å®šå…¬é’¥Açš„çœŸå®æ€§ã€‚ ä¸€æ—¦éªŒè¯è¿™ä¸ªå…¬å¼€å¯†é’¥Aæ˜¯çœŸå®çš„ï¼Œå°±å¯ä»¥ç»§ç»­ç”¨åŸæ¥çš„ æ–¹å¼ï¼ˆå…¬å¼€å¯†é’¥åŠ å¯†æ–¹å¼å»äº¤æ¢å¯¹ç§°å¯†é’¥ï¼Œç„¶åå…±äº«ç§˜é’¥æ–¹å¼åŠ è§£å¯†ï¼‰â€¦.å¥½ç»•å£=ã€‚= å…¶å®å°±ç›¸å½“äºåœ¨åŸæ¥çš„åŸºç¡€ä¸Šå¤šäº†ä¸€æ­¥éªŒè¯å…¬å¼€å¯†é’¥çš„çœŸå®æ€§ã€‚è€Œè¿™ä¸ªç§˜é’¥çš„çœŸå®æ€§çš„éªŒè¯æ˜¯å€ŸåŠ©å¯ä¿¡è¯ä¹¦æœºæ„çš„å…¬ç§å¯†é’¥æ¥è§£å†³çš„ã€‚ 4. å®Œæ•´ç‰ˆæœ¬çš„https é€šä¿¡æœºåˆ¶æ­£ç¡®çš„æµç¨‹æ˜¯ï¼šæœåŠ¡å™¨ï¼šæœåŠ¡å™¨æ¯æ¬¡ä¼ é€ï¼Œéƒ½éœ€è¦å‘ï¼š//æœåŠ¡å™¨sendData = ä¿¡æ¯+ signature +æ•°å­—è¯ä¹¦ã€‚//signature = md5(ä¿¡æ¯)+ æœåŠ¡å™¨ç§é’¥åŠ å¯†//æ•°å­—è¯ä¹¦ = æœåŠ¡å™¨å…¬é’¥ + æœºæ„ç§é’¥ åŠ å¯†åç»“æœ å®¢æˆ·ç«¯å®¢æˆ·ç«¯æ‹¿åˆ°ä»¥åï¼Œç”¨æµè§ˆå™¨çš„æœºæ„å…¬é’¥è§£å¯†ï¼Œå¾—åˆ°æœåŠ¡å™¨å…¬é’¥ï¼Œç„¶åå»è§£è°œæ”¶åˆ°çš„ä¸œè¥¿ï¼Œå¾—åˆ°çš„å°±æ˜¯ md5ä»¥åçš„ ä¿¡æ¯ Aã€‚ç„¶åå°†ä¿¡ä»¶æœ¬èº«md5åç”ŸæˆB ã€‚ABè¿›è¡Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰ã€‚å°±å¯ä»¥çœ‹ä¿¡ä»¶æ˜¯å¦ç¯¡æ”¹äº†ã€‚ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå…ˆç”¨æœºæ„å…¬é’¥è§£å¯†éªŒè¯ èº«ä»½ï¼Œå†ç”¨æœåŠ¡å™¨å…¬é’¥æ­ç§˜å†æ¯”å¯¹å®ç° ç¯¡æ”¹éªŒè¯ã€‚ æ›´å¥½çš„çš„åº”è¯¥æ˜¯å®¢æˆ·ç«¯æŠŠæ¡æŒæ§æƒï¼šå®¢æˆ·ç«¯å‘ä¸€æ®µéšæœºä¸²ç»™æœåŠ¡å™¨ï¼Œè®©ä»–ç”¨ç§é’¥åŠ å¯†åä¼ è¿‡æ¥ï¼Œå®¢æˆ·ç«¯ç”¨å…¬é’¥è§£å¯†ï¼Œå‘ç°ä¸ä¹‹å‰çš„ä¸€è‡´ï¼Œè¯´æ˜å…¬ç§é’¥æ­£ç¡®ï¼ŒæœåŠ¡å™¨èº«ä»½å¯ä¿¡ã€‚ === æ›´æ–° 2017/03/25è¿™è¾¹è¿˜æ˜¯æœ‰æ²¡è¯´æ¸…æ¥šçš„åœ°æ–¹ï¼Œå®¢æˆ·ç«¯å¾—åˆ°å…¬é’¥åå¯ä»¥æ¥éªŒè¯æœåŠ¡å™¨èº«ä»½ï¼Œï¼ˆéªŒè¯é€šä¿¡æ–¹èº«ä»½ï¼‰ä½†æ˜¯å‘é€æ•°æ®ä¸èƒ½ç›´æ¥è¿™ä¹ˆå‘é€ï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½å¯ä»¥æŒæœ‰å…¬é’¥ï¼Œé‚£ä¹ˆä¿¡æ¯å°±ä¼šè¢«çªƒå–ã€‚å› æ­¤ï¼Œå®¢æˆ·ç«¯åº”è¯¥åœ¨ä¸‹ä¸€ä¸ªä¼šè¯ä¸­å‘Šè¯‰æœåŠ¡å™¨ï¼š æˆ‘æŠŠæˆ‘ä»¬ä»¥åä¼šè¯æ‰€éœ€è¦ç”¨çš„åŠ å¯†ç®—æ³•å’Œå¯†é’¥ç”¨ä½ çš„å…¬é’¥åŠ å¯†äº†ï¼Œå–ï¼Œæ‹¿å»å“ˆã€‚ å› ä¸ºè¿™ä¸ªä¿¡æ¯åªæœ‰ç§é’¥æ‰èƒ½è§£æï¼Œè€Œåªæœ‰æœåŠ¡å™¨æœ‰ç§é’¥ï¼Œå› æ­¤ä¿è¯äº†ä¿¡æ¯å³ä½¿è¢«çªƒå–ä¹Ÿæ²¡æœ‰ç”¨ã€‚å› æ­¤ä¿è¯äº†ä¿¡é“å®‰å…¨ï¼ˆé€šä¿¡å†…å®¹åŠ å¯†ï¼‰ã€‚å†ä¸‹ä¸€æ¬¡ä¼šè¯ï¼Œï¼ˆå°±å›åˆ°æˆ‘ä»¬ä¸Šé¢è¯´çš„è¿‡ç¨‹äº†ï¼‰ï¼Œå°±æ˜¯æœåŠ¡å™¨ç”¨åˆšåˆšçš„åŠ å¯†ç®—æ³•å’Œå¯†é’¥ï¼ˆæ¯”è¾ƒæœ´ç´ çš„æ˜¯hmac(data,secret)ï¼Œone-wayä¸å¯é€†ï¼‰ã€‚è¿åŒdataåŸæ–‡å‘è¿‡å»ã€‚ç„¶åå®¢æˆ·ç«¯æ”¶åˆ°ä»¥åï¼Œå› ä¸ºå®ƒè‡ªå·±ä¹ŸçŸ¥é“ç®—æ³•å’Œå¯†é’¥ï¼Œå› æ­¤å¯¹åŸæ–‡åšä¸€æ¬¡å¤„ç†ï¼Œç„¶åæ¯”å¯¹ï¼Œå®ç° æ•°æ®é˜²ç¯¡æ”¹éªŒè¯ã€‚è‡³æ­¤ï¼Œsslçš„ä¸‰å¤§è®¤è¯ç‚¹å°±éƒ½è¯´é€šäº†ã€‚ 5. sslé€Ÿåº¦æ…¢ä¸»è¦åŒ…æ‹¬ä¸¤ç§ï¼Œä¸€ç§æ˜¯é€šä¿¡æ…¢ï¼Œsslè¿æ¥æ—¶è¦é€šä¿¡ï¼Œå¦ä¸€ç§æ˜¯ï¼Œåœ¨æœåŠ¡å™¨å®¢æˆ·ç«¯éƒ½è¦è¿›è¡ŒåŠ è§£å¯†çš„å¤„ç†ï¼Œéœ€è¦æ¶ˆè€—CPUåŠå†…å­˜èµ„æºã€‚å› æ­¤ä¸ä¸€ç›´ä½¿ç”¨HTTPSã€‚ chapter8 ç¡®è®¤ç”¨æˆ·èº«ä»½çš„è®¤è¯åŒç¬¬ä¸ƒç« çš„è¯ä¹¦ï¼ˆæœåŠ¡å™¨è®¤è¯ï¼‰ä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™ä¸€ç« æ˜¯é’ˆå¯¹å®¢æˆ·ç«¯çš„è®¤è¯ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼Œä»¥åå‡ ç« éƒ½ç”¨æ€ç»´å¯¼å›¾æ¥æ€»ç»“å•¦ã€‚ chapter9 åŸºäºhttpçš„è¿½åŠ åŠŸèƒ½ã€åè®® chapter11 webæ”»å‡» references æ•°å­—è¯ä¹¦åŸç†,å…¬é’¥ç§é’¥åŠ å¯†åŸç†","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"http","slug":"http","permalink":"http://yoursite.com/tags/http/"},{"name":"ssl","slug":"ssl","permalink":"http://yoursite.com/tags/ssl/"}]},{"title":"å›¾è§£http(ä¸€)","slug":"å›¾è§£http","date":"2016-09-27T04:37:46.000Z","updated":"2017-03-25T05:29:23.000Z","comments":true,"path":"2016/09/27/å›¾è§£http/","link":"","permalink":"http://yoursite.com/2016/09/27/å›¾è§£http/","excerpt":"","text":"chapter1 webåŠç½‘ç»œåŸºç¡€æ€ç»´å¯¼å›¾ chapter2 ç®€å•çš„httpåè®® httpåè®®ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šä¿¡ã€‚ è¯·æ±‚æŠ¥æ–‡ï¼š 12GET /index.htm HTTP/1.1Host: hackr.jp è¯·æ±‚æ–¹æ³• è¯·æ±‚URI åè®®ç‰ˆæœ¬ ä»¥ä¸Šä¸‰ä¸ªä½è¯·æ±‚è¡Œ è¯·æ±‚å¤´+å†…å®¹å®ä½“ å“åº”æŠ¥æ–‡ http ä¸ä¿å­˜çŠ¶æ€ï¼ˆstatelessï¼‰ä½†å®é™…ä¸­ï¼Œéœ€è¦ä¿æŒçŠ¶æ€ï¼Œæ¯”å¦‚ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™åˆ©ç”¨cookieç­‰ã€‚ httpæ–¹æ³• get post putï¼šä¼ è¾“æ–‡ä»¶ï¼ŒçŠ¶æ€ç å¦‚204ï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶å·²ç»å­˜åœ¨äºæœåŠ¡å™¨ä¸Šã€‚ç”±äºHTTP1.1ä¸­çš„putæ–¹æ³•è‡ªèº«ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œå­˜åœ¨å®‰å…¨é—®é¢˜ã€‚ä¸€èˆ¬ç½‘ç«™ä¸ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œé™¤éæœ‰è‡ªå®šä¹‰çš„éªŒè¯æœºåˆ¶/restæ ‡å‡†è®¾è®¡ã€‚putæ˜¯å¹‚ç­‰çš„ã€‚ HEAD(åŒget,ä½†ä¸è¿”å›æŠ¥æ–‡ä¸»ä½“å†…å®¹ï¼Œç”¨äºç¡®è®¤URIæœ‰æ•ˆæ€§åŠèµ„æºæ›´æ–°çš„å†…å®¹), DELETEï¼šåˆ é™¤æ–‡ä»¶ï¼ŒåŒputä¸€æ ·ï¼Œä¸å®‰å…¨ï¼Œå“åº”ï¼š204ï¼ˆno contentï¼‰ TRACE: è®²ä¹‹å‰çš„è¯·æ±‚é€šä¿¡ç¯å›ç»™å®¢æˆ·ç«¯ã€‚ Connectï¼šç”¨éš§é“åè®®è¿æ¥ä»£ç†ï¼Œä¸»è¦ç”¨SSLã€‚TLSåè®®æŠŠé€šä¿¡å†…å®¹åŠ å¯†åç»ç½‘ç»œéš§é“ä¼ è¾“ã€‚ æŒä¹…è¿æ¥ æœ€å¼€å§‹çš„æ—¶å€™ï¼Œæ¯è¯·æ±‚ï¼ˆæŒ‡httpï¼‰ä¸€æ¬¡å°±è¦æ–­å¼€tcpå†æ–°å»ºä¸€æ¬¡è¿æ¥ï¼ˆåŒ…æ‹¬ï¼Œtcpä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œè¯·æ±‚ï¼Œå“åº”ï¼Œå››æ¬¡æ¡æ‰‹æ–­å¼€tcpè¿æ¥ï¼‰ã€‚å¼€é”€å¤ªå¤§ã€‚(æ¯”å¦‚ä¸€ä¸ªhtmlä¸­è¿˜æœ‰å›¾ç‰‡èµ„æºï¼Œè¿™ä¸ªä¹Ÿæ˜¯è¯·æ±‚ã€‚)ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæå‡ºäº†æŒä¹…è¿æ¥ã€‚ï¼ˆåªè¦ä¸€æ–¹ä¸æå‡ºæ–­è¿ï¼Œå°±ä¸€ç›´ä¿æŒtcpè¿æ¥ï¼Œå¯ä»¥å¤šä¸ªhttpè¯·æ±‚ã€‚ï¼‰http1.1é»˜è®¤æŒä¹…è¿æ¥ï¼Œä½†1.0ä¸æ˜¯å¼•ç”³ï¼šä½¿å¾—pipelineæˆä¸ºå¯èƒ½ï¼Œå¤šä¸ªè¯·æ±‚å¯ä»¥å¹¶è¡Œå‘é€ã€‚ cookieç¬¬ä¸€æ¬¡å®¢æˆ·ç«¯è¯·æ±‚åï¼ŒæœåŠ¡ç«¯ç”Ÿæˆcookieï¼Œè¦æ±‚å®¢æˆ·ç«¯set cookieï¼Œç„¶åä¸‹æ¬¡å®¢æˆ·ç«¯è¯·æ±‚æ—¶ä¾¿ä¼šè‡ªåŠ¨åŠ å…¥cookieä¿¡æ¯ï¼ŒæœåŠ¡ç«¯å†æ ¹æ®è¿™ä¸ªè¿›è¡Œåˆ¤åˆ«ã€‚æœåŠ¡ç«¯ä»ç„¶æ˜¯æ— çŠ¶æ€çš„ã€‚ chapter3 httpæŠ¥æ–‡å†…çš„httpä¿¡æ¯ è¯·æ±‚æŠ¥æ–‡ ä¸‰éƒ¨åˆ†ï¼š æŠ¥æ–‡é¦–éƒ¨ï¼ˆè¯·æ±‚å¤´ï¼‰+ è¯·æ±‚è¡Œï¼šæ–¹æ³•ã€URIã€åè®®ç‰ˆæœ¬ + é¦–éƒ¨å­—æ®µï¼š é€šç”¨é¦–éƒ¨ã€è¯·æ±‚é¦–éƒ¨|å“åº”é¦–éƒ¨ã€å®ä½“é¦–éƒ¨ + å…¶ä»–ï¼šå¦‚cookie ç©ºè¡Œã€ æŠ¥æ–‡ä¸»ä½“ å†…å®¹åå•†ä»¥è¿”å›æœ€åˆé€‚çš„å†…å®¹ æ¯”å¦‚è®¿é—®macy.comï¼Œæ¢…è¥¿ç™¾è´§ï¼Œå®ƒä¼šæ ¹æ®æµè§ˆå™¨çš„é»˜è®¤è¯­è¨€ï¼Œè¿”å›ç›¸åº”çš„webé¡µé¢ï¼Œå¦‚ä¸­æ–‡ç‰ˆã€‚ ä»¥ç›¸åº”èµ„æºçš„å­—ç¬¦é›†ã€ç¼–ç æ–¹å¼ã€è¯­è¨€ä½œä¸ºåˆ¤æ–­çš„åŸºå‡†ã€‚ chapter4 httpçŠ¶æ€ç  2XXæˆåŠŸ 200 ok 204 no content:åœ¨æœåŠ¡å™¨ä¸éœ€è¦å‘å®¢æˆ·ç«¯è¿”å›ä¿¡æ¯æ—¶ç”¨ 206 partial content, èŒƒå›´è¯·æ±‚ 3XXé‡å®šå‘ 301 moved parmanantly .æ°¸ä¹…æ€§é‡å®šå‘ï¼Œå¦‚ä¿å­˜çš„ä¹¦ç­¾éœ€è¦æ›´æ–°ã€‚ 302 found ä¸´æ—¶æ€§é‡å®šå‘ï¼Œä»…ä¸€æ¬¡ 303 see otherï¼Œè¯·æ±‚èµ„æºæœ‰å¦ä¸€ä¸ªURIï¼Œéœ€è¦ç”¨getæ–¹æ³•é‡å®šå‘è·å–ã€‚éƒ¨åˆ†åŒºåˆ«äº302 304 not modified 4XX å®¢æˆ·ç«¯é”™è¯¯ 400 bad request è¯·æ±‚æŠ¥æ–‡ä¸­æœ‰è¯­æ³•é”™è¯¯ 401 unauthorized è¦ç™»å½•/ç™»å½•å¤±è´¥â€™ 403 forbidden æƒé™é—®é¢˜ 404 not found 5XX æœåŠ¡å™¨é”™è¯¯ 500 internal server errorã€‚ 503 service unavailableï¼ŒæœåŠ¡å™¨åœ¨è¶…è´Ÿè½½æ­£å¿™retry-afterå­—æ®µ","categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://yoursite.com/categories/è¯»ä¹¦ç¬”è®°/"}],"tags":[{"name":"http","slug":"http","permalink":"http://yoursite.com/tags/http/"}]},{"title":"ä»requirejsçœ‹æ¨¡å—åŒ–","slug":"ä»requirejsçœ‹æ¨¡å—åŒ–","date":"2016-08-21T09:10:35.000Z","updated":"2017-03-29T08:55:21.000Z","comments":true,"path":"2016/08/21/ä»requirejsçœ‹æ¨¡å—åŒ–/","link":"","permalink":"http://yoursite.com/2016/08/21/ä»requirejsçœ‹æ¨¡å—åŒ–/","excerpt":"","text":"requirejsä¼˜åŠ¿ï¼ˆä½¿ç”¨åœºæ™¯ï¼‰ é˜²æ­¢jsåŠ è½½é˜»å¡é¡µé¢æ¸²æŸ“ï¼ˆasyncå±æ€§ï¼‰ é¿å…å‘½åå†²çªä»¥åŠä¸ºé¿å…å†²çªæ‰€ä½œçš„è‹¥å¹²æŒ£æ‰â€¦ï¼Œç”šè‡³è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯ï¼šä¸åŒç‰ˆæœ¬çš„ä¾èµ–åº“ï¼Œå¦‚jqueryï¼Œå¯ä»¥é€šè¿‡èµ‹ä»¥ä¸åŒçš„å‘½ååŠ ä»¥åŒºåˆ†ã€‚ æ›´å¥½çš„ä¾èµ–å¤„ç†ï¼Œè§£å†³ï¼šæ–‡ä»¶ä¾èµ–å¯¼è‡´éœ€è¦å°å¿ƒç¿¼ç¿¼çš„æ”¾ç½®å„jsï¼Œä»¥ç¡®ä¿å®ƒä»¬çš„åŠ è½½é¡ºåºã€‚ æ•™ç¨‹ å„æ¨¡å—ä¸“æ³¨äºå•ä¸€çš„åŠŸèƒ½ï¼Œä»…æš´éœ²å‡ºå¿…è¦çš„éƒ¨åˆ† æ”¹å–„æ€§èƒ½é—®é¢˜ã€‚æŒ‰éœ€åŠ è½½ï¼Œå‡å°‘ä¸å¿…è¦çš„åŠ è½½ã€‚ä¹Ÿå¯ä»¥å°†å¾ˆå°‘æ›´æ–°çš„åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨ç¼“å­˜ï¼Œç»å¸¸å˜åŠ¨çš„ç‹¬ç«‹æˆæ¨¡å—ï¼Œäº’ä¸å½±å“ã€‚ å®æˆ˜æ¼”ç»ƒdefineè·Ÿrequireçš„åŒºåˆ«åœ¨äºä¸€ä¸ªæ˜¯ç”¨äºå®šä¹‰æ¨¡å—çš„ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨å·²å®šä¹‰çš„æ¨¡å—çš„ã€‚ä»¥ä¸‹demoæ˜¯å¯ä»¥è¿è¡Œçš„ï¼Œä½†æ˜¯æ”¾åˆ°codepenä¸­ï¼Œrequireå­˜åœ¨é—®é¢˜ï¼Œå¾…è§£å†³ï¼Œæ­¤å¤„ä»…ä¾›ä»£ç å‚è€ƒã€‚ See the Pen requirejsDemo by lu (@luchen) on CodePen. fisä¸­çš„mod.jsé‡Œé¢çš„requireå®ä¹ çš„è¿‡ç¨‹ä¸­æœ€ç—›å¿ƒçš„å°±æ˜¯é—ç•™ä»£ç çš„åŠ åŠŸèƒ½ç‚¹â€¦ä¹‹å‰çš„feæ˜¯ç”¨çš„æ—§ç‰ˆæœ¬çš„fisä¸­çš„mod.jsï¼Œå®šä¹‰äº†citylistç»„ä»¶ï¼Œå¯¼è‡´é¡µé¢ä¸Šè¦ç”¨åˆ°è¿™ä¸€éƒ¨åˆ†å°±å¾—ä½¿ç”¨modä¸­çš„requireã€‚ç„¶åæ¯”è¾ƒç¥å¥‡çš„æœ‰è¿™ä¹ˆå‡ ç‚¹ requireå‡½æ•°çš„å¤§ä½“æ€æƒ³å°±æ˜¯ï¼Œå®šä¹‰ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œç„¶åæŠŠå¼•å…¥çš„jsæ–‡ä»¶ä½œä¸ºä¸€ä¸ªä¸€ä¸ªçš„key,valueå­˜è¿›å»ï¼Œæ¯æ¬¡è¿›requireå‡½æ•°ï¼Œå°±å»æ‰¾è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æ·»åŠ ï¼Œå¦‚æœæœ‰ï¼Œå°±æ›´æ–°ï¼Œä¿è¯å…¨å±€å”¯ä¸€ï¼ŒæŸç§ç¨‹åº¦ä¸Šé¿å…äº†ä¸åŒæ¨¡å—æ˜¯ä¸åŒçš„feå†™çš„ï¼Œç„¶åé‡å¤å¼•ç”¨jsçš„é—®é¢˜ã€‚ä½†æ˜¯æ¯”è¾ƒå‘çˆ¹çš„æ˜¯ï¼Œéœ€è¦æ‰‹åŠ¨åŠ scriptæ ‡ç­¾å¼•å…¥â€¦å¦‚æ­¤åäººç±»â€¦å½“ç„¶ä¹Ÿæä¾›äº†require.asyncæ¥å¼‚æ­¥å¼•å…¥ï¼Œè¿™ä¸ªå‡½æ•°ä¸­å®ƒæ˜¯å¯ä»¥createScriptçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ åªè¦æä¾›url,å®ƒä¼šåœ¨headä¸­ append scriptå…ƒç´ ã€‚ è¿˜æœ‰ä¸€ç‚¹æ³¨æ„çš„æ˜¯ï¼Œrequireåšäº†éƒ¨åˆ†å…¼å®¹ï¼Œå°±æ˜¯å¦‚æœä¼ ç»™ä»–çš„æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¼šè°ƒç”¨require.asyncã€‚ å…³äºç±»æ¯”requireä¸­çš„path,modé‡Œé¢ä¹Ÿæœ‰resourceMapè¿›è¡Œå¤„ç†ï¼Œ 123456789101112131415161718192021222324require.resourceMap(&#123; res:&#123; 'cityList':&#123; url:'/static/js/app/module_cityList.js' &#125;, 'echarts':&#123; url:'/static/hotmap/js/libs/echarts/echarts.common.js' &#125;, 'moment':&#123; url:\"/static/hotmap/js/libs/moment/moment.js\" &#125;, 'BMap':&#123; url:'http://api.map.baidu.com/api?v=2.0&amp;ak=8WEtlKYLwwssirUarD5O7ba0.js' &#125;, 'heatForm':&#123; url:\"/static/hotmap/js/components/formRelated.js\" &#125;, &#125;, 'HeatmapOverlay':&#123; deps:['BMap'], //**ç±»ä¼¼äºshim** url:'http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js' &#125; &#125; &#125;); eg.1var moment = require(['moment']); å¹¶ä¸æ˜¯æˆ‘ä»¬é€šå¸¸æ„ä¹‰ä¸Šç†è§£çš„æ¨¡å—ã€åŒæ­¥ã€å¼•å…¥ã€‚= = demoå¦‚å›¾ã€‚ å…¶ä¸­ï¼Œheatformçš„æ–‡ä»¶æ˜ å°„è§ä¸Š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103define('heatForm',function(require,exports, module)&#123; var moment = require(['moment']); var $ = require([\"jquery\"]); var o = &#123;&#125;; var target = $(\"#target\"); //æŒ‡æ ‡ var productLine = $(\"#productLine\"); var particleSize = $(\"#particleSize\"); var hourRange = $(\"#hourRange\"); var searchBtn = $(\"#searchBtn\"); //å¯¹åº”äºsizeçš„å½“å‰æ—¶é—´çš„formatï¼Œå¦‚ç²’åº¦ä¸º15æ—¶ï¼Œç°åœ¨7:35ï¼Œoutput:7:30-7:45 function getCurStart(size) &#123; if (size == 0) size = 1; var intervals = moment().diff(moment(&#123; h: 0, m: 0 &#125;), 'm'); var result = moment(&#123; h: 0, m: 0 &#125;).add(Math.floor(intervals / size) * size, 'm').format(\"HH:mm\"); return result; &#125; //æ—¶é—´æ®µçš„ä¸‹æ‹‰èœå•html function generateRangeHtml(size) &#123; var totalMinutesOneDay = 1440, durationsArr = [], intervals; if (size === 0) &#123; size = 1; intervals = moment().diff(moment(&#123; h: 0, m: 0 &#125;), 'm') + 1; &#125; else intervals = totalMinutesOneDay / size; for (var i = 0; i &lt; intervals; i++) &#123; var durations = i * size; var h = Math.floor(durations / 60); var m = durations - h * 60; var startTime = moment(&#123; hour: h, minute: m &#125;); var endTime = moment(&#123; hour: h, minute: m &#125;).add(size, 'm'); durationsArr.push(&#123; startTime: startTime.format('HH:mm'), endTime: endTime.format(\"HH:mm\") &#125;); &#125; var curTime = getCurStart(size); var newOptions = durationsArr.map(function(one) &#123; if (one.startTime === curTime) &#123; return `&lt;option selected=$&#123;\"selected\"&#125; value=$&#123;one.startTime&#125;&gt;$&#123;one.startTime&#125;-$&#123;one.endTime&#125;&lt;/option&gt;` &#125; else return `&lt;option value=$&#123;one.startTime&#125;&gt;$&#123;one.startTime&#125;-$&#123;one.endTime&#125;&lt;/option&gt;`; &#125;).join(\"\"); return newOptions; &#125; function bindEvent() &#123; particleSize.on(\"change\", function(event) &#123; var size = parseInt($(this).val()); var newRangeOptions = generateRangeHtml(size); hourRange.html(newRangeOptions); &#125;); productLine.on(\"change\", function(event) &#123; var product = $(this).val(); if (product === \"sfc\") &#123; target.html(\"&lt;option value='callNum'&gt;å‘¼å«é‡&lt;/option&gt;\"); &#125;else&#123; target.html( [\"&lt;option value='needNum'&gt;éœ€æ±‚æ•°&lt;/option&gt;\", \"&lt;option value='callNum'&gt;å‘¼å«é‡&lt;/option&gt;\"].join(\"\")); &#125; &#125;); target.on(\"change\",function(event)&#123; var $this = $(this); var sfcOption = \"&lt;option value='sfc'&gt;é¡ºé£è½¦&lt;/option&gt;\" if(($this).val()===\"needNum\")&#123; productLine.children(\".sfc\").remove(); &#125;else&#123; if(productLine.children(\".sfc\")===-1) productLine.append(sfcOption); &#125; &#125;); //å¾…åŠ å…¥searchBtnçš„clickäº‹ä»¶ &#125; o.bindEvent = bindEvent; // return o; module.exports=o;&#125;); 1234//è°ƒç”¨require.async('heatForm', function(heatForm) &#123; heatForm.bindEvent(); &#125;) AMD,CMD,UMDæ¦‚è§ˆä¸€èˆ¬ require ç”¨äºå¤„ç†é¡µé¢é¦–å±æ‰€éœ€è¦çš„æ¨¡å—ï¼Œrequire.async ç”¨äºå¤„ç†é¦–å±å¤–çš„æŒ‰éœ€æ¨¡å—ã€‚1234567891011&#123;script type=&quot;text/javascript&quot;&#125; // åŒæ­¥è°ƒç”¨ jquery var $ = require(&apos;common:widget/jquery/jquery.js&apos;); $(&apos;#btn&apos;).click(function() &#123; // å¼‚æ­¥è°ƒç”¨ respClick æ¨¡å— require.async([&apos;/widget/ui/respClick/respClick.js&apos;], function() &#123; respClick.hello(); &#125;); &#125;); &#123;/script&#125; ä¸‰è€…ä»£ç ç¤ºä¾‹AMD:è§ä¸Š CMD:123456789101112131415//commonjs// æ–‡ä»¶å: foo.jsvar $ = require('jquery');var _ = require('underscore');// methodsfunction a()&#123;&#125;; // ç§æœ‰æ–¹æ³•ï¼Œå› ä¸ºå®ƒæ²¡åœ¨module.exportsä¸­ (è§ä¸‹é¢)function b()&#123;&#125;; // å…¬å…±æ–¹æ³•ï¼Œå› ä¸ºå®ƒåœ¨module.exportsä¸­å®šä¹‰äº†function c()&#123;&#125;; // å…¬å…±æ–¹æ³•ï¼Œå› ä¸ºå®ƒåœ¨module.exportsä¸­å®šä¹‰äº†// æš´éœ²å…¬å…±æ–¹æ³•module.exports = &#123; b: b, c: c&#125;; æ­¤å¤„éœ€è¦æ³¨æ„exportsæ˜¯module.exportsçš„ä¸€ä¸ªå¼•ç”¨ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨123exports = &#123; ...&#125; æš´éœ²æ¨¡å—çš„è¾“å‡ºçš„è¯ï¼Œæ˜¯æ— æ•ˆçš„ã€‚å› ä¸ºæ­¤æ—¶ç›¸å½“äºexportsçš„å¼•ç”¨å¯¹è±¡æ›´æ”¹äº†ï¼Œä¸¤è€…å¹¶ä¸æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚module.exportsæŒ‡å‘çš„æ‰æ˜¯ã€‚ UMD:123456789101112131415161718192021222324//UMD(function (root, factory) &#123; if (typeof define === 'function' &amp;&amp; define.amd) &#123; // AMD define(['jquery', 'underscore'], factory); &#125; else if (typeof exports === 'object') &#123; // Node, CommonJSä¹‹ç±»çš„ module.exports = factory(require('jquery'), require('underscore')); &#125; else &#123; // æµè§ˆå™¨å…¨å±€å˜é‡(root å³ window) root.returnExports = factory(root.jQuery, root._); &#125;&#125;(this, function ($, _) &#123; // æ–¹æ³• function a()&#123;&#125;; // ç§æœ‰æ–¹æ³•ï¼Œå› ä¸ºå®ƒæ²¡è¢«è¿”å› (è§ä¸‹é¢) function b()&#123;&#125;; // å…¬å…±æ–¹æ³•ï¼Œå› ä¸ºè¢«è¿”å›äº† function c()&#123;&#125;; // å…¬å…±æ–¹æ³•ï¼Œå› ä¸ºè¢«è¿”å›äº† // æš´éœ²å…¬å…±æ–¹æ³• return &#123; b: b, c: c &#125;&#125;)); å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰è¿è¡Œæ—¶ç¯å¢ƒï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ¨¡å—çš„å®šä¹‰ä½“ã€‚åœ¨æ‰§è¡ŒUMDè§„èŒƒæ—¶ï¼Œä¼šä¼˜å…ˆåˆ¤æ–­æ˜¯å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒAMDç¯å¢ƒï¼Œç„¶åå†æ£€éªŒæ˜¯å¦æ”¯æŒCommonJSç¯å¢ƒï¼Œå¦åˆ™è®¤ä¸ºå½“å‰ç¯å¢ƒä¸ºæµè§ˆå™¨ç¯å¢ƒï¼ˆ window ï¼‰ã€‚ ä»æ¨¡å—åŠ è½½æµç¨‹çœ‹amd,cmdåŒºåˆ«æ€»ç»“æ¥è¯´ï¼Œcmdæ˜¯å¼‚æ­¥åŠ è½½ã€å»¶è¿Ÿä¸”åŒæ­¥æ‰§è¡Œã€ä¾èµ–å°±è¿‘amdæ˜¯å¼‚æ­¥åŠ è½½ï¼ˆä¸‹è½½ï¼‰ã€å¼‚æ­¥æ‰§è¡Œã€ä¾èµ–å‰ç½®ã€‚ ï¼ˆ1ï¼‰ç¤ºä¾‹1234567891011121314151617181920//AMDdefine([\"./a\", \"./b\"], function(a, b) &#123; //BEGIN 1 if (true) &#123; a.doSomething(); &#125; else &#123;b.doSomething(); &#125; //END&#125;);//CMDdefine(function(require) &#123; // BEGIN 2 if(some_condition) &#123; require('./a').doSomething(); &#125; else &#123; require('./b').soSomething(); &#125; // END&#125;); åœ¨BEGIN1ä½ç½®å¤„aã€bæ¨¡å—éƒ½éœ€è¦è¢«æ‰§è¡Œä¸€æ¬¡ã€‚CMDä¸­BEGIN 2å¤„aã€béƒ½æ²¡æœ‰è¢«æ‰§è¡Œï¼Œåœ¨ENDå¤„ï¼Œaã€båªæœ‰ä¸€ä¸ªè¢«å®é™…æ‰§è¡Œè¿‡ã€‚è¿™å°±æ˜¯cmdæ‰€è¯´çš„å»¶è¿ŸåŠ è½½ã€‚ ï¼ˆ2ï¼‰å¤§è‡´æµç¨‹ä»¥requirejsä¸ºä¾‹ï¼Œå…¶å®amd,cmdçš„æµç¨‹åŸºæœ¬ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºåé¢çš„æ‰§è¡Œæ–¹é¢ã€‚ requirejsï¼šç”¨registryï¼ˆ{id:module}ï¼‰æ¥ç»´æŒä¸€ä¸ªå…¨å±€çš„æ¨¡å—èµ„æºè¡¨ï¼Œä¿è¯ä¸é‡å¤ï¼Œæ¯æ¬¡æ ¹æ®idæ¥æŸ¥æ‰¾ï¼Œæœ‰åˆ™è¿”å›ï¼Œæ— åˆ™å»new Moduleã€‚new Moduleçš„æ—¶å€™ä¼šè§¦å‘Module.initå‡½æ•°ï¼Œä¾æ¬¡è¿›è¡ŒcreateScriptï¼Œloadingï¼Œå°†æ¨¡å—çš„ä¾èµ–åŠ å…¥åˆ°ä¾èµ–æ•°ç»„é‡Œï¼Œè§¦å‘è‡ªå·±çš„completeLoadäº‹ä»¶ï¼Œåœ¨è¯¥äº‹ä»¶ä¸­ï¼Œä¾æ¬¡å»getä¾èµ–çš„Module,(åœ¨getModuleæ—¶åˆä¼šå›åˆ°ä¸Šé¢çš„æ­¥éª¤ï¼Œæœ‰åˆ™è¿”å›ï¼Œæ— åˆ™new Module).å†æ¥ä¸‹æ¥ä¼šåš checkLoaded,å…¶ä¸­æ¯éš”50mså»checkoutLoadTimeoutIdï¼Œå› ä¸ºæ¨¡å—æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œæ‰€ä»¥ç”¨è¿™ä¸ªæ¥ä¿è¯åŠ è½½ç»“æŸã€‚ defineå‡½æ•°ä¸­è¿›è¡Œäº†å…¼å®¹ï¼ŒåŒ…æ‹¬æ— id,æ— ä¾èµ–çš„ï¼Œcommonjså†™æ³•çš„ï¼ˆè¿™ç§æƒ…å†µä¸‹åŒseajsä¸€æ ·ï¼Œfactory.toString()åæ­£åˆ™åŒ¹é…å‡ºä¾èµ–é¡¹ï¼‰ç­‰å¤šç§æƒ…å†µã€‚ seajs:å¼‚æ­¥ä¸‹è½½è„šæœ¬æ¨¡å—,ä¸‹è½½åï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰§è¡Œ define(fn),define æ–¹æ³•ä¼šä¿å­˜ fn å’Œæå–è¯¥æ¨¡å—çš„ä¾èµ–æ¨¡å—ï¼ˆåˆ©ç”¨ fn.toStringï¼‰,æŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•ï¼ŒæŠŠä¾èµ–æ¨¡å—éƒ½ä¸‹è½½å¥½æ¥ç€æ ¹æ®ä¾èµ–å…³ç³»ï¼Œä¾æ¬¡æ‰§è¡Œå„ä¸ªæ¨¡å—çš„ fnã€‚ ï¼ˆ3ï¼‰åŒºåˆ«/ç›¸åŒç‚¹ åŒï¼šamd,cmdéƒ½æ˜¯é€šè¿‡è®¾ç½®createElement(script),ä¸”è®¾ç½®asyncå±æ€§=true,å› æ­¤å®ƒä»¬éƒ½æ˜¯async,å¼‚æ­¥ä¸‹è½½çš„ã€‚ å¼‚1ï¼ˆæ‰§è¡Œæ—¶åˆ»ï¼‰ï¼šamdæ˜¯å¹¶è¡ŒåŠ è½½åå°±æ‰§è¡Œï¼Œè€Œcmdæ˜¯as lazy as possible,å…ˆå¹¶è¡ŒåŠ è½½ï¼Œä½†æ˜¯ç›´åˆ°requireä½¿ç”¨æ—¶æ‰ä¼šæ‰§è¡Œã€‚å› æ­¤ç›¸å¯¹ä¼šè€—è´¹äº†æ—¶é—´ã€‚ä¸¾ä¸ªæ —å­ï¼Œamdä¸­ï¼Œdefine(id,[],factory),[]æŒ‡ç¤ºçš„ä¾èµ–æ•°ç»„å°±ç›¸å½“äºcmdé‡Œé¢çš„é‚£ä¸ªrequire,é‚£ä¸ªrequireå°±æ˜¯æ‰§è¡Œ~ å¼‚2ï¼ˆæ‰§è¡Œé¡ºåºï¼‰ï¼šamdæ˜¯å¼‚æ­¥æ‰§è¡Œï¼ˆæ‰§è¡Œé¡ºåºä¸å®šï¼‰ï¼Œè€Œcmdæ˜¯åŒæ­¥æ‰§è¡Œï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥è®¾ç½®require.asyncå»å¼‚æ­¥æ‰§è¡Œï¼‰ æ³¨ï¼šamd,cmdéƒ½æ˜¯åŸºäºcommonjsçš„ï¼ŒcommonjsæœåŠ¡äºæœåŠ¡ç«¯ï¼Œcmdå’Œamdä½œç”¨äºæµè§ˆå™¨ç«¯ï¼Œå› ä¸ºcmdä¸­çš„requireæ˜¯åŒæ­¥æ‰§è¡Œï¼Œéœ€è¦æ‰§è¡Œå®Œæ‰èƒ½æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œå¯¹äºæµè§ˆå™¨ç«¯æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºæ¨¡å—åœ¨æœåŠ¡å™¨ç«¯ï¼Œå®Œå…¨æ‹¼ç½‘é€Ÿã€‚ â€œ å› ä¸ºæ‰€æœ‰çš„æ¨¡å—éƒ½å­˜æ”¾åœ¨æœ¬åœ°ç¡¬ç›˜ï¼Œå¯ä»¥åŒæ­¥åŠ è½½å®Œæˆï¼Œç­‰å¾…æ—¶é—´å°±æ˜¯ç¡¬ç›˜çš„è¯»å–æ—¶é—´ã€‚ä½†æ˜¯ï¼Œå¯¹äºæµè§ˆå™¨ï¼Œè¿™å´æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå› ä¸ºæ¨¡å—éƒ½æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼Œç­‰å¾…æ—¶é—´å–å†³äºç½‘é€Ÿçš„å¿«æ…¢ï¼Œå¯èƒ½è¦ç­‰å¾ˆé•¿æ—¶é—´ï¼Œæµè§ˆå™¨å¤„äºâ€å‡æ­»â€çŠ¶æ€ã€‚â€ â€“é˜®ä¸€å³° ï¼ˆ4ï¼‰è¡¥å……requirejsæ€§èƒ½å¥½ç‚¹çš„åŸå› ï¼š è§£æä¾èµ–æ—¶ç›´æ¥å°±å¯ä»¥çŸ¥é“ï¼Œä¸éœ€è¦åƒseajsä¸€æ · function.to String()åæ­£åˆ™åŒ¹é…requireåçš„ä¾èµ– å¼‚æ­¥åŠ è½½æ‰§è¡Œï¼Œè€ŒcmdåŒæ­¥æ‰§è¡Œè€—æ—¶å‚è€ƒamd,cmd cmd ä¸­requireçš„åŠ è½½ä¸æ‰§è¡Œçš„å…³ç³»ï¼Ÿrequireçš„æ—¶å€™å®é™…ä¸Šæ˜¯å·²ç»åŠ è½½å¥½äº†ï¼Œå»æ‰§è¡Œ exec()12345678seajs.require = function(id) &#123; var mod = Module.get(Module.resolve(id)) if (mod.status &lt; STATUS.EXECUTING) &#123; mod.onload() mod.exec() &#125; return mod.exports&#125; è¡¥å……çŸ¥è¯†ï¼š æµè§ˆå™¨é€šå¸¸è§£æscriptçš„æ—¶å€™æ˜¯åŒæ­¥ä¸‹è½½ã€åŒæ­¥é˜»å¡æ‰§è¡Œã€‚é™¤éæ‰‹åŠ¨è®¾ç½®äº†asyncï¼Œdeferç­‰å±æ€§å…·ä½“æ€»ç»“æ¥è¯´ defer:å¼‚æ­¥ä¸‹è½½ã€æœ€åï¼ˆdocumentè¢«è§£æä¹‹åï¼‰æ‰§è¡Œï¼Œä»ç„¶åœ¨DOMContentLoadedä¹‹å‰ asyncï¼šå¼‚æ­¥ä¸‹è½½åç«‹åˆ»å¼‚æ­¥æ‰§è¡Œï¼ˆæ‰§è¡Œæ—¶å¯èƒ½é¡µé¢è¿˜åœ¨è§£æï¼Œä¸block parseï¼Œé¡ºåºä¸å®šï¼‰ä¸”åœ¨windowçš„loadäº‹ä»¶ä¹‹å‰æ‰§è¡Œ ä¸è®¾ç½®ï¼šåŒæ­¥ä¸‹è½½ã€åŒæ­¥æ‰§è¡Œï¼Œåœ¨é¡µé¢ç»§ç»­è§£æä¹‹å‰ï¼Œå› æ­¤ä¼šé˜»å¡ 2ï¼ŒåŠ¨æ€åˆ›å»ºscriptæ ‡ç­¾å¹¶æ’å…¥==è®¾ç½®ä¸ºasync references Asynchronous and deferred JavaScript execution explained scriptçš„deferå’Œasync ä»¥ä»£ç çˆ±å¥½è€…è§’åº¦æ¥çœ‹AMDä¸CMD seajs æºç è§£è¯» Deep dive into the murky waters of script loading ä¸»è¦æ¶‰åŠåˆ°å¼‚æ­¥åŠ è½½é¡ºåºæ‰§è¡Œçš„æ–¹æ³• to think: es6ä¸­çš„moduleæœºåˆ¶ä»¥åŠwebpackçš„å¤„ç†","categories":[{"name":"intern","slug":"intern","permalink":"http://yoursite.com/categories/intern/"}],"tags":[{"name":"requirejs","slug":"requirejs","permalink":"http://yoursite.com/tags/requirejs/"},{"name":"æ¨¡å—åŒ–","slug":"æ¨¡å—åŒ–","permalink":"http://yoursite.com/tags/æ¨¡å—åŒ–/"},{"name":"AMD","slug":"AMD","permalink":"http://yoursite.com/tags/AMD/"},{"name":"CMD","slug":"CMD","permalink":"http://yoursite.com/tags/CMD/"}]},{"title":"github+hexoæ­å»ºåšå®¢","slug":"æµ‹è¯•","date":"2016-08-16T08:23:37.000Z","updated":"2017-02-28T05:01:34.000Z","comments":true,"path":"2016/08/16/æµ‹è¯•/","link":"","permalink":"http://yoursite.com/2016/08/16/æµ‹è¯•/","excerpt":"","text":"å®‰è£…1.å®‰è£…hexoç”Ÿæˆblogæ­¥éª¤ï¼š 1234npm install hexo-cli -ghexo init blogcd bloghexo server //localhost:4000æ‰“å¼€å³å¯ ä¼šçœ‹åˆ°ï¼Œblogæ–‡ä»¶å¤¹ä¸‹çš„ç›®å½•ä¸ºï¼š å…¶ä¸­ä¸€äº›hexoçš„æ’ä»¶æ˜¯åœ¨node_modulesé‡Œé¢è¢«é»˜è®¤å®‰è£…äº†ã€‚package.jsoné‡Œé¢ä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³ç‰ˆæœ¬åŠæ’ä»¶ ã€è¡¥å……ã€‘å¸¸ç”¨å‘½ä»¤ æ–°å»º 123hexo new fileName//è¾“å‡ºçš„ä¿¡æ¯å¦‚ä¸‹INFO Created: e:\\GraduateSemester2\\summer\\blog\\source\\_posts\\æµ‹è¯•.md å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è¿›å…¥sourceæ–‡ä»¶å¤¹é‡Œé¢çš„_postsæ–‡ä»¶å¤¹ï¼Œé‡Œé¢ç¼–è¾‘markdownæ–‡ä»¶å³å¯ é¢„è§ˆ 12hexo s //æ‰“å¼€localhost:4000ç›´æ¥é¢„è§ˆ 2,é…ç½®github æ–°å»ºä¸€ä¸ªä¸github usernameåŒåçš„repository å‡è®¾æˆ‘çš„åå­—æ˜¯pokemon,åˆ™repositoryæ–°å»ºä¸ºpokemon.github.ioï¼Œ git clone æ–°å»ºçš„repository è½¬åˆ°åˆšåˆšhexoçš„æ–‡ä»¶å¤¹ï¼Œè¿è¡Œ 12hexo g //ç”Ÿæˆpublicé™æ€èµ„æºæ–‡ä»¶ï¼Œä¼šçœ‹åˆ°blogæ–‡ä»¶å¤¹ä¸‹å¤šäº†ä¸€ä¸ªpublicæ–‡ä»¶å¤¹ 3,éƒ¨ç½² æ›´æ”¹hexoçš„config.yml 1234deploy: type: git repo: https://github.com/liz282907/liz282907.github.io.git branch: master **æ³¨æ„ç‚¹**ï¼š ï¼ˆ1ï¼‰typeï¼šã€ç©ºæ ¼ã€‘...ï¼Œç„¶åæ‰ä¼šç”Ÿæ•ˆ ï¼ˆ2ï¼‰deployæ’ä»¶è¦å®‰è£… 1npm install hexo-deployer-git --save ï¼ˆ3ï¼‰æ¯æ¬¡æ›´æ”¹æ–‡ä»¶åï¼Œéƒ½å¾—é‡æ–° hexo generateä»¥ç”Ÿæ•ˆï¼Œç„¶åæ‰èƒ½æœ€ç»ˆéƒ¨ç½²ã€‚å¦åˆ™ä¼šé‡åˆ°è«åå…¶å¦™çš„443,githubæ‰“ä¸å¼€çš„é—®é¢˜ 1hexo g éƒ¨ç½²ç”Ÿæ•ˆ 1hexo deploy ä¼šè®©ä½ è¾“å…¥githubçš„ç”¨æˆ·åï¼Œå¯†ç  å®Œæˆåï¼Œä¼šæ˜¾ç¤ºä¸‹å›¾ ![deployæˆåŠŸå›¾](http://i2.buimg.com/567571/a70832f19113fb9d.png) æ›´æ¢ä¸»é¢˜ä¸‹è½½ä¸»é¢˜hexoä¸­æœ‰å¤šç§ä¸»é¢˜å¯ä¾›é€‰æ‹©ï¼Œèåœé’èœå„æœ‰æ‰€çˆ±å•¦ï¼Œæ¥¼ä¸»å–œæ¬¢ç®€æ´é£ï¼Œå°±é€‰æ‹©çš„æ˜¯nextä¸»é¢˜ 12cd bloggit clone https://github.com/iissnan/hexo-theme-next themes/next é…ç½®config12æ›´æ”¹config.ymlçš„theme:theme:next æ¸…ç†ç¼“å­˜å¹¶éªŒè¯12hexo cleanhexo s --debug //é¢„è§ˆå¹¶æ‰“å¼€è°ƒè¯•æ¨¡å¼ ä¸ªæ€§åŒ–è®¾ç½®æ·»åŠ å¤šè¯´è¯„è®ºæ¡†ç”³è¯·å¤šè¯´åŸŸå ç‚¹å‡»å¤šè¯´å®˜ç½‘çš„æˆ‘è¦å®‰è£…,å¡«å†™ç›¸å…³çš„ä¿¡æ¯ï¼Œæ³¨æ„å¤šè¯´åŸŸåä¸­è¦å¡«å†™çš„éƒ¨åˆ†å³ä¸ºç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­è¦å¢åŠ çš„short_nameã€‚12# comment duoshuoduoshuo_shortname: luchen-blog æ›´æ”¹themesä¸­çš„æ¨¡æ¿ ä¿®æ”¹themesä½ çš„ä¸»é¢˜æ–‡ä»¶å¤¹(è¿™è¾¹ä¸ºnext)çš„æ¨¡æ¿æ–‡ä»¶ï¼šthemes\\next\\layout_partials\\comments.swig æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆå› ä¸ºæ–°ç‰ˆæœ¬çš„nextå·²ç»åšäº†å…¼å®¹äº†ï¼Œå³duoshuo+facebook+disqusï¼Œåªéœ€è¦å¢åŠ å¤šè¯´çš„è¯„è®ºæ¡†å³å¯ï¼‰ 1234567891011&lt;script type=&quot;text/javascript&quot;&gt;var duoshuoQuery = &#123;short_name:&quot;luchen-blog&quot;&#125;; (function() &#123; var ds = document.createElement(&apos;script&apos;); ds.type = &apos;text/javascript&apos;;ds.async = true; ds.src = (document.location.protocol == &apos;https:&apos; ? &apos;https:&apos; : &apos;http:&apos;) + &apos;//static.duoshuo.com/embed.js&apos;; ds.charset = &apos;UTF-8&apos;; (document.getElementsByTagName(&apos;head&apos;)[0] || document.getElementsByTagName(&apos;body&apos;)[0]).appendChild(ds); &#125;)(); &lt;/script&gt; è¡¥å……ï¼šè·å–user_id:è®¿é—®å¤šè¯´åå° ï¼Œç‚¹å‡»ç”¨æˆ·åï¼Œç½‘é¡µä¸Šä¼šæ˜¾ç¤ºhref,å…¶ä¸­profileåé¢çš„ä¸€ä¸²å°±æ˜¯ä½ çš„user_id æ­¤æ—¶å†æ‰“å¼€å¦‚username.github.ioå°±å¯ä»¥å•¦ 4ï¼ŒæŸ¥çœ‹æ•ˆæœ æ·»åŠ ç«™ç‚¹ç»Ÿè®¡ä¿¡æ¯æ³¨å†Œç™¾åº¦ç»Ÿè®¡ç»™è‡ªå·±çš„ç«™ç‚¹ï¼Œå¦‚yoursite.github.io å¢åŠ ç»Ÿè®¡ä¿¡æ¯ã€‚ æ’å…¥ç»Ÿè®¡ä»£ç  æ”¾ç½®äºä¹‹å‰,å…·ä½“æ¥è¯´ï¼Œæ‰¾åˆ°blog/themes\\next\\layout_partials\\head.swig,åœ¨æœ€åä¸€è¡ŒåŠ å…¥ä¸Šé¢çš„ç»Ÿè®¡ä»£ç å³å¯ã€‚ æ›´æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶å¢åŠ baidu_analytics: your site id å³å¯åœ¨ç™¾åº¦ç»Ÿè®¡ç½‘ç«™é‡Œçœ‹åˆ°è®¿é—®æƒ…å†µäº† æ›´æ–°ï¼ˆWindows-&gt;Macè¿ç§»åçš„ä¸€ç³»åˆ—é—®é¢˜fixï¼‰åˆ’é‡ç‚¹å°±æ˜¯ï¼Œåˆ é™¤ä¸å¿…è¦çš„æ–‡ä»¶ï¼ŒæŒ‰ç…§ä»¥å‰çš„æ–¹å¼éƒ¨ç½²ï¼Œæœ‰é—®é¢˜å»GitHubçœ‹ä¸‹å½“å‰repoçš„settingé‡Œé¢æœ‰æ²¡æœ‰æŠ¥warningæˆ–è€…æœ‰æ²¡æœ‰æ”¶åˆ°build errorçš„é‚®ä»¶ã€‚ éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š å¦‚æœä¸»é¢˜æ˜¯é€šè¿‡gitç®¡ç†çš„ï¼Œéœ€è¦å°†ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„.gitæ–‡ä»¶å¤¹åˆ é™¤æˆ–è€…ä½¿ç”¨git submoduleçš„å½¢å¼è¿›è¡Œç®¡ç†ï¼Œæ‰èƒ½åŒæ­¥Blogæ–‡ä»¶å¤¹ï¼Œsubmoduleçš„è¯æ˜¯æ·»åŠ .gitsubmodulesæ–‡ä»¶ï¼Œå°†ä¾èµ–çš„submoduleæ·»åŠ è¿›å»ï¼Œæ¥¼ä¸»è¿™è¾¹æ˜¯theme/next,ä½†æ˜¯å£°æ˜äº†ä»¥åæ²¡æœ‰ç”¨ï¼Œå°±ç›´æ¥åˆ é™¤äº†themes/nextä¸‹é¢çš„.git æ–‡ä»¶å¤¹ Blogç›®å½•ä¸‹è‡ªå¸¦çš„.gitignoreæ–‡ä»¶ï¼Œnode_modulesæ–‡ä»¶å¤¹æ˜¯ä¸ä¼šåŒæ­¥çš„ï¼Œæ‰€ä»¥åŒæ­¥ä¹‹åéœ€è¦è‡ªå·±å†æ¬¡è¿›è¡Œnpm installï¼Œä½†æ˜¯æ³¨æ„ï¼Œä¸è¦è¿›è¡Œhexo initäº†ï¼Œå¦åˆ™_config.ymlä¼šè¢«è¦†ç›–ã€‚ hexo generateå‡ºç°yamlè§£æé”™è¯¯ç­‰ç­‰æ£€æŸ¥ä¸‹config.yamlæ˜¯å¦å†™é”™ï¼Œä¸»é¢˜æˆ–è€…æ–‡ç« é‡Œé¢æ˜¯å¦æœ‰ä¸­è‹±æ–‡æ ‡ç‚¹ç¬¦å·çš„é—®é¢˜ï¼Œspace not tabç­‰ç­‰ã€‚ hexo deploy æ— é™ç­‰å¾…ä¸€ç›´å¡åœ¨è¿™è¾¹ï¼Œéœ€è¦è¾“å…¥ä»¥ä¸‹å‘½ä»¤çœ‹çœ‹å‡ºé”™ç‚¹sudo hexo deploy --debug å…å¯†éƒ¨ç½²ä¹‹å‰æ¯æ¬¡éƒ¨ç½²å‰éƒ½è¦è¾“å…¥å¯†ç ï¼Œç°åœ¨å¯ä»¥ç”Ÿæˆrsa-key,æ·»åŠ åˆ°GitHubä¸Šã€‚å…·ä½“çš„æ­¥éª¤è§å®˜ç½‘ï¼Œæœ€åéªŒè¯ä¸‹å›¾ä»¥åŠæ‰§è¡Œï¼š 12//openssh 6.8ä»¥ä¸Šssh-add -l -E md5 æŸ¥çœ‹md5ä¸GitHubä¸Šçš„md5æ˜¯å¦åŒ¹é…ã€‚ æ³¨æ„ï¼šmacä¸­è¦æ·»åŠ ä¸‹é¢çš„å‘½ä»¤ï¼š 1ssh-add -K ~/.ssh/id_rsa ssh-add é»˜è®¤å°†åˆ¶å®šçš„ç§˜é’¥æ·»åŠ åœ¨å½“å‰è¿è¡Œçš„ ssh-agent æœåŠ¡ä¸­ï¼Œä½†æ˜¯ä½ å¯ä»¥æ”¹å˜è¿™ä¸ªé»˜è®¤è¡Œä¸ºè®©å®ƒæ·»åŠ åˆ° keychain æœåŠ¡ä¸­ï¼Œè®© Mac æ¥å¸®ä½ è®°ä½ã€ç®¡ç†å¹¶ä¿éšœè¿™äº›ç§˜é’¥çš„å®‰å…¨æ€§ã€‚ åœ¨ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶ä¹‹åï¼Œé¡µé¢çš„æ–‡ä»¶ä¾ç„¶æ²¡æœ‰æ›´æ–°ã€‚è§£å†³æ–¹æ¡ˆï¼š hexo cleanå¹¶ä¸”åˆ é™¤.deploy_gitæ–‡ä»¶å¤¹ä¹‹åï¼Œhexo d -gã€‚ä¸ºäº†å¼ºåˆ¶æµè§ˆå™¨æ›´æ–°èµ„æºæ–‡ä»¶ï¼Œå¯ä»¥å¼ºåˆ¶åˆ·æ–°ã€‚åˆ é™¤.deploy_gitæ—¶å¦‚æœæœ‰ directory not emptyçš„é—®é¢˜ï¼Œåº”è¯¥æ˜¯æ–‡ä»¶å¤¹è¿˜è¢«å ç”¨ï¼Œæ¨å‡ºå ç”¨çš„ç¨‹åºå³å¯ã€‚ permission deniedè§£å†³æ–¹æ¡ˆ: sudo hexo deploy -g references: build-github-blog-page hexo api nextä¸»é¢˜ å¤šè¯´æ•™ç¨‹ Hexoå¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ todo hexoæ’ä»¶ é˜…è¯»æ¬¡æ•° åˆ†äº«é“¾æ¥ é«˜äº®ã€jsfiddleå¼•å…¥ã€read more","categories":[],"tags":[{"name":"gitPages","slug":"gitPages","permalink":"http://yoursite.com/tags/gitPages/"},{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"}]}]}